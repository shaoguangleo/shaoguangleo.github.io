<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"shaoguangleo.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="郭大侠的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="浩瀚宇宙 灿烂星空">
<meta property="og:url" content="http://shaoguangleo.github.io/page/42/index.html">
<meta property="og:site_name" content="浩瀚宇宙 灿烂星空">
<meta property="og:description" content="郭大侠的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="郭大侠">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://shaoguangleo.github.io/page/42/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>浩瀚宇宙 灿烂星空</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=a8cfacb0a536bd846d2fd545cedb4d61"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'a8cfacb0a536bd846d2fd545cedb4d61');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a8cfacb0a536bd846d2fd545cedb4d61";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="浩瀚宇宙 灿烂星空" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">浩瀚宇宙 灿烂星空</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">工作和生活中的七七八八</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2014/02/12/linux-ulimit-beginner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2014/02/12/linux-ulimit-beginner/" class="post-title-link" itemprop="url">放开了去的 ulimit 命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-02-12 22:11:00" itemprop="dateCreated datePublished" datetime="2014-02-12T22:11:00+08:00">2014-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">Linux入门</span></a>
                </span>
            </span>

          
            <span id="/2014/02/12/linux-ulimit-beginner/" class="post-meta-item leancloud_visitors" data-flag-title="放开了去的 ulimit 命令" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/02/12/linux-ulimit-beginner/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/02/12/linux-ulimit-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2014/02/12/linux-ulimit-beginner/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2014/02/12/linux-ulimit-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="放开了去的-ulimit"><a href="#放开了去的-ulimit" class="headerlink" title="放开了去的  ulimit"></a>放开了去的  ulimit</h1><p>.. note::<br>  离离原上草，一岁一枯荣。<br>  白居易《草 / 赋得古原草送别》</p>
<h2 id="ulimit简介"><a href="#ulimit简介" class="headerlink" title="ulimit简介"></a>ulimit简介</h2><p>对于高并发或者频繁读写文件的应用程序而言，有时可能需要修改系统能够打开的最多文件句柄数，否则就可能会出现<em>too many open files</em>的错误。</p>
<p>而句柄数分为系统总限制和单进程限制。可以使用<code>ulimit -n</code>来查看系统对单个进程的限制及可以打开的文件数目。</p>
<p>或者执行<code>ulimit -a</code>来查看所有的详细信息。</p>
<h2 id="临时修改打开文件数目"><a href="#临时修改打开文件数目" class="headerlink" title="临时修改打开文件数目"></a>临时修改打开文件数目</h2><p>对于临时的修改而言，可以终端中输入下面的命令，将该值调整为65536.</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ulimit</span> -HSn 65535</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p> 上面的命令将open files修改为65535，不过退出当前shell后即失效。<br>        H和S分别表示硬限制和软限制</p>
</blockquote>
<h2 id="永久修改"><a href="#永久修改" class="headerlink" title="永久修改"></a>永久修改</h2><p>如果希望永久修改，需要修改配置文件 <code>/etc/security/limits.conf</code>，修改后需要重新启动系统。</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>soft nofile 65535</span><br><span class="line"><span class="bullet">* </span>hard nofile 65535</span><br></pre></td></tr></tbody></table></figure>

<p>其中的*表示所有的用户，<strong>soft</strong>和<strong>hard</strong>分别表示软硬限制，<strong>nofile</strong>表示能够打开的最大文件数，第四列为具体的值。其中具体的值有一个上次，在文件<code>/proc/sys/fs/nr_open</code>，默认为1048576，完全够用了。</p>
<h2 id="系统总打开句柄限制"><a href="#系统总打开句柄限制" class="headerlink" title="系统总打开句柄限制"></a>系统总打开句柄限制</h2><p>上面讨论的均为单个线程的限制，属于线程级别的，系统级别的限制在文件<code>/proc/sys/fs/file-max</code>文件中。</p>
<p>修改这个文件也是临时生效的，重启失效，如果希望永久生效，需要修改下面文件：<br><code>/etc/sysctl.conf</code></p>
<p>可以添加下面这行</p>
<figure class="highlight fortran"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="keyword">file</span>-<span class="built_in">max</span> = <span class="number">6815744</span></span><br></pre></td></tr></tbody></table></figure>

<p>然后运行<code>sysctl -p</code>或者重启生效。可以通过<code>lsof -p PID</code> 来查看单个进程打开的文件句柄</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2014/02/12/linux-ulimit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2014/02/12/linux-ulimit/" class="post-title-link" itemprop="url">Linux的 ulimit 命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-02-12 22:11:00" itemprop="dateCreated datePublished" datetime="2014-02-12T22:11:00+08:00">2014-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span id="/2014/02/12/linux-ulimit/" class="post-meta-item leancloud_visitors" data-flag-title="Linux的 ulimit 命令" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/02/12/linux-ulimit/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/02/12/linux-ulimit/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2014/02/12/linux-ulimit/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2014/02/12/linux-ulimit/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Linux对打开文件数量的限制-ulimit"><a href="#Linux对打开文件数量的限制-ulimit" class="headerlink" title="Linux对打开文件数量的限制 ulimit"></a>Linux对打开文件数量的限制 ulimit</h1><p>对于高并发或者频繁读写文件的应用而言，需求修改系统能够打开的文件句柄数，<br>否则会出现too many open files的错误。</p>
<p>而句柄数分为系统总限制和单进程限制。<br>可以使用<code>ulimit -n</code>来查看系统对单个进程的限制，及open files。</p>
<p>或者执行<code>ulimit -a</code>来查看所有的详细信息。</p>
<h2 id="临时修改打开文件数目"><a href="#临时修改打开文件数目" class="headerlink" title="临时修改打开文件数目"></a>临时修改打开文件数目</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ulimit</span> -HSn 65535</span><br></pre></td></tr></tbody></table></figure>

<p>上面的命令将open files修改为65535，退出当前shell后即失效。<br>H和S分别表示硬限制和软限制</p>
<h2 id="永久修改"><a href="#永久修改" class="headerlink" title="永久修改"></a>永久修改</h2><p>如果希望永久修改，需要修改配置文件 <code>/etc/security/limits.conf</code>，修改后需要重新启动系统。</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>soft nofile 65535</span><br><span class="line"><span class="bullet">* </span>hard nofile 65535</span><br></pre></td></tr></tbody></table></figure>

<p>其中的*表示所有的用户，soft和hard分别表示软硬限制，nofile表示能够打开的最大文件数，第四列为具体的值。<br>其中具体的值有一个上次，在文件<code>/proc/sys/fs/nr_open</code>，默认为1048576，完全够用了。</p>
<h2 id="系统总打开句柄限制"><a href="#系统总打开句柄限制" class="headerlink" title="系统总打开句柄限制"></a>系统总打开句柄限制</h2><p>上面讨论的均为单个线程的限制，属于线程级别的，系统级别的限制在文件<code>/proc/sys/fs/file-max</code>文件中。</p>
<p>修改这个文件也是临时生效的，重启失效，如果希望永久生效，需要修改下面文件：<br><code>/etc/sysctl.conf</code></p>
<p>可以添加下面这行</p>
<figure class="highlight fortran"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.<span class="keyword">file</span>-<span class="built_in">max</span> = <span class="number">6815744</span></span><br></pre></td></tr></tbody></table></figure>

<p>然后运行<code>sysctl -p</code>或者重启生效。</p>
<p>可以通过<code>lsof -p PID</code> 来查看单个进程打开的文件句柄</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2014/02/12/linux-w-beginner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2014/02/12/linux-w-beginner/" class="post-title-link" itemprop="url">什么？谁？w (who & what)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-02-12 22:11:00" itemprop="dateCreated datePublished" datetime="2014-02-12T22:11:00+08:00">2014-02-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">Linux入门</span></a>
                </span>
            </span>

          
            <span id="/2014/02/12/linux-w-beginner/" class="post-meta-item leancloud_visitors" data-flag-title="什么？谁？w (who & what)" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/02/12/linux-w-beginner/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/02/12/linux-w-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2014/02/12/linux-w-beginner/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2014/02/12/linux-w-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="什么？谁？w-who-amp-what"><a href="#什么？谁？w-who-amp-what" class="headerlink" title="什么？谁？w (who &amp; what)"></a>什么？谁？w (who &amp; what)</h1><p>.. code::<br>  去年花里逢君别，今日花开已一年。<br>  韦应物《寄李儋元锡》</p>
<p><code>w</code>可以认为是加强版的<code>who</code>，果然越简洁越强大，就比如<code>less</code>比<code>more</code>是功能更多的。</p>
<p><code>w</code>不仅可以显示谁在登录，还可以打印他们在做什么。<code>w</code>显示的信息如下：</p>
<ul>
<li>登录的用户；</li>
<li>运行的程序；</li>
<li>第一行显示的信息：当前时间、系统运行的时间、多少用户登录、系统的负载（分贝为1，5，15分钟）</li>
</ul>
<p>官方定义为：</p>
<blockquote>
<p> w - Show who is logged on and what they are doing.</p>
</blockquote>
<p>用法为：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ w [options] user [...]</span><br></pre></td></tr></tbody></table></figure>



<p>常用的两个选项为：</p>
<ul>
<li><p><code>-h</code> 　不显示各栏位的标题信息列。</p>
</li>
<li><p><code>-s</code> 　简洁格式列表，不显示用户登入时间，JCPU或者PCPU的时间</p>
</li>
</ul>
<h2 id="默认的显示"><a href="#默认的显示" class="headerlink" title="默认的显示"></a>默认的显示</h2><p>显示当前用户的登录信息及执行的命令</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ w</span><br><span class="line">16:29:03 up 26 days,  2:49, 6 <span class="built_in">users</span>,  load average: 1.00, 0.97, 0.96</span><br><span class="line">USER     TTY      FROM LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">user     pts/4    :1   07Sep21 20days  9:59   1:53m bash</span><br><span class="line">user     pts/0    :2   08Sep21  6days  0.70s  1:53m zsh</span><br><span class="line">user     pts/1    :3   08Sep21 20days  1:13m  1:53m bash</span><br><span class="line">user      :0      :0   15Sep21 6days  27days 21.36s zsh</span><br><span class="line">user     pts/2    :0   15Sep21 14days  0.25s  0.25s zsh</span><br><span class="line">user     pts/3    :3   16Sep21 24:45m  0.22s  0.22s bash</span><br></pre></td></tr></tbody></table></figure>



<h2 id="不显示标题行"><a href="#不显示标题行" class="headerlink" title="不显示标题行"></a>不显示标题行</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ w -h</span><br><span class="line">16:29:16 up 26 days,  2:49, 6 <span class="built_in">users</span>,  load average: 1.20, 0.67, 0.76</span><br><span class="line">USER     TTY      FROM  LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">user     pts/4    :1    07Sep21 20days  9:59   1:53m bash</span><br><span class="line">user     pts/0    :2    08Sep21  6days  0.70s  1:53m zsh</span><br><span class="line">user     pts/1    :3    08Sep21 20days  1:13m  1:53m bash</span><br><span class="line">user      :0      :0    15Sep21 6days  27days 21.36s zsh</span><br><span class="line">user     pts/2    :0    15Sep21 14days  0.25s  0.25s zsh</span><br><span class="line">user     pts/3    :3    16Sep21 24:45m  0.22s  0.22s bash</span><br></pre></td></tr></tbody></table></figure>



<h2 id="简洁模式显示"><a href="#简洁模式显示" class="headerlink" title="简洁模式显示"></a>简洁模式显示</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ w -s</span><br><span class="line">16:29:26 up 26 days,  2:49, 6 <span class="built_in">users</span>,  load average: 1.50, 0.67, 0.36</span><br><span class="line">USER     TTY      FROM    IDLE   WHAT</span><br><span class="line">user     pts/4    :1     20days  bash</span><br><span class="line">user     pts/0    :2      6days  zsh</span><br><span class="line">user     pts/1    :3     20days  bash</span><br><span class="line">user      :0      :0     6days   zsh</span><br><span class="line">user     pts/2    :0     14days  zsh</span><br><span class="line">user     pts/3    :3     24:45m  bash</span><br></pre></td></tr></tbody></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2014/01/26/git-about/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2014/01/26/git-about/" class="post-title-link" itemprop="url">聊聊版本</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-01-26 22:14:00" itemprop="dateCreated datePublished" datetime="2014-01-26T22:14:00+08:00">2014-01-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
                </span>
            </span>

          
            <span id="/2014/01/26/git-about/" class="post-meta-item leancloud_visitors" data-flag-title="聊聊版本" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/01/26/git-about/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/01/26/git-about/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2014/01/26/git-about/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2014/01/26/git-about/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="聊聊版本控制"><a href="#聊聊版本控制" class="headerlink" title="聊聊版本控制"></a>聊聊版本控制</h1><p>Git是一款分布式版本控制系统，有别于CVS和SVN等集中式版本控制系统，Git可以让研发团队更加高效地协同工作，从而提高生产率。</p>
<p> 有很长一段时间Linus只使用diff、patch和tar包来管理Linux的代码。</p>
<p>大家平时在安装软件包的时候会发现软件包的名字后面有-svn,-git等等字眼。。到底有什么区别呢？看下面～～～</p>
<ol>
<li>RCS(Revision Control System) 修订控制系统，特点:</li>
<li>简单</li>
<li>使用Lock机制防止多个开发人员对同一个文件同时进行修改.</li>
<li>CVS(Cocurrent Version System)并发版本系统,建立在RCS基础上,最流行的开放源代码版本控制系统,特点:</li>
<li>使用单一的主代码树,而不像RCS那样依赖多个目录.</li>
<li>最大优点在于多名开发人员可以同时对一个文件进行修改.允许合并.这就“并发“开发.</li>
<li>SVN(SubVersion)</li>
<li>目录的版本控制,CVS 只能对文件进行版本控制，不能对目录进行版本控制.CVS 只能注意到，一个文件在一个位置被删除了，而在一个新位置创建了另外一个文件。由于它不会连接两个操作，因此也很容易使文件历史轨迹丢失,SVN可以</li>
<li>原子性提交,CVS 采用线性、串行的批量提交，即依次地，一个接一个地执行提交，每成功提交一个文件，该文件的一个新的版本即被记录到版本库中，提交时用户提供的日志信息被重复地存储到每一个被修改的文件的版本历史中。CVS 串行批量提交模式的弊端在于 －当任何原因造成批量操作的中断时（典型原因包括：网络中断、客户端死机等），版本库往往处于一个不一致的状态：原本应该全部入库的文件只有一部分入库，很有可能版本库中的最新版本不能顺利编译，更为严重的是，随着其他的用户执行cvs update 操作，该不一致性将迅速在开发团队中扩散，从而严重影响团队的开发效率，并存在质量隐患。另外，假如该批量提交的中断没有被及时发现，开发团队往往要花更多的时间进行软件调试和排错。</li>
<li>Git, Git 是用于 Linux 内核开发的版本控制工具。与常用的版本控制工具 CVS, Subversion 等不同，它<strong>采用了分布式版本库的方式，不必服务器端软件支持，使源代码的发布和交流极其方便</strong>。 Git 的速度很快，这对于诸如 Linux kernel 这样的大项目来说自然很重要。 Git 最为出色的是它的合并跟踪（merge tracing）能力。git更加适合分布式开发项目。而svn（当然全称是subversion）则更适合于集中式大型开发项目。也有在git之上再使用一层svn的做法。</li>
</ol>
<h2 id="几个版本控制"><a href="#几个版本控制" class="headerlink" title="几个版本控制"></a>几个版本控制</h2><ul>
<li>本地版本控制：这个可能是大多数人使用的方式，不同的名字或者时间信息等，但很容易混淆文件</li>
<li>集中化版本控制：有个单一的集中管理的服务器，保持所有文件的修改版本，容易管理，但万一服务器宕机，风险就超级大了</li>
<li>分布式版本控制：多地克隆备份</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>CVS,Git,Mercurial,Subversion比较</p>
<table>
<thead>
<tr>
<th>特征</th>
<th>CVS</th>
<th>Git</th>
<th>Mercurial</th>
<th>Subversion</th>
</tr>
</thead>
<tbody><tr>
<td>是否原子提交</td>
<td>没有</td>
<td>是</td>
<td>是的</td>
<td>是</td>
</tr>
<tr>
<td>文件和目录是否可以移动或重命名</td>
<td>CVS: 不是. 重命名不支持. 如果手动进行, 可能会损坏历史记录</td>
<td>Git: 支持重命名, 这是很实用的目的. git甚至能检测到重命名之后文件的改变. 尽管如此, 基于特殊的存储结构, 重命名不会被显示的记录, git能够推导出来(在实际使用中很容易做到)</td>
<td>是的, 重命名是支持的</td>
<td>是的. 支持重命名</td>
</tr>
<tr>
<td>在移动或重命名之后智能合并</td>
<td>CVS: 不能. 重命名都不支持, 就不必说智能了</td>
<td>Git: 不支持.</td>
<td>Mercurial: 是的. 重命名之后智能合并是支持的.</td>
<td>不支持.</td>
</tr>
<tr>
<td>文件和目录拷贝</td>
<td>不能</td>
<td>不能</td>
<td>支持拷贝</td>
<td>拷贝非常容易(O(1)). 包括产生分支</td>
</tr>
<tr>
<td>远程存储仓库的备份</td>
<td>间接的.</td>
<td>git的内部特征</td>
<td>是的</td>
<td>间接的.</td>
</tr>
<tr>
<td>是否传递变更到父仓库</td>
<td>CVS: 不会</td>
<td>是的</td>
<td>是的</td>
<td>是的,</td>
</tr>
<tr>
<td>仓库权限</td>
<td>CVS: 很有限.</td>
<td></td>
<td>Mercutial: 是的.</td>
<td>Subversion: 是的.</td>
</tr>
<tr>
<td>变更集</td>
<td>CVS: 不是. 变更是基于文件的</td>
<td>Git: 是的. 是支持的, 创建他们很容易</td>
<td>Mercurial: 是的. 变更集是支持的</td>
<td>Subversion: 部分支持. 对于一次提交会隐式创建一个变更集</td>
</tr>
<tr>
<td>跟踪线性的文件历史</td>
<td>CVS: 是的. cvs annotate</td>
<td>Git: 是的.(git blame)</td>
<td>Mercurial: 是的(hg annotate)</td>
<td>Subversion: 是的(svn blame)</td>
</tr>
<tr>
<td>能够只在仓库的单目录下作用</td>
<td>CVS: 是的</td>
<td>Git: 不是. 尽管如此, 提交多少能被限制</td>
<td>Mercurial: 能够基于某树的某个子集进行提交. 也有局部检出的能力</td>
<td>Subversion: 是的</td>
</tr>
<tr>
<td>跟踪未提交的变化</td>
<td>CVS: 是的. 通过cvs diff</td>
<td>Git: 是的.</td>
<td>Mercurial: 是的. 使用hg diff</td>
<td>Subversion: 是的. 使用svn diff</td>
</tr>
<tr>
<td>基于单个文件的提交信息</td>
<td>CVS: 不是. 提交信息是基于单次变化的</td>
<td>Git: 是的. 提交信息基于变更集</td>
<td>Mercurial: 不是</td>
<td>Subversion: 不是. 没有这个特征</td>
</tr>
<tr>
<td>文档</td>
<td>CVS: 非常棒. 有很多在线的tutorials和资源, 在线的书籍.</td>
<td>Git: 良好. 短的帮助比较简洁难懂.</td>
<td>Mercurial: 很好. 有基于公司的书籍和wiki. 每个命令都集成了帮助</td>
<td>Subversion: 很好. 有一些在线的书籍和一些在线的tutorials和资源. 并且书籍是以docbook/xml写的</td>
</tr>
<tr>
<td>配置是否轻松</td>
<td>CVS: 好. 是个事实上的标准. 基于每个系统都有并且很容易配置</td>
<td>Git: 好. 在现有平台上二进制可用. 需要C编译器和Perl. 在windows上需要cygwin. 并有一些Unix特征</td>
<td>Mercurial: 非常好. 几乎所有平台都有二进制包. 从源码编译需要python2.3以上, 并且需要C编译器</td>
<td>有些复杂</td>
</tr>
<tr>
<td>命令集</td>
<td>CVS: 包含了3个经常用到的命令的简单的命令集(cvs commit, cvs update和cvs checkout)和其它一些</td>
<td>Git: 命令集很丰富, 并且和CVS不兼容</td>
<td>Mercurial: 尝试模仿CVS交互方式, 但是偏离了基于不同的设计的意图</td>
<td>Subversion: 类CVS的命令集, 能够很容易被CVS用户使用</td>
</tr>
<tr>
<td>网络支持</td>
<td>CVS: 好. cvs在不同的场合使用不同的协议. 协议能够通过ssh链接的加密隧道进行</td>
<td>Git: 非常棒. 能够使用本地的git协议, 但也能在rsync, ssh, HTTP和HTTPS上使用</td>
<td>Mercurial: 非常棒. 使用HTTP或ssh. 远程访问会非常安全, 在只读网络里不需要上锁</td>
<td>Subversion: 非常好. Subversion服务器支持WebDAV+DeltaV(基于HTTP或HTTPS)作为底层协议, 或者它自身的协议同样能在ssh链接通道里使用.</td>
</tr>
<tr>
<td>可移植性</td>
<td>客户端能在UNIX, Windows和Mac OS上使用.</td>
<td>客户端运行在大多数的UNIX系统上,</td>
<td>运行在基于所有能运行python的平台</td>
<td>客户端和服务器端都能在UNIX, Windows和Mac OS X上运行</td>
</tr>
<tr>
<td>web接口</td>
<td>.CVSweb, ViewVC, Chora和wwCVS</td>
<td>Gitweb</td>
<td>Mercurial: 是的. Web接口是内置组件</td>
<td>ViewVC, SVN::Web, WebSVN, ViewSVN, mod_svn_view, Chora, Trac,SVN::RaWeb::Light,SVN Browser, Insurrection和perl_svn.</td>
</tr>
<tr>
<td>图形用户界面</td>
<td>WinCVS, Cervisia, TortoiseCVS</td>
<td>Gitk,Qqit和Git-gui</td>
<td>Hgit,hgct</td>
<td>RapidSVN, TortoiseSVN, Jsvn(java),</td>
</tr>
</tbody></table>
<h2 id="Git-是什么"><a href="#Git-是什么" class="headerlink" title="Git 是什么"></a>Git 是什么</h2><p>Git与其他版本控制系统的区别，其他的一般基于差异delta-based版本控制，如下：</p>
<p><img src="/2014/01/26/git-about/images/deltas.png"></p>
<p>而<code>git</code>是基于快照流的，如下：</p>
<p><img src="/2014/01/26/git-about/images/snapshots.png"></p>
<p>近乎所有的操作都是本地执行。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2014/01/26/git-config/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2014/01/26/git-config/" class="post-title-link" itemprop="url">git 初始配置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-01-26 22:14:00" itemprop="dateCreated datePublished" datetime="2014-01-26T22:14:00+08:00">2014-01-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index"><span itemprop="name">Git</span></a>
                </span>
            </span>

          
            <span id="/2014/01/26/git-config/" class="post-meta-item leancloud_visitors" data-flag-title="git 初始配置" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/01/26/git-config/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/01/26/git-config/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2014/01/26/git-config/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2014/01/26/git-config/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="git的初始配置"><a href="#git的初始配置" class="headerlink" title="git的初始配置"></a>git的初始配置</h1><h2 id="查看git版本"><a href="#查看git版本" class="headerlink" title="查看git版本"></a>查看git版本</h2><p>在终端中输入<code>git --version</code>，比如我的输出为：</p>
<blockquote>
<p>git version 2.7.0</p>
</blockquote>
<h2 id="设置用户名和邮箱地址"><a href="#设置用户名和邮箱地址" class="headerlink" title="设置用户名和邮箱地址"></a>设置用户名和邮箱地址</h2><p>下面的设置主要是告诉git是哪位大神在用<em>git</em>。</p>
<p>在使用git提交或者操作的时候，git需要知道你是谁，邮箱是什么，可以通过下面的命令进行配置：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">"Your Name"</span></span><br><span class="line">$ git config --global user.email <span class="string">"youremail@xyz.com"</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="设置文本编辑器"><a href="#设置文本编辑器" class="headerlink" title="设置文本编辑器"></a>设置文本编辑器</h2><p>如果你想使用不同的文本编辑器，例如 vim，可以这样做：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.editor vim</span><br></pre></td></tr></tbody></table></figure>

<h2 id="提供命令输出的可读性"><a href="#提供命令输出的可读性" class="headerlink" title="提供命令输出的可读性"></a>提供命令输出的可读性</h2><p>默认情况下，<code>git</code>的操作可能都是黑白的，如果更改为彩色，就可以注意到很多特性，并且提高可读性，让你的世界不再只是黑白色。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global color.ui auto</span><br></pre></td></tr></tbody></table></figure>


<p>当然也可以在文件<code>~/.gitconfig</code>加上以上</p>
<figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[color]</span></span><br><span class="line">  <span class="attr">ui</span> = auto</span><br></pre></td></tr></tbody></table></figure>


<h2 id="Git-在Windows上的配置"><a href="#Git-在Windows上的配置" class="headerlink" title="Git 在Windows上的配置"></a>Git 在Windows上的配置</h2><h3 id="git-add-提示warning-LF-will-be-replaced-by-CRLF-in-解决办法"><a href="#git-add-提示warning-LF-will-be-replaced-by-CRLF-in-解决办法" class="headerlink" title="git add 提示warning: LF will be replaced by CRLF in 解决办法"></a>git add 提示warning: LF will be replaced by CRLF in 解决办法</h3><p>在使用git的时候，每次执行</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add filename</span><br></pre></td></tr></tbody></table></figure>

<p>都会提示这样一个警告消息：</p>
<p> 这里主要是因为不同的操作系统之间对换行的定义不同，比如Windows为CRLF，Linux为LF，而MacOSX为CR。</p>
<p> 这就导致从不同系统checkout代码的时候，文件并未修改，反而出现了modified的情况，如下可以避免这种情况。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git config core.autocrlf <span class="literal">false</span></span><br></pre></td></tr></tbody></table></figure>

<p>这样设置git的配置后在执行add操作就没有问题了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2014/01/24/linux-locate-beginner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2014/01/24/linux-locate-beginner/" class="post-title-link" itemprop="url">精准快速定位的locate</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-01-24 22:11:00" itemprop="dateCreated datePublished" datetime="2014-01-24T22:11:00+08:00">2014-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">Linux入门</span></a>
                </span>
            </span>

          
            <span id="/2014/01/24/linux-locate-beginner/" class="post-meta-item leancloud_visitors" data-flag-title="精准快速定位的locate" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/01/24/linux-locate-beginner/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/01/24/linux-locate-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2014/01/24/linux-locate-beginner/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2014/01/24/linux-locate-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="精准快速定位的locate"><a href="#精准快速定位的locate" class="headerlink" title="精准快速定位的locate"></a>精准快速定位的locate</h1><p>.. note::</p>
<p>  众里寻他千百度，蓦然回首，那人却在灯火阑珊处<br>  -李煜</p>
<p>Linux <code>locate</code>命令用于查找符合条件的文档、程序、目录等等。这个命令会在数据库中查找符合条件的各种信息。</p>
<p>一般情况我们只需要输入 <code>locate name</code> 即可查找。</p>
<p>官方定义为：</p>
<blockquote>
<p><code>locate</code> - list files in databases that match a pattern</p>
</blockquote>
<p>使用方法为：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ locate  [-d  path  |  --database=path]  [-e  | -E | --[non-]existing] [-i | --ignore-case] [-0 | --null] [-c |</span><br><span class="line">       --count] [-w | --wholename] [-b | --<span class="built_in">basename</span>] [-l N | --<span class="built_in">limit</span>=N] [-S | --statistics] [-r | --regex ] [--regex‐</span><br><span class="line">       <span class="built_in">type</span>  R] [--max-database-age D] [-P | -H | --nofollow] [-L | --follow] [--version] [-A | --all] [-p | --<span class="built_in">print</span>]</span><br><span class="line">       [--<span class="built_in">help</span>] pattern...</span><br></pre></td></tr></tbody></table></figure>

<p>看着很复杂，不过常用的参数倒是不多，基本为：</p>
<ul>
<li><code>-n</code> :  至多显示 n个输出。</li>
<li><code>-i, --ignore-case</code> : 忽略大小写</li>
</ul>
<h2 id="默认无参数"><a href="#默认无参数" class="headerlink" title="默认无参数"></a>默认无参数</h2><p>默认情况下，<code>locate</code>直接跟上需要查找的信息就可以了，如下所示：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ locate set_vis.cpp</span><br><span class="line">/home/user/mycode/src/set_vis.cpp</span><br><span class="line"></span><br><span class="line"><span class="comment"># 以查找apropos为例</span></span><br><span class="line">$ locate apropos</span><br><span class="line">/usr/bin/apropos</span><br><span class="line">/usr/local/difmap/help/apropos.hlp</span><br><span class="line">/usr/share/emacs/24.3/lisp/apropos.elc</span><br><span class="line">/usr/share/man/de/man1/apropos.1.gz</span><br><span class="line">/usr/share/man/es/man1/apropos.1.gz</span><br><span class="line">/usr/share/man/fr/man1/apropos.1.gz</span><br><span class="line">/usr/share/man/id/man1/apropos.1.gz</span><br><span class="line">/usr/share/man/it/man1/apropos.1.gz</span><br><span class="line">/usr/share/man/ja/man1/apropos.1.gz</span><br><span class="line">/usr/share/man/man1/apropos.1.gz</span><br><span class="line">/usr/share/man/nl/man1/apropos.1.gz</span><br><span class="line">/usr/share/man/pl/man1/apropos.1.gz</span><br><span class="line">/usr/share/man/ru/man1/apropos.1.gz</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="太多需要简单化"><a href="#太多需要简单化" class="headerlink" title="太多需要简单化"></a>太多需要简单化</h2><p>如果输出的信息很多，仅仅希望看到前面的几个，使用<code>-n</code>参数既可</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 仅仅查看前的3个</span></span><br><span class="line">$ locate -n 3 apropos</span><br><span class="line">/usr/bin/apropos</span><br><span class="line">/usr/local/difmap/help/apropos.hlp</span><br><span class="line">/usr/share/emacs/24.3/lisp/apropos.elc</span><br></pre></td></tr></tbody></table></figure>



<h2 id="不区分大小写"><a href="#不区分大小写" class="headerlink" title="不区分大小写"></a>不区分大小写</h2><p>部分情况下，可能有大小写混淆的情况，此时使用<code>-i</code>参数既可</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ $ locate -i set_vis.cpp</span><br><span class="line">/home/user/mycode/src/set_vis.cpp</span><br><span class="line">/home/user/mycode_CPP/src/set_VIS.cpp</span><br></pre></td></tr></tbody></table></figure>



<h2 id="book-说明"><a href="#book-说明" class="headerlink" title=":book: 说明"></a><span class="github-emoji"><span>📖</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4d6.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> 说明</h2><p>不过刚按照的系统，这个命令并不一定有输出，主要是因为<code>locate</code> 与 <code>find</code> 不同， <code> find</code> 直接在硬盘找，而<code>locate</code> 只在数据库中查找。</p>
<p>这个数据库在CentOS系统默认的为 <u>/var/lib/mlocate/mlocate.db</u> 中，所以<code> locate</code> 的查找会比较快，但并一定是实时的，而是以数据库的更新为准。</p>
<p>可以通过下面的命令手工升级数据库 ，命令为：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ updatedb</span><br></pre></td></tr></tbody></table></figure>

<p>然后就可以使用了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2014/01/24/book-no-tools-fitness/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2014/01/24/book-no-tools-fitness/" class="post-title-link" itemprop="url">不做乔布斯，做最好的自己</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-01-24 21:38:56" itemprop="dateCreated datePublished" datetime="2014-01-24T21:38:56+08:00">2014-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BB%E4%B9%A6/" itemprop="url" rel="index"><span itemprop="name">读书</span></a>
                </span>
            </span>

          
            <span id="/2014/01/24/book-no-tools-fitness/" class="post-meta-item leancloud_visitors" data-flag-title="不做乔布斯，做最好的自己" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/01/24/book-no-tools-fitness/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/01/24/book-no-tools-fitness/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2014/01/24/book-no-tools-fitness/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2014/01/24/book-no-tools-fitness/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="无器械健身"><a href="#无器械健身" class="headerlink" title="无器械健身"></a>无器械健身</h1><p>总结起来也就六个字：</p>
<p>** 结实 强壮 自信 **</p>
<p>即练出结实的肌肉、锻炼强壮的躯体，培养自信的自己。</p>
<p>Plus:成功健身必须遵循的6个原则</p>
<ul>
<li>坚持</li>
<li>恢复</li>
<li>规律</li>
<li>变化</li>
<li>进步</li>
<li>超负荷</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2014/01/24/book-%E6%97%A0%E5%99%A8%E6%A2%B0%E5%81%A5%E8%BA%AB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2014/01/24/book-%E6%97%A0%E5%99%A8%E6%A2%B0%E5%81%A5%E8%BA%AB/" class="post-title-link" itemprop="url">无器械健身</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-01-24 21:38:56" itemprop="dateCreated datePublished" datetime="2014-01-24T21:38:56+08:00">2014-01-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BB%E4%B9%A6/" itemprop="url" rel="index"><span itemprop="name">读书</span></a>
                </span>
            </span>

          
            <span id="/2014/01/24/book-%E6%97%A0%E5%99%A8%E6%A2%B0%E5%81%A5%E8%BA%AB/" class="post-meta-item leancloud_visitors" data-flag-title="无器械健身" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/01/24/book-%E6%97%A0%E5%99%A8%E6%A2%B0%E5%81%A5%E8%BA%AB/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/01/24/book-无器械健身/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2014/01/24/book-%E6%97%A0%E5%99%A8%E6%A2%B0%E5%81%A5%E8%BA%AB/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2014/01/24/book-%E6%97%A0%E5%99%A8%E6%A2%B0%E5%81%A5%E8%BA%AB/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="无器械健身"><a href="#无器械健身" class="headerlink" title="无器械健身"></a>无器械健身</h1><p>总结起来也就六个字：</p>
<p>** 结实 强壮 自信 **</p>
<p>即练出结实的肌肉、锻炼强壮的躯体，培养自信的自己。</p>
<p>Plus:成功健身必须遵循的6个原则</p>
<ul>
<li>坚持</li>
<li>恢复</li>
<li>规律</li>
<li>变化</li>
<li>进步</li>
<li>超负荷</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2014/01/21/linux-centos-yum-rpmdb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2014/01/21/linux-centos-yum-rpmdb/" class="post-title-link" itemprop="url">solved - RPMDB altered outside of yum</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-01-21 15:04:40" itemprop="dateCreated datePublished" datetime="2014-01-21T15:04:40+08:00">2014-01-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CentOS/" itemprop="url" rel="index"><span itemprop="name">CentOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/CentOS/Fedora/" itemprop="url" rel="index"><span itemprop="name">Fedora</span></a>
                </span>
            </span>

          
            <span id="/2014/01/21/linux-centos-yum-rpmdb/" class="post-meta-item leancloud_visitors" data-flag-title="solved - RPMDB altered outside of yum" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/01/21/linux-centos-yum-rpmdb/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/01/21/linux-centos-yum-rpmdb/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2014/01/21/linux-centos-yum-rpmdb/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2014/01/21/linux-centos-yum-rpmdb/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="solved-RPMDB-altered-outside-of-yum"><a href="#solved-RPMDB-altered-outside-of-yum" class="headerlink" title="solved : RPMDB altered outside of yum"></a>solved : RPMDB altered outside of yum</h1><p>在使用yum的时候报的错误，解决方法为：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="built_in">history</span> <span class="built_in">sync</span></span><br></pre></td></tr></tbody></table></figure>

<p>主要是将我们rpmdb和yumdb进行同步一下，注意，这个过程根据你的机器情况和安装软件包的数量可能会小小的需要一段时间。</p>
<p>Refer：</p>
<blockquote>
<p><a href="https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7-Beta/html/System_Administrators_Guide/sect-Yum-Transaction_History.html">https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_Linux/7-Beta/html/System_Administrators_Guide/sect-Yum-Transaction_History.html</a></p>
</blockquote>
<p>5.4. Working with Transaction History</p>
<p>The yum history command allows users to review information about a timeline of Yum transactions, the dates and times they occurred, the number of packages affected, whether transactions succeeded or were aborted, and if the RPM database was changed between transactions. Additionally, this command can be used to undo or redo certain transactions. All history data are stored in the history DB in the var/lib/yum/history/ directory.</p>
<p>5.4.1. Listing Transactions</p>
<p>To display a list of twenty most recent transactions, as root, either run yum history with no additional arguments, or type the following at a shell prompt:</p>
<p>yum history list</p>
<p>To display all transactions, add the all keyword:</p>
<p>yum history list all</p>
<p>To display only transactions in a given range, use the command in the following form:</p>
<p>yum history list start_id..end_id</p>
<p>You can also list only transactions regarding a particular package or packages. To do so, use the command with a package name or a glob expression:</p>
<p>yum history list glob_expression…</p>
<p>Example 5.18. Listing the five oldest transactions</p>
<p>In the output of yum history list, the most recent transaction is displayed at the top of the list. To display information about the five oldest transactions stored in the history data base, type:</p>
<p>~]# yum history list 1..5</p>
<p>Loaded plugins: product-id, refresh-packagekit, subscription-manager</p>
<p>ID     | Login user               | Date and time    | Action(s)      | Altered</p>
<p>——————————————————————————-</p>
<pre><code> 5 | Jaromir … &lt;jhradilek&gt;  | 2013-07-29 15:33 | Install        |    1

 4 | Jaromir … &lt;jhradilek&gt;  | 2013-07-21 15:10 | Install        |    1

 3 | Jaromir … &lt;jhradilek&gt;  | 2013-07-16 15:27 | I, U           |   73

 2 | System &lt;unset&gt;           | 2013-07-16 15:19 | Update         |    1

 1 | System &lt;unset&gt;           | 2013-07-16 14:38 | Install        | 1106
</code></pre>
<p>history list</p>
<p>All forms of the yum history list command produce tabular output with each row consisting of the following columns:</p>
<p>ID — an integer value that identifies a particular transaction.</p>
<p>Login user — the name of the user whose login session was used to initiate a transaction. This information is typically presented in the Full Name <username> form. For transactions that were not issued by a user (such as an automatic system update), System <unset> is used instead.</unset></username></p>
<p>Date and time — the date and time when a transaction was issued.</p>
<p>Action(s) — a list of actions that were performed during a transaction as described in Table 5.1, “Possible values of the Action(s) field”.</p>
<p>Altered — the number of packages that were affected by a transaction, possibly followed by additional information as described in Table 5.2, “Possible values of the Altered field”.</p>
<p>Table 5.1. Possible values of the Action(s) field</p>
<p>Action   Abbreviation   Description</p>
<p>Downgrade D    At least one package has been downgraded to an older version.</p>
<p>Erase    E     At least one package has been removed.</p>
<p>Install    I      At least one new package has been installed.</p>
<p>Obsoleting  O    At least one package has been marked as obsolete.</p>
<p>Reinstall      R     At least one package has been reinstalled.</p>
<p>Update U    At least one package has been updated to a newer version.</p>
<p>Table 5.2. Possible values of the Altered field</p>
<p>Symbol Description</p>
<p>&lt;     Before the transaction finished, the rpmdb database was changed outside Yum.</p>
<blockquote>
<pre><code>After the transaction finished, the rpmdb database was changed outside Yum.
</code></pre>
</blockquote>
<ul>
<li><pre><code>The transaction failed to finish.
</code></pre>
</li>
</ul>
<h1 id="The-transaction-finished-successfully-but-yum-returned-a-non-zero-exit-code"><a href="#The-transaction-finished-successfully-but-yum-returned-a-non-zero-exit-code" class="headerlink" title="The transaction finished successfully, but yum returned a non-zero exit code."></a>The transaction finished successfully, but yum returned a non-zero exit code.</h1><p>E     The transaction finished successfully, but an error or a warning was displayed.</p>
<p>P     The transaction finished successfully, but problems already existed in the rpmdb database.</p>
<p>s     The transaction finished successfully, but the –skip-broken command line option was used and certain packages were skipped.</p>
<p>To synchronize the rpmdb or yumdb database contents for any installed package with the currently used rpmdb or yumdb database, type the following:</p>
<p>yum history sync</p>
<p>To display some overall statistics about the currently used history DB use the following command:</p>
<p>yum history stats</p>
<p>Example 5.19. Example output of yum history stats</p>
<p>~]# yum history stats</p>
<p>Loaded plugins: langpacks, presto, refresh-packagekit</p>
<p>File        : //var/lib/yum/history/history-2012-08-15.sqlite</p>
<p>Size        : 2,766,848</p>
<p>Transactions: 41</p>
<p>Begin time  : Wed Aug 15 16:18:25 2012</p>
<p>End time    : Wed Feb 27 14:52:30 2013</p>
<p>Counts      :</p>
<p>  NEVRAC :  2,204</p>
<p>  NEVRA  :  2,204</p>
<p>  NA     :  1,759</p>
<p>  NEVR   :  2,204</p>
<p>  rpm DB :  2,204</p>
<p>  yum DB :  2,204</p>
<p>history stats</p>
<p>Yum also allows you to display a summary of all past transactions. To do so, run the command in the following form as root:</p>
<p>yum history summary</p>
<p>To display only transactions in a given range, type:</p>
<p>yum history summary start_id..end_id</p>
<p>Similarly to the yum history list command, you can also display a summary of transactions regarding a certain package or packages by supplying a package name or a glob expression:</p>
<p>yum history summary glob_expression…</p>
<p>Example 5.20. Summary of the five latest transactions</p>
<p>~]# yum history summary 1..5</p>
<p>Loaded plugins: product-id, refresh-packagekit, subscription-manager</p>
<p>Login user                 | Time                | Action(s)        | Altered</p>
<p>——————————————————————————-</p>
<p>Jaromir … <jhradilek>    | Last day            | Install          |        1</jhradilek></p>
<p>Jaromir … <jhradilek>    | Last week           | Install          |        1</jhradilek></p>
<p>Jaromir … <jhradilek>    | Last 2 weeks        | I, U             |       73</jhradilek></p>
<p>System <unset>             | Last 2 weeks        | I, U             |     1107</unset></p>
<p>history summary</p>
<p>All forms of the yum history summary command produce simplified tabular output similar to the output of yum history list.</p>
<p>As shown above, both yum history list and yum history summary are oriented towards transactions, and although they allow you to display only transactions related to a given package or packages, they lack important details, such as package versions. To list transactions from the perspective of a package, run the following command as root:</p>
<p>yum history package-list glob_expression…</p>
<p>Example 5.21. Tracing the history of a package</p>
<p>For example, to trace the history of subscription-manager and related packages, type the following at a shell prompt:</p>
<p>~]# yum history package-list subscription-manager*</p>
<p>Loaded plugins: product-id, refresh-packagekit, subscription-manager</p>
<p>ID     | Action(s)      | Package</p>
<p>——————————————————————————-</p>
<pre><code> 3 | Updated        | subscription-manager-0.95.11-1.el6.x86_64

 3 | Update         |                      0.95.17-1.el6_1.x86_64

 3 | Updated        | subscription-manager-firstboot-0.95.11-1.el6.x86_64

 3 | Update         |                                0.95.17-1.el6_1.x86_64

 3 | Updated        | subscription-manager-gnome-0.95.11-1.el6.x86_64

 3 | Update         |                            0.95.17-1.el6_1.x86_64

 1 | Install        | subscription-manager-0.95.11-1.el6.x86_64

 1 | Install        | subscription-manager-firstboot-0.95.11-1.el6.x86_64

 1 | Install        | subscription-manager-gnome-0.95.11-1.el6.x86_64
</code></pre>
<p>history package-list</p>
<p>In this example, three packages were installed during the initial system installation: subscription-manager, subscription-manager-firstboot, and subscription-manager-gnome. In the third transaction, all these packages were updated from version 0.95.11 to version 0.95.17.</p>
<p>5.4.2. Examining Transactions</p>
<p>To display the summary of a single transaction, as root, use the yum history summary command in the following form:</p>
<p>yum history summary id</p>
<p>To examine a particular transaction or transactions in more detail, run the following command as root:</p>
<p>yum history info id…</p>
<p>The id argument is optional and when you omit it, yum automatically uses the last transaction. Note that when specifying more than one transaction, you can also use a range:</p>
<p>yum history info start_id..end_id</p>
<p>Example 5.22. Example output of yum history info</p>
<p>The following is sample output for two transactions, each installing one new package:</p>
<p>~]# yum history info 4..5</p>
<p>Loaded plugins: product-id, refresh-packagekit, subscription-manager</p>
<p>Transaction ID : 4..5</p>
<p>Begin time     : Thu Jul 21 15:10:46 2011</p>
<p>Begin rpmdb    : 1107:0c67c32219c199f92ed8da7572b4c6df64eacd3a</p>
<p>End time       :            15:33:15 2011 (22 minutes)</p>
<p>End rpmdb      : 1109:1171025bd9b6b5f8db30d063598f590f1c1f3242</p>
<p>User           : Jaromir Hradilek <jhradilek></jhradilek></p>
<p>Return-Code    : Success</p>
<p>Command Line   : install screen</p>
<p>Command Line   : install yum-plugin-fs-snapshot</p>
<p>Transaction performed with:</p>
<pre><code>Installed     rpm-4.8.0-16.el6.x86_64

Installed     yum-3.2.29-17.el6.noarch

Installed     yum-metadata-parser-1.1.2-16.el6.x86_64
</code></pre>
<p>Packages Altered:</p>
<pre><code>Install screen-4.0.3-16.el6.x86_64

Install yum-plugin-fs-snapshot-1.1.30-6.el6.noarch
</code></pre>
<p>history info</p>
<p>You can also view additional information, such as what configuration options were used at the time of the transaction, or from what repository and why were certain packages installed. To determine what additional information is available for a certain transaction, type the following at a shell prompt as root:</p>
<p>yum history addon-info id</p>
<p>Similarly to yum history info, when no id is provided, yum automatically uses the latest transaction. Another way to refer to the latest transaction is to use the last keyword:</p>
<p>yum history addon-info last</p>
<p>Example 5.23. Example output of yum history addon-info</p>
<p>For the fourth transaction in the history, the yum history addon-info command provides the following output:</p>
<p>~]# yum history addon-info 4</p>
<p>Loaded plugins: product-id, refresh-packagekit, subscription-manager</p>
<p>Transaction ID: 4</p>
<p>Available additional history information:</p>
<p>  config-main</p>
<p>  config-repos</p>
<p>  saved_tx</p>
<p>history addon-info</p>
<p>In the output of the yum history addon-info command, three types of information are available:</p>
<p>config-main — global Yum options that were in use during the transaction. Refer to Section 5.5.1, “Setting [main] Options” for information on how to change global options.</p>
<p>config-repos — options for individual Yum repositories. Refer to Section 5.5.2, “Setting [repository] Options” for information on how to change options for individual repositories.</p>
<p>saved_tx — the data that can be used by the yum load-transaction command in order to repeat the transaction on another machine (see below).</p>
<p>To display selected type of additional information, run the following command as root:</p>
<p>yum history addon-info id information</p>
<p>5.4.3. Reverting and Repeating Transactions</p>
<p>Apart from reviewing the transaction history, the yum history command provides means to revert or repeat a selected transaction. To revert a transaction, type the following at a shell prompt as root:</p>
<p>yum history undo id</p>
<p>To repeat a particular transaction, as root, run the following command:</p>
<p>yum history redo id</p>
<p>Both commands also accept the last keyword to undo or repeat the latest transaction.</p>
<p>Note that both yum history undo and yum history redo commands only revert or repeat the steps that were performed during a transaction. If the transaction installed a new package, the yum history undo command will uninstall it, and if the transaction uninstalled a package the command will again install it. This command also attempts to downgrade all updated packages to their previous version, if these older packages are still available. If you need to restore the system to the state before an update, consider using the fs-snapshot plug-in described in Section 5.6.3, “Working with Plug-ins”.</p>
<p>When managing several identical systems, Yum also allows you to perform a transaction on one of them, store the transaction details in a file, and after a period of testing, repeat the same transaction on the remaining systems as well. To store the transaction details to a file, type the following at a shell prompt as root:</p>
<p>yum -q history addon-info id saved_tx &gt; file_name</p>
<p>Once you copy this file to the target system, you can repeat the transaction by using the following command as root:</p>
<p>yum load-transaction file_name</p>
<p>You can configure load-transaction to ignore missing packages or rpmdb version. For more information on these configuration options see the yum.conf man page.</p>
<p>5.4.4. Starting New Transaction History</p>
<p>Yum stores the transaction history in a single SQLite database file. To start new transaction history, run the following command as root:</p>
<p>yum history new</p>
<p>This will create a new, empty database file in the /var/lib/yum/history/ directory. The old transaction history will be kept, but will not be accessible as long as a newer database file is present in the directory.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2014/01/20/linux-grafana/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2014/01/20/linux-grafana/" class="post-title-link" itemprop="url">linux grafana使用教程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2014-01-20 21:30:05" itemprop="dateCreated datePublished" datetime="2014-01-20T21:30:05+08:00">2014-01-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span id="/2014/01/20/linux-grafana/" class="post-meta-item leancloud_visitors" data-flag-title="linux grafana使用教程" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2014/01/20/linux-grafana/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/01/20/linux-grafana/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2014/01/20/linux-grafana/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2014/01/20/linux-grafana/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="grafana使用教程"><a href="#grafana使用教程" class="headerlink" title="grafana使用教程"></a>grafana使用教程</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>参考 <a href="https://grafana.com/docs/grafana/latest/installation/rpm/">https://grafana.com/docs/grafana/latest/installation/rpm/</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> vim /etc/yum.repos.d/grafana.repo</span><br></pre></td></tr></tbody></table></figure>



<p>对于开源而言，内容如下：</p>
<figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[grafana]</span></span><br><span class="line"><span class="attr">name</span>=grafana</span><br><span class="line"><span class="attr">baseurl</span>=https://packages.grafana.com/oss/rpm</span><br><span class="line"><span class="attr">repo_gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgkey</span>=https://packages.grafana.com/gpg.key</span><br><span class="line"><span class="attr">sslverify</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">sslcacert</span>=/etc/pki/tls/certs/ca-bundle.crt</span><br></pre></td></tr></tbody></table></figure>

<p>对于商用版本，内容如下：</p>
<figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[grafana]</span></span><br><span class="line"><span class="attr">name</span>=grafana</span><br><span class="line"><span class="attr">baseurl</span>=https://packages.grafana.com/enterprise/rpm</span><br><span class="line"><span class="attr">repo_gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgkey</span>=https://packages.grafana.com/gpg.key</span><br><span class="line"><span class="attr">sslverify</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">sslcacert</span>=/etc/pki/tls/certs/ca-bundle.crt</span><br></pre></td></tr></tbody></table></figure>



<p>然后开始安装</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> yum update</span><br><span class="line">$ <span class="built_in">sudo</span> yum install grafana</span><br><span class="line"></span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> yum install grafana-enterprise</span><br></pre></td></tr></tbody></table></figure>



<h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">使用grafana-cli工具安装</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取可用插件列表</span></span><br><span class="line"></span><br><span class="line">$ grafana-cli plugins list-remote  </span><br><span class="line"></span><br><span class="line"><span class="comment">#修改图形为饼状</span></span><br><span class="line">$ grafana-cli plugins install grafana-piechart-panel</span><br><span class="line"><span class="comment">#安装其他图形插件</span></span><br><span class="line">$ grafana-cli plugins install grafana-clock-panel</span><br><span class="line"><span class="comment">#钟表形展示</span></span><br><span class="line">$ grafana-cli plugins install briangann-gauge-panel</span><br><span class="line"><span class="comment">#字符型展示</span></span><br><span class="line">$ grafana-cli plugins install natel-discrete-panel</span><br><span class="line"><span class="comment">#服务器状态</span></span><br><span class="line">$ grafana-cli plugins install vonage-status-panel</span><br></pre></td></tr></tbody></table></figure>



<h2 id="启动、重启、关闭"><a href="#启动、重启、关闭" class="headerlink" title="启动、重启、关闭"></a>启动、重启、关闭</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#启动：</span></span><br><span class="line">$ service grafana-server start</span><br><span class="line"></span><br><span class="line"><span class="comment"># 停止：</span></span><br><span class="line"><span class="variable">$service</span> grafana-server stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启：</span></span><br><span class="line">$ service grafana-server restart</span><br><span class="line"></span><br><span class="line"><span class="comment">#加入开机自启动： </span></span><br><span class="line"><span class="variable">$chkconfig</span> --add grafana-server on</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### Or later</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">sudo</span> systemctl daemon-reload</span><br><span class="line">$ <span class="built_in">sudo</span> systemctl start grafana-server</span><br><span class="line">$ <span class="built_in">sudo</span> systemctl status grafana-server</span><br><span class="line"><span class="comment">#Configure the Grafana server to start at boot:</span></span><br><span class="line">$ <span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> grafana-server</span><br></pre></td></tr></tbody></table></figure>



<h2 id="创建Dashboard"><a href="#创建Dashboard" class="headerlink" title="创建Dashboard"></a>创建Dashboard</h2><p>首先选定一个数据库，添加一个数据源。</p>
<h2 id="登录Grafana-Protal"><a href="#登录Grafana-Protal" class="headerlink" title="登录Grafana Protal"></a><strong>登录Grafana Protal</strong></h2><p>在浏览器中输入：<code>http://GRAFANA_HOST_IP:3000</code><br>默认账号/密码：<code>admin/admin</code></p>
<p><strong>进入Plugins界面，选择“Zabbix”</strong><br>开始面板（左上角图标） -&gt; Plugins -&gt; Apps -&gt; Zabbix</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/41/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/41/">41</a><span class="page-number current">42</span><a class="page-number" href="/page/43/">43</a><span class="space">&hellip;</span><a class="page-number" href="/page/100/">100</a><a class="extend next" rel="next" href="/page/43/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">郭大侠</p>
  <div class="site-description" itemprop="description">郭大侠的博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">998</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">181</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1450</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://macshuo.com/" title="http:&#x2F;&#x2F;macshuo.com&#x2F;" rel="noopener" target="_blank">MacTalk</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://huhuidong.wordpress.com/" title="https:&#x2F;&#x2F;huhuidong.wordpress.com&#x2F;" rel="noopener" target="_blank">小胡</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2007 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郭大侠</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"vIjrLnlboDVaaseO2yYcVSQF-gzGzoHsz","app_key":"NTHrGJp71GzEGvNUEUFumVcR","server_url":null,"security":true};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://shaoguangleo.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'vIjrLnlboDVaaseO2yYcVSQF-gzGzoHsz',
      appKey     : 'NTHrGJp71GzEGvNUEUFumVcR',
      placeholder: "路过，即是缘分...",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
