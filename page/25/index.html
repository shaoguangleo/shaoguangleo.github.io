<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"shaoguangleo.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="郭大侠的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="浩瀚宇宙 灿烂星空">
<meta property="og:url" content="http://shaoguangleo.github.io/page/25/index.html">
<meta property="og:site_name" content="浩瀚宇宙 灿烂星空">
<meta property="og:description" content="郭大侠的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="郭大侠">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://shaoguangleo.github.io/page/25/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>浩瀚宇宙 灿烂星空</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=a8cfacb0a536bd846d2fd545cedb4d61"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'a8cfacb0a536bd846d2fd545cedb4d61');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a8cfacb0a536bd846d2fd545cedb4d61";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="浩瀚宇宙 灿烂星空" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">浩瀚宇宙 灿烂星空</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">工作和生活中的七七八八</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/06/08/linux-xfs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/06/08/linux-xfs/" class="post-title-link" itemprop="url">CentOS 上源码升级安装xfs软件包</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-06-08 12:14:00" itemprop="dateCreated datePublished" datetime="2017-06-08T12:14:00+08:00">2017-06-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/CentOS/" itemprop="url" rel="index"><span itemprop="name">CentOS</span></a>
                </span>
            </span>

          
            <span id="/2017/06/08/linux-xfs/" class="post-meta-item leancloud_visitors" data-flag-title="CentOS 上源码升级安装xfs软件包" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/06/08/linux-xfs/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/06/08/linux-xfs/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/06/08/linux-xfs/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/06/08/linux-xfs/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="安装依赖软件包"><a href="#安装依赖软件包" class="headerlink" title="安装依赖软件包"></a>安装依赖软件包</h1><p>sudo yum install libtool automake gettext libblkid-devel libuuid-devel</p>
<h1 id="获取xfs最新软件包"><a href="#获取xfs最新软件包" class="headerlink" title="获取xfs最新软件包"></a>获取xfs最新软件包</h1><p>wget <a href="https://www.kernel.org/pub/linux/utils/fs/xfs/xfsprogs/xfsprogs-4.5.0.tar.gz">https://www.kernel.org/pub/linux/utils/fs/xfs/xfsprogs/xfsprogs-4.5.0.tar.gz</a></p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><figure class="highlight gauss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf xfsprogs<span class="number">-4.5</span><span class="number">.0</span>.tar.gz</span><br><span class="line">./configure</span><br><span class="line"><span class="built_in">make</span></span><br><span class="line"><span class="built_in">make</span> install</span><br><span class="line">sudo <span class="built_in">make</span> install</span><br></pre></td></tr></tbody></table></figure>

<h1 id="查看xfs版本"><a href="#查看xfs版本" class="headerlink" title="查看xfs版本"></a>查看xfs版本</h1><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkfs<span class="selector-class">.xfs</span> -V</span><br></pre></td></tr></tbody></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/06/08/linux-zabbix/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/06/08/linux-zabbix/" class="post-title-link" itemprop="url">CentOS 安装配置zabbix库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-06-08 12:14:00" itemprop="dateCreated datePublished" datetime="2017-06-08T12:14:00+08:00">2017-06-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/CentOS/" itemprop="url" rel="index"><span itemprop="name">CentOS</span></a>
                </span>
            </span>

          
            <span id="/2017/06/08/linux-zabbix/" class="post-meta-item leancloud_visitors" data-flag-title="CentOS 安装配置zabbix库" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/06/08/linux-zabbix/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/06/08/linux-zabbix/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/06/08/linux-zabbix/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/06/08/linux-zabbix/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CentOS-安装配置zabbix库"><a href="#CentOS-安装配置zabbix库" class="headerlink" title="CentOS 安装配置zabbix库"></a>CentOS 安装配置zabbix库</h1><h2 id="安装zabbix库"><a href="#安装zabbix库" class="headerlink" title="安装zabbix库"></a>安装zabbix库</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> rpm -ivh https://repo.zabbix.com/zabbix/5.4/rhel/7/x86_64/zabbix-release-5.4-1.el7.noarch.rpm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装zabbix前端的一些包</span></span><br><span class="line">$ yum-config-manager --<span class="built_in">enable</span> rhel-7-server-optional-rpms</span><br><span class="line"></span><br><span class="line"><span class="comment"># Installation</span></span><br><span class="line">$ <span class="built_in">sudo</span> yum install zabbix-server-mysql</span><br></pre></td></tr></tbody></table></figure>

<h2 id="新建数据库"><a href="#新建数据库" class="headerlink" title="新建数据库"></a>新建数据库</h2><p>新建 zabbix Mysql 数据库及专用账号</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mysql </span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql <span class="operator">&gt;</span> <span class="keyword">CREATE</span> DATABASE zabbix <span class="keyword">character set</span> utf8 <span class="keyword">collate</span> utf8_bin;</span><br><span class="line"></span><br><span class="line">mysql <span class="operator">&gt;</span> <span class="keyword">GRANT</span> <span class="keyword">all</span> <span class="keyword">ON</span> zabbix.<span class="operator">*</span> <span class="keyword">TO</span> <span class="string">'zabbix'</span>@<span class="string">'%'</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">'zabbix'</span>;</span><br><span class="line"></span><br><span class="line">mysql <span class="operator">&gt;</span> flush privileges;</span><br><span class="line"></span><br><span class="line">mysql <span class="operator">&gt;</span> quit</span><br></pre></td></tr></tbody></table></figure>






<h2 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h2><p>默认情况下，执行下述命令就可以；</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -uzabbix -p zabbix</span></span><br></pre></td></tr></tbody></table></figure>

<p>但是我好想没有找到这个压缩文件，所以执行下面的命令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/share/zabbix-mysql/</span><br><span class="line"><span class="comment"># 依次导入下列sql表</span></span><br><span class="line">$ <span class="built_in">cat</span> schema.sql | mysql -uzabbix -p zabbix</span><br><span class="line">$ <span class="built_in">cat</span> images.sql | mysql -uzabbix -p zabbix</span><br><span class="line">$ <span class="built_in">cat</span> data.sql | mysql -uzabbix -p zabbix</span><br></pre></td></tr></tbody></table></figure>



<h2 id="配置数据库"><a href="#配置数据库" class="headerlink" title="配置数据库"></a>配置数据库</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/zabbix/zabbix_server.conf</span><br><span class="line"></span><br><span class="line">DBHost=localhost</span><br><span class="line"></span><br><span class="line">DBName=zabbix</span><br><span class="line"></span><br><span class="line">DBUser=zabbix</span><br><span class="line"></span><br><span class="line">DBPassword=zabbix</span><br></pre></td></tr></tbody></table></figure>



<h2 id="启动-Zabbix-server-进程"><a href="#启动-Zabbix-server-进程" class="headerlink" title="启动 Zabbix server 进程"></a>启动 Zabbix server 进程</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ service zabbix-server start</span><br><span class="line"></span><br><span class="line">$ systemctl <span class="built_in">enable</span> zabbix-server</span><br></pre></td></tr></tbody></table></figure>

<h2 id="web-UI-安装zabbix"><a href="#web-UI-安装zabbix" class="headerlink" title="web UI 安装zabbix"></a>web UI 安装zabbix</h2><p>重启一下Httpd 服务后，进入 <a href="http://zabbix-server-ip/zabbix">http://zabbix-server-ip/zabbix</a> 即可web配置，</p>
<p>初始登录信息为Admin/zabbix</p>
<h2 id="安装zabbix-agent"><a href="#安装zabbix-agent" class="headerlink" title="安装zabbix agent"></a>安装zabbix agent</h2><p>安装Zabbix Agent</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install zabbix-agent</span><br></pre></td></tr></tbody></table></figure>

<p>编辑Zabbix Agent 配置文件</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/zabbix/zabbix_agentd.conf</span><br><span class="line"></span><br><span class="line">Server=[zabbix server ip]</span><br><span class="line"></span><br><span class="line">ServerActive=[zabbix server ip]</span><br><span class="line">Hostname=[ Hostname of client system ]</span><br></pre></td></tr></tbody></table></figure>

<p>重启Zabbix Agent</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">service zabbix-agent restart</span><br><span class="line"></span><br><span class="line">添加开机启动</span><br><span class="line">​```bash</span><br><span class="line">chkconfig zabbix-agent on</span><br></pre></td></tr></tbody></table></figure>



<h2 id="Zabbix-agent-on-Zabbix-server-is-unreachable-for-5-minutes"><a href="#Zabbix-agent-on-Zabbix-server-is-unreachable-for-5-minutes" class="headerlink" title="Zabbix agent on Zabbix server is unreachable for 5 minutes"></a>Zabbix agent on Zabbix server is unreachable for 5 minutes</h2><p> checked and found that the <em>ServerActive</em> address is not changed to zabbix-server IP address in configuration file. So we changed it to Zabbix-server IP.</p>
<p>We made the changes in:</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/etc/</span>zabbix/zabbix_agentd.conf</span><br></pre></td></tr></tbody></table></figure>

<p>and restarted the service using:</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> service zabbix-agent2 start </span><br></pre></td></tr></tbody></table></figure>

<p>This fixed the issue.</p>
<h1 id="Not-able-to-find-zabbix-data-source-in-grafana-After-enabling-plugin"><a href="#Not-able-to-find-zabbix-data-source-in-grafana-After-enabling-plugin" class="headerlink" title="Not able to find zabbix data source in grafana After enabling plugin"></a>Not able to find zabbix data source in grafana After enabling plugin</h1><p>It appears as <strong>signed</strong> on grafana’s plugin panel, but <strong>/etc/grafana/grafana.ini</strong> needs editing.</p>
<p>…<br>[plugins]<br>allow_loading_unsigned_plugins = alexanderzobnin-zabbix-datasource</p>
<h2 id="zabbix-无法启动server服务器"><a href="#zabbix-无法启动server服务器" class="headerlink" title="zabbix 无法启动server服务器"></a><strong>zabbix 无法启动server服务器</strong></h2><p>可以检查日志<code>tailf /var/log/zabbix/zabbix_server.log </code></p>
<h2 id="ZABBIX-报错连接拒绝-cannot-connect-to-10050-111-Connection-refused"><a href="#ZABBIX-报错连接拒绝-cannot-connect-to-10050-111-Connection-refused" class="headerlink" title="ZABBIX 报错连接拒绝(cannot connect to [10050]: [111] Connection refused)"></a>ZABBIX 报错连接拒绝(cannot connect to [10050]: [111] Connection refused)</h2><p>首先还是看一下防火墙等是不是阻断.<br>然后确认数据库的最大连接数.默认的是256.</p>
<p>1.vim /etc/my.cnf<br>[mysqld]<br>max_connections=需要添加的最大连接数</p>
<p>2.vim /etc/systemd/system.conf<br>DefaultLimitNOFILE=65535<br>DefaultLimitNPROC=65535</p>
<p>3.重启</p>
<p>systemctl daemon-reload</p>
<p>systemctl restart mysqld.service</p>
<p>查看最大连接数<br>mysql&gt;show variables like ‘max_connections’;<br>查看当前连接数<br>show status like ‘%thread%’;</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/05/07/linux-cpu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/07/linux-cpu/" class="post-title-link" itemprop="url">Linux查看物理CPU个数、核数、逻辑CPU个数</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-07 22:11:00" itemprop="dateCreated datePublished" datetime="2017-05-07T22:11:00+08:00">2017-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span id="/2017/05/07/linux-cpu/" class="post-meta-item leancloud_visitors" data-flag-title="Linux查看物理CPU个数、核数、逻辑CPU个数" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/05/07/linux-cpu/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/05/07/linux-cpu/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/05/07/linux-cpu/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/05/07/linux-cpu/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="查看Linux的CPU信息"><a href="#查看Linux的CPU信息" class="headerlink" title="查看Linux的CPU信息"></a>查看Linux的CPU信息</h1><h2 id="可以通过命令lscpu来查看"><a href="#可以通过命令lscpu来查看" class="headerlink" title="可以通过命令lscpu来查看"></a>可以通过命令lscpu来查看</h2><p><code>lscpu</code>用于显示CPU的相关信息，该命令主要从sysfs和/proc/cpuinfo收集CPU体系结构信息</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ lscpu</span><br><span class="line">Architecture:        x86_64 <span class="comment"># 架构</span></span><br><span class="line">CPU op-mode(s):      32-bit, 64-bit</span><br><span class="line">Byte Order:          Little Endian</span><br><span class="line">CPU(s):              16 <span class="comment"># 逻辑CPU颗数</span></span><br><span class="line">On-line CPU(s) list: 0-15</span><br><span class="line">Thread(s) per core:  2 <span class="comment"># 每个核的线程</span></span><br><span class="line">Core(s) per socket:  4 <span class="comment"># 每个CPU插槽的核数</span></span><br><span class="line">Socket(s):           2 <span class="comment"># CPU的插槽数</span></span><br><span class="line">NUMA node(s):        2</span><br><span class="line">Vendor ID:           GenuineIntel <span class="comment"># CPU厂商ID</span></span><br><span class="line">CPU family:          6 <span class="comment"># CPU系列</span></span><br><span class="line">Model:               85 <span class="comment"># 型号</span></span><br><span class="line">Model name:          Intel(R) Xeon(R) Gold 5222 CPU @ 3.80GHz</span><br><span class="line">Stepping:            7 <span class="comment"># 步进</span></span><br><span class="line">CPU MHz:             3538.279 <span class="comment"># CPU主频</span></span><br><span class="line">CPU max MHz:         3900.0000</span><br><span class="line">CPU min MHz:         1200.0000</span><br><span class="line">BogoMIPS:            7600.00</span><br><span class="line">Virtualization:      VT-x <span class="comment"># CPU支持的虚拟化技术</span></span><br><span class="line">L1d cache:           32K <span class="comment"># 一级缓存</span></span><br><span class="line">L1i cache:           32K <span class="comment"># 一级缓存</span></span><br><span class="line">L2 cache:            1024K <span class="comment"># 二级缓存</span></span><br><span class="line">L3 cache:            16896K <span class="comment"># 三级缓存</span></span><br><span class="line">NUMA node0 CPU(s):   0,2,4,6,8,10,12,14 <span class="comment"># Nom-Uniform Memeory Access(NUMA)</span></span><br><span class="line">NUMA node1 CPU(s):   1,3,5,7,9,11,13,15</span><br><span class="line">Flags:               fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc art arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 sdbg fma cx16 xtpr pdcm pcid dca sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm 3dnowprefetch cpuid_fault epb cat_l3 cdp_l3 invpcid_single intel_ppin ssbd mba ibrs ibpb stibp ibrs_enhanced tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 hle avx2 smep bmi2 erms invpcid rtm cqm mpx rdt_a avx512f avx512dq rdseed adx smap clflushopt clwb intel_pt avx512cd avx512bw avx512vl xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local dtherm ida arat pln pts pku ospke avx512_vnni md_clear flush_l1d arch_capabilities</span><br></pre></td></tr></tbody></table></figure>

<p>可以加上参数-p来获取比较容易解析的输出</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ lscpu -p</span><br><span class="line"><span class="comment"># The following is the parsable format, which can be fed to other</span></span><br><span class="line"><span class="comment"># programs. Each different item in every column has an unique ID</span></span><br><span class="line"><span class="comment"># starting from zero.</span></span><br><span class="line"><span class="comment"># CPU,Core,Socket,Node,,L1d,L1i,L2,L3</span></span><br><span class="line">0,0,0,0,,0,0,0,0</span><br><span class="line">1,1,1,1,,1,1,1,1</span><br><span class="line">2,2,0,0,,2,2,2,0</span><br><span class="line">3,3,1,1,,3,3,3,1</span><br><span class="line">4,4,0,0,,4,4,4,0</span><br><span class="line">5,5,1,1,,5,5,5,1</span><br><span class="line">6,6,0,0,,6,6,6,0</span><br><span class="line">7,7,1,1,,7,7,7,1</span><br><span class="line">8,0,0,0,,0,0,0,0</span><br><span class="line">9,1,1,1,,1,1,1,1</span><br><span class="line">10,2,0,0,,2,2,2,0</span><br><span class="line">11,3,1,1,,3,3,3,1</span><br><span class="line">12,4,0,0,,4,4,4,0</span><br><span class="line">13,5,1,1,,5,5,5,1</span><br><span class="line">14,6,0,0,,6,6,6,0</span><br><span class="line">15,7,1,1,,7,7,7,1</span><br></pre></td></tr></tbody></table></figure>

<h2 id="或者直接读取-x2F-proc-x2F-cpuinfo文件"><a href="#或者直接读取-x2F-proc-x2F-cpuinfo文件" class="headerlink" title="或者直接读取/proc/cpuinfo文件"></a>或者直接读取/proc/cpuinfo文件</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 总核数 = 物理CPU个数 X 每颗物理CPU的核数</span></span><br><span class="line"><span class="comment"># 总逻辑CPU数 = 物理CPU个数 X 每颗物理CPU的核数 X 超线程数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看物理CPU个数</span></span><br><span class="line"><span class="built_in">cat</span> /proc/cpuinfo| grep <span class="string">"physical id"</span>| <span class="built_in">sort</span>| <span class="built_in">uniq</span>| <span class="built_in">wc</span> -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看每个物理CPU中core的个数(即核数)</span></span><br><span class="line"><span class="built_in">cat</span> /proc/cpuinfo| grep <span class="string">"cpu cores"</span>| <span class="built_in">uniq</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看逻辑CPU的个数</span></span><br><span class="line"><span class="built_in">cat</span> /proc/cpuinfo| grep <span class="string">"processor"</span>| <span class="built_in">wc</span> -l</span><br></pre></td></tr></tbody></table></figure>


<h2 id="kswapd-often-uses-100-CPU-when-swap-is-in-use"><a href="#kswapd-often-uses-100-CPU-when-swap-is-in-use" class="headerlink" title="kswapd often uses 100% CPU when swap is in use"></a>kswapd often uses 100% CPU when swap is in use</h2><p>如果此时的Mem并没有用很多的话，可能需要执行下面的命令来强制关闭：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ killall -9 kswapd</span><br><span class="line">$ <span class="built_in">echo</span> 1 &gt; /proc/sys/vm/drop_caches</span><br></pre></td></tr></tbody></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/05/07/linux-sudo-beginner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/07/linux-sudo-beginner/" class="post-title-link" itemprop="url">超凡脱俗的 sudo</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-07 22:11:00" itemprop="dateCreated datePublished" datetime="2017-05-07T22:11:00+08:00">2017-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">Linux入门</span></a>
                </span>
            </span>

          
            <span id="/2017/05/07/linux-sudo-beginner/" class="post-meta-item leancloud_visitors" data-flag-title="超凡脱俗的 sudo" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/05/07/linux-sudo-beginner/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/05/07/linux-sudo-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/05/07/linux-sudo-beginner/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/05/07/linux-sudo-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="超凡脱俗的-sudo"><a href="#超凡脱俗的-sudo" class="headerlink" title="超凡脱俗的 sudo"></a>超凡脱俗的 sudo</h1><p>Linux <code>sudo</code>命令以系统管理者的身份执行指令，也就是说，经由 <code>sudo</code> 所执行的指令就好像是 root 亲自执行。</p>
<p>如果希望可以执行这个命令，需要管理员在文件 <u>/etc/sudoers</u> 中增加权限即可。</p>
<p>官方的定义为：</p>
<blockquote>
<p>execute a command as another user</p>
</blockquote>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> [ option ] <span class="built_in">command</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li><code>-l</code> 或<code>--list</code>：显示出自己（执行 sudo 的使用者）的权限</li>
<li><code>-k</code> 将会强迫使用者在下一次执行 <code>sudo</code> 时问密码（不论有没有超过 N 分钟）</li>
<li><code>-b</code> 将要执行的指令放在后台执行</li>
<li><code>-p prompt</code> 可以更改问密码的提示语，其中 %u 会代换为使用者的帐号名称， %h 会显示主机名称</li>
<li><code>-u username/uid</code> 不加此参数，代表要以 <strong>root</strong> 的身份执行指令，而加了此参数，可以以 <strong>username</strong> 的身份执行指令（uid 为该 <strong>username</strong> 的使用者号码）</li>
<li><code>-s</code> 执行环境变数中的 SHELL 所指定的 shell ，或是 <u>/etc/passwd</u> 里所指定的 shell</li>
<li><code>-H</code> 将环境变数中的 HOME （家目录）指定为要变更身份的使用者家目录（如不加 <code>-u</code> 参数就是系统管理者 <strong>root</strong> ）</li>
<li><code>command</code> 要以系统管理者身份（或以<code> -u</code> 更改为其他人）执行的指令</li>
</ul>
<h2 id="没有sudo权限的用户"><a href="#没有sudo权限的用户" class="headerlink" title="没有sudo权限的用户"></a>没有sudo权限的用户</h2><p>如果没有<code>sudo</code>权限，在执行命令的时候还有下面👇的输出：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">ls</span></span><br><span class="line">[<span class="built_in">sudo</span>] password <span class="keyword">for</span> username: </span><br><span class="line">username is not <span class="keyword">in</span> the sudoers file. This incident will be reported.</span><br></pre></td></tr></tbody></table></figure>





<h2 id="指定用户执行命令"><a href="#指定用户执行命令" class="headerlink" title="指定用户执行命令"></a>指定用户执行命令</h2><p>这个的应用场景为，其他用户在登录，而你具有sudo权限，测试可以通过指定用户名来操作。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> -u username <span class="built_in">ls</span> -l</span><br></pre></td></tr></tbody></table></figure>





<h2 id="列出目前sudo的权限"><a href="#列出目前sudo的权限" class="headerlink" title="列出目前sudo的权限"></a>列出目前sudo的权限</h2><p>如果不清楚，可以执行那些命令，可以通过参数-l来查看，主要看在sudoer里面的修改。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> -l</span><br><span class="line">Password:</span><br><span class="line">Matching Defaults entries <span class="keyword">for</span> user on localhost:</span><br><span class="line">    !visiblepw, always_set_home, match_group_by_gid, env_reset, env_keep=<span class="string">"COLORS DISPLAY</span></span><br><span class="line"><span class="string">    HOSTNAME HISTSIZE KDEDIR LS_COLORS"</span>, env_keep+=<span class="string">"MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS</span></span><br><span class="line"><span class="string">    LC_CTYPE"</span>, env_keep+=<span class="string">"LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES"</span>,</span><br><span class="line">    env_keep+=<span class="string">"LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE"</span>, env_keep+=<span class="string">"LC_TIME LC_ALL</span></span><br><span class="line"><span class="string">    LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY"</span>, secure_path=/sbin\:/bin\:/usr/sbin\:/usr/bin</span><br><span class="line"></span><br><span class="line">User user may run the following commands on localhost:</span><br><span class="line">    (ALL) ALL</span><br></pre></td></tr></tbody></table></figure>

<p>以root权限执行上一条命令</p>
<h2 id="使用sudo快速统计家目录的使用情况"><a href="#使用sudo快速统计家目录的使用情况" class="headerlink" title="使用sudo快速统计家目录的使用情况"></a>使用sudo快速统计家目录的使用情况</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> sh -c <span class="string">"cd /home ; du -s * | sort -rn "</span></span><br><span class="line">15013524344	user1</span><br><span class="line">1170974156	user2</span><br><span class="line">139238772	user3</span><br><span class="line">1382673532	user4</span><br><span class="line">41071068	user5</span><br><span class="line">3523056	user6</span><br></pre></td></tr></tbody></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/05/07/linux-sudo/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/07/linux-sudo/" class="post-title-link" itemprop="url">Linux的sudo命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-07 22:11:00" itemprop="dateCreated datePublished" datetime="2017-05-07T22:11:00+08:00">2017-05-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/Linux%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">Linux入门</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/Linux%E5%85%A5%E9%97%A8/Linux%E7%82%AB%E6%8A%80/" itemprop="url" rel="index"><span itemprop="name">Linux炫技</span></a>
                </span>
            </span>

          
            <span id="/2017/05/07/linux-sudo/" class="post-meta-item leancloud_visitors" data-flag-title="Linux的sudo命令" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/05/07/linux-sudo/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/05/07/linux-sudo/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/05/07/linux-sudo/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/05/07/linux-sudo/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Linux-sudo命令"><a href="#Linux-sudo命令" class="headerlink" title="Linux sudo命令"></a>Linux sudo命令</h1><p>Linux <code>sudo</code>命令以系统管理者的身份执行指令，也就是说，经由 <code>sudo</code> 所执行的指令就好像是 root 亲自执行。</p>
<p>如果希望可以执行这个命令，需要管理员在文件 <u>/etc/sudoers</u> 中增加权限即可。</p>
<p>官方的定义为：</p>
<blockquote>
<p>execute a command as another user</p>
</blockquote>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> [ option ] <span class="built_in">command</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li><code>-l</code> 或<code>--list</code>：显示出自己（执行 sudo 的使用者）的权限</li>
<li><code>-k</code> 将会强迫使用者在下一次执行 <code>sudo</code> 时问密码（不论有没有超过 N 分钟）</li>
<li><code>-b</code> 将要执行的指令放在后台执行</li>
<li><code>-p prompt</code> 可以更改问密码的提示语，其中 %u 会代换为使用者的帐号名称， %h 会显示主机名称</li>
<li><code>-u username/uid</code> 不加此参数，代表要以 <strong>root</strong> 的身份执行指令，而加了此参数，可以以 <strong>username</strong> 的身份执行指令（uid 为该 <strong>username</strong> 的使用者号码）</li>
<li><code>-s</code> 执行环境变数中的 SHELL 所指定的 shell ，或是 <u>/etc/passwd</u> 里所指定的 shell</li>
<li><code>-H</code> 将环境变数中的 HOME （家目录）指定为要变更身份的使用者家目录（如不加 <code>-u</code> 参数就是系统管理者 <strong>root</strong> ）</li>
<li><code>command</code> 要以系统管理者身份（或以<code> -u</code> 更改为其他人）执行的指令</li>
</ul>
<h2 id="没有sudo权限的用户"><a href="#没有sudo权限的用户" class="headerlink" title="没有sudo权限的用户"></a>没有sudo权限的用户</h2><p>如果没有<code>sudo</code>权限，在执行命令的时候还有下面👇的输出：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> <span class="built_in">ls</span></span><br><span class="line">[<span class="built_in">sudo</span>] password <span class="keyword">for</span> username: </span><br><span class="line">username is not <span class="keyword">in</span> the sudoers file. This incident will be reported.</span><br></pre></td></tr></tbody></table></figure>





<h2 id="指定用户执行命令"><a href="#指定用户执行命令" class="headerlink" title="指定用户执行命令"></a>指定用户执行命令</h2><p>这个的应用场景为，其他用户在登录，而你具有sudo权限，测试可以通过制定用户名来操作。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> -u username <span class="built_in">ls</span> -l</span><br></pre></td></tr></tbody></table></figure>





<h2 id="列出目前sudo的权限"><a href="#列出目前sudo的权限" class="headerlink" title="列出目前sudo的权限"></a>列出目前sudo的权限</h2><p>如果不清楚，可以执行那些命令，可以通过参数-l来查看，主要看在sudoer里面的修改。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> -l</span><br><span class="line">Password:</span><br><span class="line">Matching Defaults entries <span class="keyword">for</span> user on localhost:</span><br><span class="line">    !visiblepw, always_set_home, match_group_by_gid, env_reset, env_keep=<span class="string">"COLORS DISPLAY</span></span><br><span class="line"><span class="string">    HOSTNAME HISTSIZE KDEDIR LS_COLORS"</span>, env_keep+=<span class="string">"MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS</span></span><br><span class="line"><span class="string">    LC_CTYPE"</span>, env_keep+=<span class="string">"LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES"</span>,</span><br><span class="line">    env_keep+=<span class="string">"LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE"</span>, env_keep+=<span class="string">"LC_TIME LC_ALL</span></span><br><span class="line"><span class="string">    LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY"</span>, secure_path=/sbin\:/bin\:/usr/sbin\:/usr/bin</span><br><span class="line"></span><br><span class="line">User user may run the following commands on localhost:</span><br><span class="line">    (ALL) ALL</span><br></pre></td></tr></tbody></table></figure>

<p>以root权限执行上一条命令</p>
<h2 id="使用sudo快速统计家目录的使用情况"><a href="#使用sudo快速统计家目录的使用情况" class="headerlink" title="使用sudo快速统计家目录的使用情况"></a>使用sudo快速统计家目录的使用情况</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> sh -c <span class="string">"cd /home ; du -s * | sort -rn "</span></span><br><span class="line">15013524344	user1</span><br><span class="line">1170974156	user2</span><br><span class="line">139238772	user3</span><br><span class="line">1382673532	user4</span><br><span class="line">41071068	user5</span><br><span class="line">3523056	user6</span><br></pre></td></tr></tbody></table></figure>



<h2 id="炫技-快速执行上一条命令"><a href="#炫技-快速执行上一条命令" class="headerlink" title="炫技 - 快速执行上一条命令"></a>炫技 - 快速执行上一条命令</h2><p>第一种方法：在终端输入两个感叹号，然后回车就可以快速地执行上一条命令了。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ !!</span><br></pre></td></tr></tbody></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/05/06/linux-privilege/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/06/linux-privilege/" class="post-title-link" itemprop="url">Linux 权限设置</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-06 22:11:00" itemprop="dateCreated datePublished" datetime="2017-05-06T22:11:00+08:00">2017-05-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span id="/2017/05/06/linux-privilege/" class="post-meta-item leancloud_visitors" data-flag-title="Linux 权限设置" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/05/06/linux-privilege/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/05/06/linux-privilege/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/05/06/linux-privilege/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/05/06/linux-privilege/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="在linux下修改权限"><a href="#在linux下修改权限" class="headerlink" title="在linux下修改权限"></a>在linux下修改权限</h1><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">chmod <span class="selector-tag">g</span>+<span class="attribute">r</span> <span class="selector-tag">path</span>/file 加读权限 当前目录</span><br><span class="line">chmod -<span class="attribute">R</span> <span class="selector-tag">g</span>+<span class="attribute">r</span> <span class="selector-tag">path</span>/file 加读权限 当前目录以及子目录</span><br><span class="line"><span class="selector-tag">g</span>-<span class="attribute">r</span> 减读权限</span><br><span class="line"><span class="selector-tag">g</span>+w 加写权限</span><br><span class="line"><span class="selector-tag">g</span>-w</span><br><span class="line"><span class="selector-tag">g</span>+<span class="attribute">x</span> 加执行权限</span><br><span class="line"><span class="selector-tag">g</span>-<span class="attribute">x</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="chgrp修改文件所属组"><a href="#chgrp修改文件所属组" class="headerlink" title="chgrp修改文件所属组"></a>chgrp修改文件所属组</h2><p>简单使用，将文本test.txt所属组改为gourp1</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chgrp</span> gourp1 test.txt</span><br></pre></td></tr></tbody></table></figure>

<p>2.chown修改文件拥有者<br>##将test.txt文件所属用户修改为user1</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> user1 test.txt</span><br></pre></td></tr></tbody></table></figure>

<p>##同时修改test.txt的所属用户和所属组</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> user1:group1 test.txt</span><br></pre></td></tr></tbody></table></figure>

<p>3.chmod修改文件属性</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 755 <span class="built_in">test</span></span><br><span class="line"><span class="built_in">chmod</span> u+x <span class="built_in">test</span></span><br><span class="line"><span class="built_in">chmod</span> u-x <span class="built_in">test</span></span><br><span class="line"><span class="built_in">chmod</span> g+x <span class="built_in">test</span></span><br></pre></td></tr></tbody></table></figure>

<p>4.usrmod修改用户所属组<br>一般的话只是将当前用户添加到其它组中去</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usrmod -<span class="selector-tag">a</span> -<span class="selector-tag">G</span> group1 user1</span><br></pre></td></tr></tbody></table></figure>

<p>如果要彻底更改用户所属的组的话使用</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usrmod -<span class="selector-tag">g</span> group1 user1</span><br></pre></td></tr></tbody></table></figure>



<p>使用Linux时，需要以一个用户的身份登陆，从而限制一个使用者能够访问的资源；而组则是用来方便组织管理用户。</p>
<h2 id="用户与组"><a href="#用户与组" class="headerlink" title="用户与组"></a>用户与组</h2><p>•每个用户拥有一个UserID<br>•每个用户属于一个主组，属于一个或多个附属组<br>•每个组拥有一个GroupID<br>•每个进程以一个用户身份运行，并受该用户可访问的资源限制<br>•每个可登陆用户有一个指定的SHELL</p>
<p>系统中的文件都有一个所属用户及所属组，用户、组信息保存在以下三个文件中：</p>
<figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/etc/</span>passwd   用户信息</span><br><span class="line"></span><br><span class="line"><span class="regexp">/etc/</span>shadow  用户密码</span><br><span class="line"></span><br><span class="line"><span class="regexp">/edc/g</span>roup 　组信息</span><br></pre></td></tr></tbody></table></figure>

<p>命令id用以显示当前用户的信息，命令passwd可以修改当前用户的密码；以下命令可以显示登陆用户信息：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">whoami</span>   显示当前用户</span><br><span class="line"></span><br><span class="line"><span class="built_in">who</span>       显示当前登陆的用户信息</span><br><span class="line"></span><br><span class="line">w          显示登陆用户的详细信息</span><br></pre></td></tr></tbody></table></figure>

<p>命令usermod修改一个用户的信息：</p>
<p>usermod 参数　用户名<br>-l 　修改用户名<br>-u   修改uid<br>-g   修改用户主组<br>-G   修改用户附属组<br>-L   锁定用户<br>-U  解锁用户</p>
<p>命令userdel用户删除一个用户：</p>
<p>userdel　用户名<br>userdel -l 用户名　删除用户的同时删除该用户家目录</p>
<p>命令groupadd、groupmod用以创建、修改一个组：<br>groupadd 组名</p>
<p>groupmod -n 新组名　旧组名<br>groupmod -g 新组ID　旧组ID</p>
<p>例如：</p>
<h2 id="userdel-r-sam"><a href="#userdel-r-sam" class="headerlink" title="userdel -r sam"></a>userdel -r sam</h2><p>此命令删除用户sam在系统文件（主要是/etc/passwd，/etc/shadow，/etc/group等）中的记录，同时删除用户的主目录。</p>
<p>删除一个组</p>
<p>同样的，我们有时会需要删除一个组，命令groupde用以删除一个组</p>
<h2 id="Linux文件特殊权限：SUID、SGID和SBIT"><a href="#Linux文件特殊权限：SUID、SGID和SBIT" class="headerlink" title="Linux文件特殊权限：SUID、SGID和SBIT"></a>Linux文件特殊权限：SUID、SGID和SBIT</h2><h3 id="SUID"><a href="#SUID" class="headerlink" title="SUID"></a>SUID</h3><p>当s这个标志出现在 <strong>文件所有者的x权限上</strong>时，例如文件权限状态“-rwsr-xr-x”，此时就称为 Set UID，简称为SUID的特殊权限。SUID有这样的限制和功能：</p>
<p>（1）SUID权限仅对 <strong>二进制程序</strong>有效；</p>
<p>（2）执行者对于该程序需要 <strong>具有x的可执行权限</strong>；</p>
<p>（3）本权限仅在 <strong>执行该程序的过程中</strong>有效；</p>
<p>（4）执行者将具有该程序所有者的权限。</p>
<p>举个例子，在Linux中，所有账号的密码记录在/etc/shadow这个文件中，并且只有root可以读和强制写入这个文件。那么，如果另一个账号vbird需要修改自己的密码，就需要访问/etc/shadow这个文件，但是上面明明说了只有root能访问/etc/shadow这个文件，是不是矛盾？但事实上，vbird是可以修改/etc/shadow这个文件内的密码的，这就是SUID的功能。</p>
<p>通过上述的功能说明，我们知道，</p>
<p>（1）vbird对于/usr/bin/passwd这个程序具有x权限，表明vbird可以执行passwd；</p>
<p>（2）passwd的所有者为root；</p>
<p>（3）vbird执行passwd的过程中会暂时获得root的权限；</p>
<p>（4）/etc/shadow因此可以被vbird所执行的passwd所修改。</p>
<p> 但是vbird如果使用cat去读取/etc/shadow这个文件时，是不能读取的。</p>
<p><img src="https://img-blog.csdn.net/20160421110042664" alt="img"> </p>
<p>（SUID只能用在文件上，不能用在目录）</p>
<h3 id="SGID"><a href="#SGID" class="headerlink" title="SGID"></a>SGID</h3><p>当s标志出现在文件所有者的x权限时称为SUID，那么s出现在用户组的x权限时称为SGID。（U表示user，G表示group）。SGID有如下功能：</p>
<p>（1）SGID对二进制程序有用；</p>
<p>（2）程序执行者对该程序需具备x权限；</p>
<p>（3）执行者在执行过程中会获得该程序用户组的支持。</p>
<p>举个例子，/usr/bin/locate这个程序可以去查询/var/lib/mlocate/mlocate.db这个文件的内容，mlocate.db的权限如下：</p>
<p>-rwx–s–x root  slocate /usr/bin/locate</p>
<p>-rw-r—–  root slocate /var/lib/mlocate/mlocate.db</p>
<p>若使用vbird这个账号执行locate时，vbird就会获得用户组slocate支持，又由于用户组slocate对mlocate.db具有r权限，所以vbird就可以读取mlocate.db了。</p>
<p><img src="https://img-blog.csdn.net/20160421112520173" alt="img"> </p>
<p>除二进制程序外，SGID也可以用目录上。当一个目录设置了SGID权限后，它具有如下功能：</p>
<p>（1）用户若对此目录具有r和x权限，该用户能够进入该目录；</p>
<p>（2）用户在此目录下的有效用户组将变成该目录的用户组；</p>
<p>（3）若用户在此目录下拥有w权限，则用户所创建的新文件的用户组与该目录的用户组相同。</p>
<h3 id="SBIT"><a href="#SBIT" class="headerlink" title="SBIT"></a>SBIT</h3><p>SBIT目前只对目录有效。</p>
<p>SBIT对目录的作用是：</p>
<p>（1）当用户对此目录具有w和x权限时，即具有写入权限时；</p>
<p>（2）当用户在该目录下创建新文件或目录时，仅有自己和root才有权力删除。</p>
<h3 id="SUID-SGID-SBIT权限设置"><a href="#SUID-SGID-SBIT权限设置" class="headerlink" title="SUID\SGID\SBIT权限设置"></a>SUID\SGID\SBIT权限设置</h3><p>先将其转换成数字：</p>
<p>SUID-&gt;4</p>
<p>SGID-&gt;2</p>
<p>SBIT-&gt;1</p>
<p>假设要将一个文件权限修改为“-rwsr-xr-x”，由于s在用户权限中，所以是SUID，因此，原先的755前面还要加上4，也就是4755，所以，</p>
<p>用命令chmod 4755 filename 设置就可以了。此外，还可能出现S和T的情况。</p>
<p>我们知道，s和t是替代x这个权限的，但是，如果它本身没有x这个权限，修改为s或t时就会变成大S或大T，例如：</p>
<p>执行chmod 7666 filename。 因为666表示“-rw-rw-rw”，均没有x权限，所以最后变成“-rwSrwSrwT”。</p>
<h2 id="Linux中的特殊权限粘滞位-sticky-bit-详解"><a href="#Linux中的特殊权限粘滞位-sticky-bit-详解" class="headerlink" title="Linux中的特殊权限粘滞位(sticky bit)详解"></a>Linux中的特殊权限粘滞位(sticky bit)详解</h2><p>在linux下每一个文件和目录都有自己的访问权限，访问权限确定了用户能否访问文件或者目录和怎样进行访问。最为我们熟知的一个文件或目录可能拥有三种权限，分别是读、写、和执行操作。我们创建一个文件后系统会默认地赋予所有者读和写权限。当然我们也可以自己修改它，添加自己需要的权限。 </p>
<p>除了通用的这些权限，我们来说说在linux下的另一个特殊权限。首先我们来看看在根目录下的一个目录tmp，可以看到tmp目录的other权限是<code>rwt</code>，那么这里的t又是什么权限呢，有什么意义。 </p>
<p>t就是粘滞位（粘着位） </p>
<p>上面所说的t权限就是我们在这里要讲的粘滞位(sticky bit),我们给刚刚的cur目录采用chmod o+t的方式给other用户设置粘滞位。 </p>
<p>可以看到此时我们是没有权限删除root用户创建的文件了，这也就是粘滞位的作用。 </p>
<p>粘滞位权限便是针对此种情况设置，当⽬录被设置了粘滞位权限以后，即便⽤户对该⽬录有写⼊权限，也不能删除该⽬录中其他⽤户的⽂件数据，⽽是只有该⽂件的所有者和root⽤户才有权将其删除。设置了粘滞位之后，正好可以保持⼀种动态的平衡：允许各⽤户在⽬录中任意写⼊、删除数据，但是禁⽌随意删除其他⽤户的数据。 </p>
<p>如果去掉了other的执行权限，可以看到本来’t’的位置变成了’T’，，那么原来的执行标志x到哪里去了呢? 系统是这样规定的, 假如本来在该位上有x, 则这些特别标志 (suid, sgid, sticky) 显示为小写字母 (s, s, t).否则, 显示为大写字母 (S, S, T) 。  </p>
<blockquote>
<p> 粘滞位权限是针对目录的，对文件无效 </p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/05/06/linux-centos7-install-gitlab-ce/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/06/linux-centos7-install-gitlab-ce/" class="post-title-link" itemprop="url">CentOS7安装gitlab-ce</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-06 18:11:00" itemprop="dateCreated datePublished" datetime="2017-05-06T18:11:00+08:00">2017-05-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/CentOS/" itemprop="url" rel="index"><span itemprop="name">CentOS</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/CentOS/GitLab/" itemprop="url" rel="index"><span itemprop="name">GitLab</span></a>
                </span>
            </span>

          
            <span id="/2017/05/06/linux-centos7-install-gitlab-ce/" class="post-meta-item leancloud_visitors" data-flag-title="CentOS7安装gitlab-ce" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/05/06/linux-centos7-install-gitlab-ce/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/05/06/linux-centos7-install-gitlab-ce/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/05/06/linux-centos7-install-gitlab-ce/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/05/06/linux-centos7-install-gitlab-ce/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="CentOS7安装gitlab-ce"><a href="#CentOS7安装gitlab-ce" class="headerlink" title="CentOS7安装gitlab-ce"></a>CentOS7安装gitlab-ce</h1><h2 id="安装配置相关依赖"><a href="#安装配置相关依赖" class="headerlink" title="安装配置相关依赖"></a>安装配置相关依赖</h2><p>在系统防火墙中打开HTTP和SSH。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum install curl policycoreutils openssh-server openssh-clients -y</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> sshd</span><br><span class="line"><span class="built_in">sudo</span> systemctl start sshd</span><br><span class="line"><span class="built_in">sudo</span> yum install postfix</span><br><span class="line"><span class="built_in">sudo</span> systemctl <span class="built_in">enable</span> postfix</span><br><span class="line"><span class="built_in">sudo</span> systemctl start postfix</span><br><span class="line"><span class="built_in">sudo</span> firewall-cmd --permanent --add-service=http</span><br><span class="line"><span class="built_in">sudo</span> systemctl reload firewalld</span><br></pre></td></tr></tbody></table></figure>

<h2 id="添加GitLab包服务器并安装"><a href="#添加GitLab包服务器并安装" class="headerlink" title="添加GitLab包服务器并安装"></a>添加GitLab包服务器并安装</h2><figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sS https://packages.gitlab.<span class="keyword">com</span>/install/repositories/gitlab/gitlab-<span class="keyword">ce</span>/script.rpm.<span class="keyword">sh</span> | sudo bash</span><br><span class="line">sudo yum install gitlab-<span class="keyword">ce</span> -<span class="keyword">y</span></span><br></pre></td></tr></tbody></table></figure>

<p>也可以下载软件包然后安装</p>
<figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -LJO https://packages.gitlab.<span class="keyword">com</span>/gitlab/gitlab-<span class="keyword">ce</span>/packages/<span class="keyword">el</span>/<span class="number">7</span>/gitlab-<span class="keyword">ce</span>-XXX.rpm/download</span><br><span class="line">rpm -i gitlab-<span class="keyword">ce</span>-XXX.rpm</span><br></pre></td></tr></tbody></table></figure>

<h2 id="清华镜像"><a href="#清华镜像" class="headerlink" title="清华镜像"></a>清华镜像</h2><p>如果这版本不能下载，可以考虑清华版本，</p>
<p>新建/etc/yum.repos.d/gitlab-ce.repo</p>
<figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[gitlab-ce]</span></span><br><span class="line"><span class="attr">name</span>=Gitlab CE Repository</span><br><span class="line"><span class="attr">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el<span class="variable">$releasever</span>/</span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> yum makecache</span><br><span class="line"><span class="built_in">sudo</span> yum install gitlab-ce</span><br></pre></td></tr></tbody></table></figure>

<h2 id="配置并启动GitLab"><a href="#配置并启动GitLab" class="headerlink" title="配置并启动GitLab"></a>配置并启动GitLab</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> gitlab-ctl reconfigure</span><br></pre></td></tr></tbody></table></figure>

<h2 id="浏览并登陆"><a href="#浏览并登陆" class="headerlink" title="浏览并登陆"></a>浏览并登陆</h2><p>此时就可以设置用户名和密码了。</p>
<p>Enjoy!!!</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/05/02/cpp-beginner-ide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/05/02/cpp-beginner-ide/" class="post-title-link" itemprop="url">C++语言 网上流传的最好的10个用于开发C/C++的IDE环境。</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-05-02 22:28:20" itemprop="dateCreated datePublished" datetime="2017-05-02T22:28:20+08:00">2017-05-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index"><span itemprop="name">C++</span></a>
                </span>
            </span>

          
            <span id="/2017/05/02/cpp-beginner-ide/" class="post-meta-item leancloud_visitors" data-flag-title="C++语言 网上流传的最好的10个用于开发C/C++的IDE环境。" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/05/02/cpp-beginner-ide/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/05/02/cpp-beginner-ide/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/05/02/cpp-beginner-ide/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/05/02/cpp-beginner-ide/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="IDE开发环境"><a href="#IDE开发环境" class="headerlink" title="IDE开发环境"></a>IDE开发环境</h1><p>网上流传的最好的10个用于开发C/C++的IDE环境。</p>
<p><img src="/2017/05/02/cpp-beginner-ide/images/Top-10-IDEs-For-C_CPP.png" alt="IDE"></p>
<table>
<thead>
<tr>
<th>IDE</th>
<th>Windows</th>
<th>Linux</th>
<th>MacOSX</th>
<th>Free</th>
</tr>
</thead>
<tbody><tr>
<td>eclipse</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>Code::Blocks</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>GNAT</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>CodeLite</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>NetBeans</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>Qt Creator</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td>Dev C++</td>
<td>√</td>
<td></td>
<td></td>
<td>√</td>
</tr>
<tr>
<td>C++ Builder</td>
<td>√</td>
<td></td>
<td>√</td>
<td></td>
</tr>
<tr>
<td>Anjuta</td>
<td></td>
<td>√</td>
<td></td>
<td>√</td>
</tr>
<tr>
<td>MonoDevelop</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/04/12/linux-tty-beginner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/12/linux-tty-beginner/" class="post-title-link" itemprop="url">终端链接 tty</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-12 22:11:00" itemprop="dateCreated datePublished" datetime="2017-04-12T22:11:00+08:00">2017-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span id="/2017/04/12/linux-tty-beginner/" class="post-meta-item leancloud_visitors" data-flag-title="终端链接 tty" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/04/12/linux-tty-beginner/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/12/linux-tty-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/04/12/linux-tty-beginner/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/04/12/linux-tty-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="终端链接-tty"><a href="#终端链接-tty" class="headerlink" title="终端链接 tty"></a>终端链接 tty</h1><p><strong>Linux</strong> <code>tty</code>命令用于显示终端机连接标准输入设备的文件名称。</p>
<p>在<strong>Linux</strong>操作系统中，所有外围设备都有其名称与代号，这些名称代号以特殊文件的类型存放于/dev目录下。</p>
<p>比如<strong>ttyN</strong>就是今天说的设备，而<strong>sddN</strong>等就是硬盘设备。</p>
<p>你可以执行<code>tty</code>(<strong>teletypewriter</strong>)指令查询目前使用的终端机的文件名称。</p>
<p>官方定义为：</p>
<blockquote>
<p>tty - print the file name of the terminal connected to standard input</p>
</blockquote>
<p>使用方法比较简单：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">tty</span> [-s][--<span class="built_in">help</span>][--version]</span><br></pre></td></tr></tbody></table></figure>

<p>对于-s选项就是–silent，–quiet，即屏蔽掉输出，仅仅显示一个退出状态。</p>
<h2 id="默认使用"><a href="#默认使用" class="headerlink" title="默认使用"></a>默认使用</h2><p>默认情况下显示当前终端</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">tty</span></span><br><span class="line">/dev/pts/4</span><br></pre></td></tr></tbody></table></figure>



<h2 id="查询谁在以及在那个tty"><a href="#查询谁在以及在那个tty" class="headerlink" title="查询谁在以及在那个tty"></a>查询谁在以及在那个tty</h2><p>在<strong>Linux</strong>里面输入<code>who</code>可以看到目前登陆的用户，而输出信息包括用户名，<strong>tty</strong>终端，及登陆的时间信息等等。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">who</span></span><br><span class="line">user1      pts/4        2017-04-21 19:58 (xxx.xxx.xxx.xxx)</span><br><span class="line">user1      pts/5        2017-04-07 13:41 (:99)</span><br><span class="line">user1      pts/0        2017-04-08 16:31 (:99)</span><br><span class="line">user1      pts/1        2017-04-08 17:12 (:99)</span><br><span class="line">user1      :0           2017-04-15 15:05 (:0)</span><br><span class="line">user1      pts/2        2017-04-15 15:38 (:0)</span><br><span class="line">user2  	   pts/3        2017-04-16 08:53 (:3)</span><br><span class="line">user2      pts/6        2017-04-16 11:01 (:3)</span><br><span class="line">user2      pts/7        2017-04-16 16:49 (:3)</span><br><span class="line">user3      pts/8        2017-04-21 20:05 (xxx.xxx.xxx.xxx)</span><br><span class="line">user3      pts/9        2017-04-21 20:07 (xxx.xxx.xxx.xxx)</span><br></pre></td></tr></tbody></table></figure>



<p>而如前面所说，对于<code>write</code>命令其中有一个参数就是指定<strong>ttyN</strong>的信息。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/04/07/linux-bc-beginner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/07/linux-bc-beginner/" class="post-title-link" itemprop="url">迷你计算器 bc</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-04-07 22:11:00" itemprop="dateCreated datePublished" datetime="2017-04-07T22:11:00+08:00">2017-04-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">Linux入门</span></a>
                </span>
            </span>

          
            <span id="/2017/04/07/linux-bc-beginner/" class="post-meta-item leancloud_visitors" data-flag-title="迷你计算器 bc" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/04/07/linux-bc-beginner/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/07/linux-bc-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/04/07/linux-bc-beginner/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/04/07/linux-bc-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="迷你计算器-bc"><a href="#迷你计算器-bc" class="headerlink" title="迷你计算器 bc"></a>迷你计算器 bc</h1><p>.. _linux_bc_beginner:</p>
<p>.. note::<br>  北斗南辰日夜移，飞走鸟和兔。<br>  元·王哲《卜算子·叹世迷》 </p>
<p>Linux <code>bc</code>命令是一种支持任意精度的交互执行的命令。</p>
<p><code>bc</code>也是一种支持交互式执行语句的任意精度数的语言。与C语言有一些相似之处。 标准数学库也可以由  通过命令行选项使用。</p>
<p>官方定义为：</p>
<blockquote>
<p><code>bc</code> - An arbitrary precision calculator language</p>
</blockquote>
<p>使用方法为：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ bc [ -hlwsqv ] [long-options] [  file ... ]</span><br></pre></td></tr></tbody></table></figure>



<h2 id="默认实例"><a href="#默认实例" class="headerlink" title="默认实例"></a>默认实例</h2><p>默认进入交互环境，直接可以执行计算</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ bc</span><br><span class="line">bc 1.07.1</span><br><span class="line">Copyright 1991-1994, 1997, 1998, 2000, 2004, 2006, 2008, 2012-2017 Free Software Foundation, Inc.</span><br><span class="line">This is free software with ABSOLUTELY NO WARRANTY.</span><br><span class="line">For details <span class="built_in">type</span> `warranty<span class="string">'.</span></span><br><span class="line"><span class="string">12*3</span></span><br><span class="line"><span class="string">36</span></span><br></pre></td></tr></tbody></table></figure>

<p>输入<code>quit</code>即可退出。</p>
<h2 id="通过管道使用"><a href="#通过管道使用" class="headerlink" title="通过管道使用"></a>通过管道使用</h2><p>简单的情况可以使用管道来实现，如下：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"3.1415926 * 3"</span> | bc</span><br><span class="line">9.4247778</span><br></pre></td></tr></tbody></table></figure>



<h2 id="高级一点"><a href="#高级一点" class="headerlink" title="高级一点"></a>高级一点</h2><p>可以通过<code>scale</code>来指定一些精度信息，如下可以保留3为有效精度</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"scale=3; 2/3"</span> | bc</span><br><span class="line">.666</span><br></pre></td></tr></tbody></table></figure>



<p>另外还可以使用一些数学函数，比如：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"sqrt(36)"</span> | bc</span><br><span class="line">6</span><br></pre></td></tr></tbody></table></figure>



<p>还可以方便地使用<code>ibase</code>进行进制的转换，下面分别是输入为111，对应在2、4、8进制下的输出。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">'ibase=2;111'</span> | bc </span><br><span class="line">7</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'ibase=4;111'</span> | bc</span><br><span class="line">21</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'ibase=8;111'</span> | bc</span><br><span class="line">73</span><br></pre></td></tr></tbody></table></figure>



<p>当然也可以通过<code>obase</code>来指定输入进制，如下将输入的8进制的111，分别转换为2、4、8进制。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">'ibase=8;obase=2;111'</span> | bc</span><br><span class="line">1001001</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'ibase=8;obase=4;111'</span> | bc</span><br><span class="line">1021</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">'ibase=8;obase=8;111'</span> | bc</span><br><span class="line">111</span><br></pre></td></tr></tbody></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/24/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><span class="page-number current">25</span><a class="page-number" href="/page/26/">26</a><span class="space">&hellip;</span><a class="page-number" href="/page/100/">100</a><a class="extend next" rel="next" href="/page/26/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">郭大侠</p>
  <div class="site-description" itemprop="description">郭大侠的博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">998</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">181</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1450</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://macshuo.com/" title="http:&#x2F;&#x2F;macshuo.com&#x2F;" rel="noopener" target="_blank">MacTalk</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://huhuidong.wordpress.com/" title="https:&#x2F;&#x2F;huhuidong.wordpress.com&#x2F;" rel="noopener" target="_blank">小胡</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2007 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郭大侠</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"vIjrLnlboDVaaseO2yYcVSQF-gzGzoHsz","app_key":"NTHrGJp71GzEGvNUEUFumVcR","server_url":null,"security":true};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://shaoguangleo.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'vIjrLnlboDVaaseO2yYcVSQF-gzGzoHsz',
      appKey     : 'NTHrGJp71GzEGvNUEUFumVcR',
      placeholder: "路过，即是缘分...",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
