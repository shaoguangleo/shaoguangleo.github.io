<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"shaoguangleo.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="郭大侠的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="浩瀚宇宙 灿烂星空">
<meta property="og:url" content="http://shaoguangleo.github.io/page/65/index.html">
<meta property="og:site_name" content="浩瀚宇宙 灿烂星空">
<meta property="og:description" content="郭大侠的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="郭大侠">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://shaoguangleo.github.io/page/65/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>浩瀚宇宙 灿烂星空</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=a8cfacb0a536bd846d2fd545cedb4d61"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'a8cfacb0a536bd846d2fd545cedb4d61');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a8cfacb0a536bd846d2fd545cedb4d61";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="浩瀚宇宙 灿烂星空" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">浩瀚宇宙 灿烂星空</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">工作和生活中的七七八八</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2012/05/06/linux-touch-beginner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/05/06/linux-touch-beginner/" class="post-title-link" itemprop="url">Linux的touch命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-05-06 22:11:00" itemprop="dateCreated datePublished" datetime="2012-05-06T22:11:00+08:00">2012-05-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/Linux%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">Linux入门</span></a>
                </span>
            </span>

          
            <span id="/2012/05/06/linux-touch-beginner/" class="post-meta-item leancloud_visitors" data-flag-title="Linux的touch命令" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2012/05/06/linux-touch-beginner/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/05/06/linux-touch-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2012/05/06/linux-touch-beginner/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2012/05/06/linux-touch-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="创建、修改、更新文件的touch"><a href="#创建、修改、更新文件的touch" class="headerlink" title="创建、修改、更新文件的touch"></a>创建、修改、更新文件的touch</h1><p><code>linux</code>的<code>touch</code>命令不常用，一般用来修改文件时间戳(可更改文件或目录的日期时间，包括存取时间和更改时间)或者新建一个不存在的文件。</p>
<h2 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">touch</span> [选项]... 文件...</span><br></pre></td></tr></tbody></table></figure>



<p>其中选项如下所示：</p>
<ul>
<li><code>-a</code>   只更改存取时间。</li>
<li><code>-c</code>   或–no-create 　不建立任何文档。</li>
<li><code>-d</code> 　使用指定的日期时间，而非现在的时间。</li>
<li><code>-m</code>  只更改变动时间。</li>
<li><code>-r</code> 　把指定文件或目录的日期时间，统统设成和参考文件或目录的日期时间相同。</li>
<li><code>-t</code> 　使用指定的日期时间，而非现在的时间。</li>
</ul>
<h2 id="创建不存在的文件"><a href="#创建不存在的文件" class="headerlink" title="创建不存在的文件"></a>创建不存在的文件</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">touch</span> a.txt b.txt</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">a.txt b.txt</span><br></pre></td></tr></tbody></table></figure>

<h2 id="更新b-txt-的时间和-a-txt-时间戳相同"><a href="#更新b-txt-的时间和-a-txt-时间戳相同" class="headerlink" title="更新b.txt 的时间和 a.txt 时间戳相同"></a>更新b.txt 的时间和 a.txt 时间戳相同</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将文件b.txt的时间戳与a.txt保持一致</span></span><br><span class="line">$ <span class="built_in">touch</span> -r a.txt b.txt</span><br></pre></td></tr></tbody></table></figure>

<h2 id="设定文件的时间戳"><a href="#设定文件的时间戳" class="headerlink" title="设定文件的时间戳"></a>设定文件的时间戳</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设定filename的时间戳为2012年05月06日13时14分15秒</span></span><br><span class="line">$ <span class="built_in">touch</span> -t 201205061314.15 filename</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ls</span> -l</span><br><span class="line">-rw-rw-r--. 1 user user 0 May  6  2012 filename</span><br></pre></td></tr></tbody></table></figure>

<p>其中<code>-t  time</code> 使用指定的时间值 <code>time</code> 作为指定文件相应时间戳记的新值．此处的 <code>time</code>的形式如下为： <code>[[CC]YY]MMDDhhmm[.SS]</code>     </p>
<p>其中秒及年可以省略。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2012/05/06/linux-touch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/05/06/linux-touch/" class="post-title-link" itemprop="url">Linux的touch命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-05-06 22:11:00" itemprop="dateCreated datePublished" datetime="2012-05-06T22:11:00+08:00">2012-05-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/Linux%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">Linux入门</span></a>
                </span>
            </span>

          
            <span id="/2012/05/06/linux-touch/" class="post-meta-item leancloud_visitors" data-flag-title="Linux的touch命令" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2012/05/06/linux-touch/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/05/06/linux-touch/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2012/05/06/linux-touch/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2012/05/06/linux-touch/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="创建、修改、更新文件的touch"><a href="#创建、修改、更新文件的touch" class="headerlink" title="创建、修改、更新文件的touch"></a>创建、修改、更新文件的touch</h1><p><code>linux</code>的<code>touch</code>命令不常用，一般用来修改文件时间戳(可更改文件或目录的日期时间，包括存取时间和更改时间)或者新建一个不存在的文件。</p>
<h2 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">touch</span> [选项]... 文件...</span><br></pre></td></tr></tbody></table></figure>



<p>其中选项如下所示：</p>
<ul>
<li><code>-a</code>   只更改存取时间。</li>
<li><code>-c</code>   或–no-create 　不建立任何文档。</li>
<li><code>-d</code> 　使用指定的日期时间，而非现在的时间。</li>
<li><code>-m</code>  只更改变动时间。</li>
<li><code>-r</code> 　把指定文件或目录的日期时间，统统设成和参考文件或目录的日期时间相同。</li>
<li><code>-t</code> 　使用指定的日期时间，而非现在的时间。</li>
</ul>
<h2 id="创建不存在的文件"><a href="#创建不存在的文件" class="headerlink" title="创建不存在的文件"></a>创建不存在的文件</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">touch</span> a.txt b.txt</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ls</span></span><br><span class="line">a.txt b.txt</span><br></pre></td></tr></tbody></table></figure>

<h2 id="更新b-txt-的时间和-a-txt-时间戳相同"><a href="#更新b-txt-的时间和-a-txt-时间戳相同" class="headerlink" title="更新b.txt 的时间和 a.txt 时间戳相同"></a>更新b.txt 的时间和 a.txt 时间戳相同</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将文件b.txt的时间戳与a.txt保持一致</span></span><br><span class="line">$ <span class="built_in">touch</span> -r a.txt b.txt</span><br></pre></td></tr></tbody></table></figure>

<h2 id="设定文件的时间戳"><a href="#设定文件的时间戳" class="headerlink" title="设定文件的时间戳"></a>设定文件的时间戳</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设定filename的时间戳为2012年05月06日13时14分15秒</span></span><br><span class="line">$ <span class="built_in">touch</span> -t 201205061314.15 filename</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">ls</span> -l</span><br><span class="line">-rw-rw-r--. 1 user user 0 May  6  2012 filename</span><br></pre></td></tr></tbody></table></figure>

<p>其中<code>-t  time</code> 使用指定的时间值 <code>time</code> 作为指定文件相应时间戳记的新值．此处的 <code>time</code>的形式如下为： <code>[[CC]YY]MMDDhhmm[.SS]</code>     </p>
<p>其中秒及年可以省略。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2012/04/19/linux-debug-other-tools/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/04/19/linux-debug-other-tools/" class="post-title-link" itemprop="url">Linux 调试编译其他工具</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-04-19 21:30:00" itemprop="dateCreated datePublished" datetime="2012-04-19T21:30:00+08:00">2012-04-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span id="/2012/04/19/linux-debug-other-tools/" class="post-meta-item leancloud_visitors" data-flag-title="Linux 调试编译其他工具" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2012/04/19/linux-debug-other-tools/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/04/19/linux-debug-other-tools/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2012/04/19/linux-debug-other-tools/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2012/04/19/linux-debug-other-tools/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="其他工具"><a href="#其他工具" class="headerlink" title="其他工具"></a>其他工具</h1><p>精通调试代码并不是说学会使用GDB这样的调试器就行了—这只是开端。</p>
<p>为了增强调试技能，初学者程序员最好学会其中的集中调试工具，了解那种工具适合于调试那种程序错误，并识别发生程序错误时使用其中那个工具可以节省时间和精力。</p>
<h2 id="充分利用文本编辑器"><a href="#充分利用文本编辑器" class="headerlink" title="充分利用文本编辑器"></a>充分利用文本编辑器</h2><p>最好的调试方法是一开始就不要有编程错误，而简单地充分利用一种支持编程的编辑器就可以达到这个效果。因为：</p>
<ul>
<li>精通强大的编辑器可以缩短编写代码所需的时间，具有自动缩排、单词补充和全文代码查询等特殊功能的编辑器对程序员是非常有利的；</li>
<li>优秀的编辑器确实可以帮到编码者在编写代码时捕获某些类型的程序错误。</li>
</ul>
<blockquote>
<p>Mark：Makefile中可以使用patsubst关键字来进行文本查找和替换命令。</p>
</blockquote>
<p>从vim中调用make非常方便，不需要退出编辑器，直接:make 即可，同时vim可以捕获编译器发出的所有消息，编辑器理解GCC输出内容的语法，知道何时发生编辑器警告或错误。发生错误时可以直接定位到第一个错误，然后使用:cnext或者:cprevious来显示下一个或上一个错误或者警告。</p>
<blockquote>
<p>在Vim中可以使用K来查询man页面中的函数。</p>
</blockquote>
<h2 id="充分利用编译器"><a href="#充分利用编译器" class="headerlink" title="充分利用编译器"></a>充分利用编译器</h2><p>如果说编辑器是对抗程序错误的第一个武器，那么编译器就是第二个武器了，所有编译器都有能力扫描代码并查找常见错误，但是通常必须通过调用适当的选项来启用这种错误检查。</p>
<p>对于GCC而言，如果不适用-Wall，就几乎没有必要使用GCC了，所以任何编译最好都加上-Wall选项。</p>
<h2 id="C语言中的错误报告"><a href="#C语言中的错误报告" class="headerlink" title="C语言中的错误报告"></a>C语言中的错误报告</h2><p>C语言中的错误报告是使用名为errno的老式机制完成的。系统与库调用的失败通常是由于设置了名为errno的全局定义整数变量，在大多数GNU/Linux系统上，error是在/usr/include/errno.h上声明的，因此，只要包含了这个头文件，就不必在源代码中声明extern int errno了。</p>
<p>当一个系统或库调用失败时，它将errno设置为一个指示失败类型的值。检查errno的值，并采取适当的动作可以判断错误类型。比如可以使用函数perror或者strerror。</p>
<p>errno可以通过任何库函数或系统调用设置，无论它是成功还是失败。因为即便成功的函数调用能够设置errno，让人不能依赖errno告诉你是否发生了错误。因此使用errno最安全的方式为：</p>
<ul>
<li>执行对库或者系统函数的调用；</li>
<li>使用函数的返回值判断时候发生了某个错误；</li>
<li>如果发生了某个错误，使用errno确定为什么发生这个错误。</li>
</ul>
<h2 id="库函数和系统调用的区别"><a href="#库函数和系统调用的区别" class="headerlink" title="库函数和系统调用的区别"></a>库函数和系统调用的区别</h2><p>库函数是更高级别的，完全在用户空间里运行，并未程序员提供了更方便的做实际工作的函数接口。</p>
<p>系统调用代表用户以内核模式工作，由操作系统本身的内核提供。</p>
<p>库函数printf看上去类似于一般输出函数，但是它实际上只是格式化你提供给字符串的数据，并用低级系统调用write编写字符串数据，然后将数据发送到一个与终端的标准输出关联的文件中。</p>
<h2 id="更好地使用strace和ltrace"><a href="#更好地使用strace和ltrace" class="headerlink" title="更好地使用strace和ltrace"></a>更好地使用strace和ltrace</h2><p>strace跟踪系统调用而ltrace跟踪库调用，这两个使用程序，有时比深度调试代码还快。</p>
<h2 id="静态代码检查器：lint与其衍生"><a href="#静态代码检查器：lint与其衍生" class="headerlink" title="静态代码检查器：lint与其衍生"></a>静态代码检查器：lint与其衍生</h2><p>静态代码检查器：扫描代码的工具，不编译代码，仅仅警告错误、可能的错误和与严格C语言编码标准的差距。</p>
<p>衍生版本为splint：该软件的目标是帮助编写大部分有防御性、安全和尽可能少出错的程序，当然，改程序对组成有效代码的内容非常挑剔。</p>
<p>很多程序员将splint没有报告警告看做一种极大的荣誉。当出现这种情况是，代码被声明为无lint的。</p>
<h2 id="调试动态分配的内存"><a href="#调试动态分配的内存" class="headerlink" title="调试动态分配的内存"></a>调试动态分配的内存</h2><p>动态分配的内存（Dynamically Allocated Memory, DAM）是程序用malloc和calloc这样的函数从堆中请求的内存。</p>
<p>查找DAM问题分麻烦，分为以下几类：</p>
<ul>
<li>没有释放动态分配的内存；—内存泄漏</li>
<li>对malloc的调用失败；</li>
<li>想DAM段之外的地址执行读写操作；—访问错误</li>
<li>释放DAM段之后对DAM区域中的内存进行读写操作；—访问错误</li>
<li>对动态内存的同一段调用两次free。—重复释放double free</li>
</ul>
<h2 id="Electric-Fence"><a href="#Electric-Fence" class="headerlink" title="Electric Fence"></a>Electric Fence</h2><p>Bruce Perens在1988年写的，当EFence链接到代码中时，导致程序在发生下列情况之一时立即发生段错误并转出核心：</p>
<ul>
<li>在DAM边界之外执行读写操作；</li>
<li>对已经释放的DAM执行读写操作；</li>
<li>对没有指向malloc分配的DAM的指针执行free，包括重复释放的特殊情况。</li>
</ul>
<p>比如，</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gcc –g3 –Wall –std=c99 test.c –o test_with_efence outOfBound_with_efence  –lefence</span><br></pre></td></tr></tbody></table></figure>

<p>and</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gcc –g3 –Wall –std=c99 test.c –o test_with_efence outOfBound_without_efence  -lefence</span><br></pre></td></tr></tbody></table></figure>

<p>可以对一个内存泄露但是没有编译失败的程序做测试。</p>
<h2 id="用GNU-C库工具调试DAM问题"><a href="#用GNU-C库工具调试DAM问题" class="headerlink" title="用GNU C库工具调试DAM问题"></a>用GNU C库工具调试DAM问题</h2><ul>
<li>在调用任何与堆有关的函数钱调用函数mcheck；</li>
<li>使用mtrace函数捕获内存泄露和重复释放；</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2012/04/16/linux-debug-crash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/04/16/linux-debug-crash/" class="post-title-link" itemprop="url">Linux debug 程序崩溃处理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-04-16 22:11:00" itemprop="dateCreated datePublished" datetime="2012-04-16T22:11:00+08:00">2012-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/GDB/" itemprop="url" rel="index"><span itemprop="name">GDB</span></a>
                </span>
            </span>

          
            <span id="/2012/04/16/linux-debug-crash/" class="post-meta-item leancloud_visitors" data-flag-title="Linux debug 程序崩溃处理" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2012/04/16/linux-debug-crash/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/04/16/linux-debug-crash/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2012/04/16/linux-debug-crash/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2012/04/16/linux-debug-crash/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="程序崩溃处理"><a href="#程序崩溃处理" class="headerlink" title="程序崩溃处理"></a>程序崩溃处理</h1><p>有人说C语言是低级语言，这有一部分原因是因为应用程序的内存管理大部分需要由程序员来实现。虽然这种方法非常有用，但是也给程序员添加了很多的麻烦。</p>
<p>也有人说，C语言是相对较小且容易学习的语言，然而，只有不考虑标准C语言库的典型实现时，C语言才比较小，这个库相当庞大，很多程序员认为C语言是易用语言，那是因为他们还没有遇到指针。</p>
<p>一般而言，程序错误会导致下面两件事情的发生：</p>
<ul>
<li>导致程序做一些程序员没有打算做的事情；</li>
<li>导致程序崩溃</li>
</ul>
<p>相信很多调试过程序的兄弟都碰到过段错误即<code>segmentation fault</code>，则合格主要原因是试图在未经允许的情况下访问一个内存单元。硬件会感知这件事并执行对操作系统的跳转。</p>
<h2 id="堆区域"><a href="#堆区域" class="headerlink" title="堆区域"></a>堆区域</h2><p>调用malloc函数分配的内存；</p>
<h2 id="栈区域"><a href="#栈区域" class="headerlink" title="栈区域"></a>栈区域</h2><p>用来动态分配数据的空间，函数调用的数据（包括参数、局部变量和返回地址）都存储在栈上。</p>
<h2 id="查看程序在Linux上的精确内存布局情况"><a href="#查看程序在Linux上的精确内存布局情况" class="headerlink" title="查看程序在Linux上的精确内存布局情况"></a>查看程序在Linux上的精确内存布局情况</h2><p>可以通过使用info proc mappings来详细查看该程序在Linux上的精确内存布局情况，例如：</p>
<p>此时我们还可以看到这个进程号为14455，所以我们还可以通过文件/proc/14455/maps来查看该信息。通过这些信息，我们有可能看到文本和数据区域，以及堆和栈。</p>
<h2 id="分配页策略"><a href="#分配页策略" class="headerlink" title="分配页策略"></a>分配页策略</h2><p>操作系统不会将不完整的页分配给程序，例如，如果要运行的程序总共大约有10000字节，如果完全加载，会占用3个内存页（一个页占4096个字节），它不会仅占用2.5个页，因为页是虚拟内存系统能够操作的最小内存单元，这是调试时要着重了解的情况，这也导致了程序的一些错误内存访问不会触发段错误，换言之，在调试会话期间，没有引起段错误并不能直接说明代码是没有问题的。</p>
<h2 id="页的角色细节"><a href="#页的角色细节" class="headerlink" title="页的角色细节"></a>页的角色细节</h2><p>当程序执行时，它会连续访问程序中的各个区域，导致硬件按照以下几种情况所示处理页表：</p>
<ul>
<li>每次程序使用全局变量时，需要具有对数据区域的读写访问权限；</li>
<li>每次程序访问局部变量时，程序会访问栈，需要对栈区域具有读写访问权限；</li>
<li>每次程序进入或离开函数时，对该栈进行一次或多次访问，需要对栈区具有读写访问权限；</li>
<li>每次程序访问通过调用malloc或者new创建的存储器时，都会发生堆访问，也需要读写访问权限；</li>
<li>程序执行的每个机器指令是从文本区域取出的，因此需要具有读和执行文件；</li>
</ul>
<h2 id="信号"><a href="#信号" class="headerlink" title="信号"></a>信号</h2><p>这里需要注意的是，进程抛出的信号，实际上没有任何内容发送给进程。所发生的事情只不过是操作系统将信号记录到进程表中，以便下次进程接收信号时得到CPU上的时间片，执行恰当的信号处理程序。</p>
<h3 id="自定义信号的复杂性"><a href="#自定义信号的复杂性" class="headerlink" title="自定义信号的复杂性"></a>自定义信号的复杂性</h3><p>使用GDB/DDD/Eclipse调试时，自定义信号处理程序可能会使程序变得复杂，无论是直接使用还是通过DDD GUI，每当发出任何信号时，GDB都会停止进程，所以，有可能意味着GDB会因为与调试无关的工作而频繁的停止，此时可以使用handle命令告诉GDB在某些信号发生时不要停止。</p>
<h2 id="总线错误的原因"><a href="#总线错误的原因" class="headerlink" title="总线错误的原因"></a>总线错误的原因</h2><ul>
<li>访问不存在的物理地址；</li>
<li>在很多架构上，要求访问32位量的机器指令要求字对齐，而导致视图在奇数号地址上访问具有4字节的数的指针错误可能引起总线错误。</li>
</ul>
<p>总线错误是处理器层的异常，导致在Unix系统上发出SIGBUS信号，默认情况下，SIGBUS会导致转储内存并终止。</p>
<h2 id="核心文件"><a href="#核心文件" class="headerlink" title="核心文件"></a>核心文件</h2><p>有些信号表示让某个进程继续是不妥当的，甚至是不可能的，在这些情况中，默认动作是提前终止进程，并编写一个名为核心文件core file的文件，俗称转储核心。</p>
<p>核心文件包含程序崩溃时对程序状态的详细描述：栈的内容、CPU寄存器的内容、程序的静态分配变量的值。</p>
<p>我们可以通过file命令来查看文件的详细信息。</p>
<h3 id="为什么需要核心文件"><a href="#为什么需要核心文件" class="headerlink" title="为什么需要核心文件"></a>为什么需要核心文件</h3><ul>
<li>只有在运行了一段长时间后才发生段错误，所以在调试器中无法重新创建该错误；</li>
<li>程序的行为取决于随机的环境事件，因此再次运行程序可能不会再现段错误；</li>
<li>当新手用户运行程序时发生的段错误，需要发送核心文件给开发人员。</li>
</ul>
<h2 id="重载功能"><a href="#重载功能" class="headerlink" title="重载功能"></a>重载功能</h2><p>当GDB注意到重新编译了程序后，它会自动加载新的可执行文件，因此不需要退出和重启GDB。</p>
<p>调试设计的内容</p>
<ul>
<li>确认原则；</li>
<li>使用核心文件进行崩溃进程的“死后”分析；</li>
<li>纠正、编译并重新运行程序后，甚至不需要退出GDB；</li>
<li>Printf()风格调试的不足之处；</li>
<li>利用你的智慧，这是无可替代的；</li>
<li>如果你过去使用printf风格调试的，就会发现使用printf跟踪这些程序错误中的部分错误原来有多难，虽然在调试中使用printf诊断代码有一定的好处，但是作为一种通用目的的工具，它远远不足以用来跟踪实际代码中发生的大部分程序错误。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2012/04/15/linux-debug-walk-around/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/04/15/linux-debug-walk-around/" class="post-title-link" itemprop="url">Linux debug 停下来环顾程序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-04-15 22:11:00" itemprop="dateCreated datePublished" datetime="2012-04-15T22:11:00+08:00">2012-04-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/GDB/" itemprop="url" rel="index"><span itemprop="name">GDB</span></a>
                </span>
            </span>

          
            <span id="/2012/04/15/linux-debug-walk-around/" class="post-meta-item leancloud_visitors" data-flag-title="Linux debug 停下来环顾程序" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2012/04/15/linux-debug-walk-around/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/04/15/linux-debug-walk-around/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2012/04/15/linux-debug-walk-around/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2012/04/15/linux-debug-walk-around/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>调试器不仅能够运行程序，还可以通知它暂停程序的运行，暂停以后，调试器提供了检查变量、跟踪执行路径的机会。</p>
<h2 id="暂停机制"><a href="#暂停机制" class="headerlink" title="暂停机制"></a>暂停机制</h2><p>有3中方式可以通过GDB暂停程序的执行：</p>
<ul>
<li>断点：通知GDB在程序中的特定位置暂停执行；</li>
<li>监视点：通知GDB当特定内存位置（或者设计一个或多个位置的表达式）的值发生变化时暂停执行；</li>
<li>捕获点：通知GDB当特定事件发生时暂停执行；</li>
</ul>
<h2 id="在GDB中删除断点"><a href="#在GDB中删除断点" class="headerlink" title="在GDB中删除断点"></a>在GDB中删除断点</h2><ul>
<li>delete breakpoint_list</li>
<li>delete</li>
<li>clear</li>
<li>clear function、clear filename：function、clear line_number、clear filename：line_number</li>
</ul>
<h2 id="在GDB中禁用断点"><a href="#在GDB中禁用断点" class="headerlink" title="在GDB中禁用断点"></a>在GDB中禁用断点</h2><p>在调试会话期间，会遇到大量断点，对于经常重复的循环结构或函数，这种情况使得调试极不方便。如果要保留断点以便以后使用，暂时又不希望GDB停止执行，可以禁用它们，在以后需要时再启用。此时我们可以使用disable/enable breakpoint_list来禁用和启用断点。</p>
<h2 id="DDD"><a href="#DDD" class="headerlink" title="DDD"></a>DDD</h2><ul>
<li><p>可以直接拖拽断点，很方便；</p>
</li>
<li><p>还有一个优秀的功能Undo/Redo；</p>
</li>
</ul>
<h2 id="GDB中恢复执行的方法"><a href="#GDB中恢复执行的方法" class="headerlink" title="GDB中恢复执行的方法"></a>GDB中恢复执行的方法</h2><ul>
<li>使用step和next单步调试程序；</li>
<li>使用continue使GDB无条件地恢复程序的执行，知道它遇到另一个断点或者程序结束；</li>
<li>用finish或until命令恢复。</li>
</ul>
<h2 id="next和step的区别"><a href="#next和step的区别" class="headerlink" title="next和step的区别"></a>next和step的区别</h2><p>next执行函数，不会在其中暂停，然后在调用之后的第一条语句处暂停；</p>
<p>step在函数中的第一个语句处暂停；</p>
<h2 id="使用continue恢复程序执行"><a href="#使用continue恢复程序执行" class="headerlink" title="使用continue恢复程序执行"></a>使用continue恢复程序执行</h2><p>continue与执行一行代码的step和next相反，这个命令使GDB恢复程序的执行，直到触发断点或者程序结束。</p>
<p>continue命令可以接受一个可选的整数参数n，这个数字要求GDB忽略下面n个断点。</p>
<h2 id="使用finish恢复程序执行"><a href="#使用finish恢复程序执行" class="headerlink" title="使用finish恢复程序执行"></a>使用finish恢复程序执行</h2><p>命令finish指示GDB恢复执行，直到恰好在当前栈帧完成之后位置，这意味着如果你在一个不是main的函数中，finish命令会导致GDB恢复执行，直到恰好在函数返回之后为止，例如：</p>
<p>如果在一个递归函数中，finish只会将你带到递归的上一层，这是因为每次调用都被看做在它自己权限内的函数调用，因为每个函数都有自己的栈帧，如果要在递归层次较高时完全退出递归函数，那么更适合使用临时断点及continue，或者使用until命令。</p>
<h2 id="使用until恢复程序执行"><a href="#使用until恢复程序执行" class="headerlink" title="使用until恢复程序执行"></a>使用until恢复程序执行</h2><p>命令until执行程序，直到到达当前循环体外的下一行源代码。</p>
<h2 id="设置条件断点的方法"><a href="#设置条件断点的方法" class="headerlink" title="设置条件断点的方法"></a>设置条件断点的方法</h2><p>break break-args if (condition)</p>
<h2 id="监视点"><a href="#监视点" class="headerlink" title="监视点"></a>监视点</h2><p>监视点是一种特殊类型的断点，它类似于正常断点，是要求GDB暂停程序执行的指令。区别在于监视点是没有“住在”某一行源码中，取而代之的是，监视点是指示GDB每当某个表达式改变了值就暂停执行的指令。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2012/04/13/linux-debug-pre/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/04/13/linux-debug-pre/" class="post-title-link" itemprop="url">Linux 调试预备知识</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-04-13 22:11:00" itemprop="dateCreated datePublished" datetime="2012-04-13T22:11:00+08:00">2012-04-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GDB/" itemprop="url" rel="index"><span itemprop="name">GDB</span></a>
                </span>
            </span>

          
            <span id="/2012/04/13/linux-debug-pre/" class="post-meta-item leancloud_visitors" data-flag-title="Linux 调试预备知识" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2012/04/13/linux-debug-pre/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/04/13/linux-debug-pre/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2012/04/13/linux-debug-pre/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2012/04/13/linux-debug-pre/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h1><h2 id="处于TUI模式的GDB"><a href="#处于TUI模式的GDB" class="headerlink" title="处于TUI模式的GDB"></a>处于TUI模式的GDB</h2><p>加上<code>-tui</code>选项可以在调用GDB时使用TUI模式运行，或者当处于非TUI模式时在GDB中使用<code>Ctrl+A+X</code>组合键就可以在TUI模式和非TUI模式中跳转。</p>
<p>在GUI模式中，GDB窗口划分为两个子窗口：</p>
<ul>
<li>用于输入GDB命令的窗口</li>
<li>用于查看源码的窗口</li>
</ul>
<p>通过使用上下方向键可以在TUI模式中移动到代码的其他部分。如果没有处于TUI模式中，就可以使用箭头键来浏览以前的GBD命令，从而修改或重复执行这些命令。</p>
<p>在TUI模式中，箭头键用于滚动源代码子窗口，可以使用Ctrl+P和Ctrl+N组合键来浏览以前的GDB命令。</p>
<h3 id="常用的命令"><a href="#常用的命令" class="headerlink" title="常用的命令"></a>常用的命令</h3><ul>
<li>backtrace：显示程序的当前位置和表示如何到达当前位置的栈跟踪（同义词：where）。</li>
<li>breakpoint：在程序中设置一个断点。</li>
<li>cd：改变当前工作目录。</li>
<li>clear：删除刚才停止处的断点。</li>
<li>commands：命中断点时，列出将要执行的命令。</li>
<li>continue：从断点处开始继续执行。</li>
<li>delete：删除一个断点或监测点，也可与其他命令一起使用。</li>
<li>display：程序停止时显示变量和表达式。</li>
<li>down：下移栈帧，使得另一个函数成为当前函数。</li>
<li>frame：选择下一条continue命令的帧。</li>
<li>info：显示与该程序有关的各种信息。</li>
<li>info break：显示当前断点清单，包括到达断点处的次数等。</li>
<li>info files：显示被调试文件的详细信息。</li>
<li>info func：显示所有的函数名称。</li>
<li>info local：显示当前函数中的局部变量信息。</li>
<li>info prog：显示被调试程序的执行状态。</li>
<li>info var：显示所有的全局和静态变量名称。</li>
<li>jump：在源程序中的另一点开始运行。</li>
<li>kill：异常终止在gdb 控制下运行的程序。</li>
<li>list：列出相应于正在执行的程序的源文件内容。</li>
<li>next：执行下一个源程序行，从而执行其整体中的一个函数。</li>
<li>print：显示变量或表达式的值。</li>
<li>pwd：显示当前工作目录。</li>
<li>pype：显示一个数据结构（如一个结构或C++类）的内容。</li>
<li>quit：退出gdb。</li>
<li>reverse-search：在源文件中反向搜索正规表达式。</li>
<li>run：执行该程序。</li>
<li>search：在源文件中搜索正规表达式。</li>
<li>set variable：给变量赋值。</li>
<li>signal：将一个信号发送到正在运行的进程。</li>
<li>step：执行下一个源程序行，必要时进入下一个函数。</li>
<li>undisplay display：命令的反命令，不要显示表达式。</li>
<li>until：结束当前循环。</li>
<li>up：上移栈帧，使另一个函数成为当前函数。</li>
<li>watch：在程序中设置一个监测点（即数据断点）。</li>
<li>whatis：显示变量或函数类型。</li>
</ul>
<h2 id="CGDB"><a href="#CGDB" class="headerlink" title="CGDB"></a>CGDB</h2><p>CGDB是一个很友好的GDB界面，当然是相对于GDB的TUI界面，CGDB也是GDB的前端，虽然CGDB类似于基于终端的TUI的概念，但其在色彩方面特别有吸引力，而且可以浏览源代码子窗口，并直接在子窗口中设置断点，并且CGDB处理屏幕刷新的能力似乎也比GDB的TUI强。</p>
<p>CGDB的基本命令与约定：</p>
<ul>
<li>按下ESC键可以从基本命令转到源代码窗口，按下i键返回；</li>
<li>当光标在源代码窗口中时，可以使用箭头键或者类似vi的操作在源码中随意移动，j下k上/查找；</li>
<li>要执行的下一行用箭头标记；</li>
<li>为了在通过光标突出显示的当前代码行上设置断点，只要按下空格键即可；</li>
<li>断点行的行号用红色突出显示</li>
</ul>
<p>编译：gcc -g -Wall -o gdb_app test.c</p>
<blockquote>
<p>Attention：其中的-g选项可以让编译器将符号表（即对应程序的变量和代码行的内存地址列表）保存在生成的可执行文件。这是一个绝对必要的步骤，这样才能在调试会话过程中引用源代码中的变量名和行号。</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2012/04/12/linux-debug/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/04/12/linux-debug/" class="post-title-link" itemprop="url">Linux 调试预备知识</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-04-12 22:11:00" itemprop="dateCreated datePublished" datetime="2012-04-12T22:11:00+08:00">2012-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
            <span id="/2012/04/12/linux-debug/" class="post-meta-item leancloud_visitors" data-flag-title="Linux 调试预备知识" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2012/04/12/linux-debug/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/04/12/linux-debug/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2012/04/12/linux-debug/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2012/04/12/linux-debug/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h1><p>正确使用恰当的调试工具可以提高发现和改正错误的效率，GDB用于逐行跟踪程序、设置断点、检查变量以及查看特定时间程序的执行情况，DDD是流行的GDB的GUI前端，而eclipse提供完整的集成开发环境。</p>
<h2 id="gdb"><a href="#gdb" class="headerlink" title="gdb"></a>gdb</h2><p>GNU调试器（GNU Debugger，缩写：GDB），是GNU软件系统中的标准调试器，此外GDB也是个具有移携性的调试器，经过移携需求的调修与重新编译，如今许多的类UNIX操作系统上都可以使用GDB，而现有GDB所能支持除错的编程语言有C、C++、Pascal以及FORTRAN。</p>
<h2 id="DDD"><a href="#DDD" class="headerlink" title="DDD"></a>DDD</h2><p>GNU DDD(Data Display Debugger)是命令行调试程序，如GDB、DBX、WDB、Ladebug、JDB、XDB、Perl Debugger或Python Debugger的可视化图形前端。它特有的图形数据显示功能（Graphical Data Display）可以把数据结构按照图形的方式显示出来。</p>
<p>DDD最初源于1990年Andreas Zeller编写的VSL结构化语言，后来经过一些程序员的努力，演化成今天的模样。DDD的功能非常强大，可以调试用C/C++ 、Ada、Fortran、Pascal、Modula-2和Modula-3编写的程序；可以超文本方式浏览源代码；能够进行断点设置、回溯调试和历史纪录编辑；具有程序在终端运行的仿真窗口，并在远程主机上进行调试的能力；图形数据显示功能（Graphical Data Display）是创建该调试器的初衷之一，能够显示各种数据结构之间的关系，并由此将数据结构以图形化形式显示；具有GDB/DBX/XDB的命令行界面，包括完全的文本编辑、历史纪录、搜寻引擎。</p>
<h2 id="Eclipse"><a href="#Eclipse" class="headerlink" title="Eclipse"></a>Eclipse</h2><p>Eclipse 是一个开放源代码的、基于Java的可扩展开发平台。就其本身而言，它只是一个框架和一组服务，用于通过插件组件构建开发环境。幸运的是，Eclipse 附带了一个标准的插件集，包括Java开发工具（Java Development Kit，JDK）。</p>
<h2 id="为什么要用调试工具，使用printf或者cout不是很好嘛"><a href="#为什么要用调试工具，使用printf或者cout不是很好嘛" class="headerlink" title="为什么要用调试工具，使用printf或者cout不是很好嘛"></a>为什么要用调试工具，使用printf或者cout不是很好嘛</h2><p>对于打印输出要求我们有策略地持续添加跟踪代码，重新编译程序，运行程序并分析跟踪代码的输出，在修正程序错误之后删除跟踪代码，并且针对发现的每个新的程序错误重复上述这些步骤，很费事，很费力，很容易将我们的注意力转移到排查错误的过程上而不是实际的任务上。</p>
<p>相反，使用调试工具，比如ddd或者eclipse的GUI，我们只需要使用鼠标指针就可以检查变量的值，并显示该变量的当前值，and调试器还可以指出程序错误所在的大概位置。例如，段错误即内存访问错误，调试器会立即指出段错误所在的位置，and调试器还可以设置监视点watchpoint，持续监视某个变量的值。</p>
<h2 id="调试原则："><a href="#调试原则：" class="headerlink" title="调试原则："></a>调试原则：</h2><ul>
<li>从简单工作开始调试；</li>
<li>使用自顶向下的方法；</li>
<li>使用调试工具确定段错误的位置；</li>
<li>通过发出中断确定无限循环的位置；</li>
<li>使用二分搜索；</li>
</ul>
<h2 id="命令行调试-vs-GUI调试"><a href="#命令行调试-vs-GUI调试" class="headerlink" title="命令行调试 vs GUI调试"></a>命令行调试 vs GUI调试</h2><p>GUI的优点: GUI界面比GDB提供的GUI界面的外观更加形象，使用起来更加方便；</p>
<p>GDB的优点</p>
<ul>
<li>GDB的启动速度比DDD快很多；</li>
<li>在某些情况下，通过来自于公共中断的SSH连接远程执行调试，如果没有安装X11，就完全不能使用GUI了，即使有X11，GUI的屏幕刷新操作也会非常缓慢；</li>
<li>当调试彼此之间协同操作的多个程序时，就需要针对每个程序的独立调试窗口，对于GUI窗口操作就比较麻烦；</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2012/04/10/linux-rsync-beginner/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/04/10/linux-rsync-beginner/" class="post-title-link" itemprop="url">Linux rsync</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-04-10 12:14:00" itemprop="dateCreated datePublished" datetime="2012-04-10T12:14:00+08:00">2012-04-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">Linux入门</span></a>
                </span>
            </span>

          
            <span id="/2012/04/10/linux-rsync-beginner/" class="post-meta-item leancloud_visitors" data-flag-title="Linux rsync" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2012/04/10/linux-rsync-beginner/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/04/10/linux-rsync-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2012/04/10/linux-rsync-beginner/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2012/04/10/linux-rsync-beginner/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Linux-rsync-命令"><a href="#Linux-rsync-命令" class="headerlink" title="Linux rsync 命令"></a>Linux rsync 命令</h1><p><code>rsync</code>也是远程（或本地）复制和同步文件最常用的命令。</p>
<p>与<code>scp</code>类似。</p>
<p>官方定义为：</p>
<blockquote>
<p>rsync - a fast, versatile, remote (and local) file-copyint tool</p>
</blockquote>
<p>从定义看，比<code>scp</code>要强一些。</p>
<p>借助<code>rsync</code>命令，可以跨目录，跨磁盘和跨网络远程与本地数据进行复制和同步。比如最常用的就是在两台Linux主机之间进行数据的备份。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>语法相对而言，比较简单，不过用法其实挺多的。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rsync [OPTION...] SRC... [DEST]</span><br></pre></td></tr></tbody></table></figure>

<p>常用的参数为：</p>
<ul>
<li><code>-v</code> : 详细模式输出</li>
<li><code>-r</code> : 递归拷贝数据，但是传输数据时不保留时间戳和权限</li>
<li><code>-a</code> : 归档模式, 归档模式总是递归拷贝，而且保留符号链接、权限、属主、属组时间戳</li>
<li><code>-z</code> : 压缩传输</li>
<li><code>-h</code> : human-readable</li>
<li><code>--progress</code>： 显示传输过程</li>
<li><code>--exclude=PATTERN</code> 指定排除传输的文件模式</li>
<li><code>--include=PATTERN</code> 指定需要传输的文件模式</li>
</ul>
<h2 id="无参数传输"><a href="#无参数传输" class="headerlink" title="无参数传输"></a>无参数传输</h2><p>默认情况下，传输一个文件不需要任何参数：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rsync user@192.168.100.123:~/dest_file <span class="built_in">dir</span>/</span><br></pre></td></tr></tbody></table></figure>

<p>命令执行后，会提示输入远程机器的密码，不过成功后不会显示任何信息，需要自行确认。</p>
<h2 id="常用传输"><a href="#常用传输" class="headerlink" title="常用传输"></a>常用传输</h2><p>所以默认情况下，会使用rv参数，不仅可以传输一个目录，也可以是文件：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -rv user@192.168.100.123:~/dest_file <span class="built_in">dir</span>/</span><br><span class="line">user@192.168.100.123<span class="string">'s password:</span></span><br><span class="line"><span class="string">receiving file list ... done</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">c</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="显示详细进度"><a href="#显示详细进度" class="headerlink" title="显示详细进度"></a>显示详细进度</h2><p>对于小文件而言，没有问题，但是如果文件比较大，比如有几个GB，那么此时<code>--progress</code>参数就会比较有帮助：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -rv --progress user@192.168.100.123:~/dest_file <span class="built_in">dir</span>/</span><br><span class="line">user@192.168.100.123<span class="string">'s password:</span></span><br><span class="line"><span class="string">receiving file list ... done</span></span><br><span class="line"><span class="string">30 files to consider</span></span><br><span class="line"><span class="string">a  100%   278.25MB/s  0:02:00   (xfer#1, to-check=28/30)</span></span><br><span class="line"><span class="string">b  100%   289.25MB/s  0:02:00   (xfer#1, to-check=27/30)</span></span><br><span class="line"><span class="string">c  100%   277.45MB/s  0:02:00   (xfer#1, to-check=26/30)</span></span><br></pre></td></tr></tbody></table></figure>

<p>会实时更新传输的进度。</p>
<p>此时对比scp，可以看到多了一些提示信息，比如会提示：</p>
<blockquote>
<p>receiving file list … done<br>30 files to consider</p>
</blockquote>
<p>另外，在实时更新的进度里面也有了一些多出来的信息。</p>
<h2 id="不传输一些文件"><a href="#不传输一些文件" class="headerlink" title="不传输一些文件"></a>不传输一些文件</h2><p>比如做软件开发，不希望传输一些编译过程中产生的<code>.o</code>文件，测试的<code>--exclude</code>参数就很完美，如下：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -rv --progress --exclude <span class="string">"*.o"</span> user@192.168.100.123:~/dest_file <span class="built_in">dir</span>/</span><br><span class="line">user@192.168.100.123<span class="string">'s password:</span></span><br><span class="line"><span class="string">receiving file list ... done</span></span><br><span class="line"><span class="string">25 files to consider</span></span><br><span class="line"><span class="string">a  100%   278.25MB/s  0:02:00   (xfer#1, to-check=28/30)</span></span><br><span class="line"><span class="string">b  100%   289.25MB/s  0:02:00   (xfer#1, to-check=27/30)</span></span><br><span class="line"><span class="string">c  100%   277.45MB/s  0:02:00   (xfer#1, to-check=26/30)</span></span><br></pre></td></tr></tbody></table></figure>

<p>此时就看到，本来该传输30组的数据，去掉了部分<code>.o</code>文件。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2012/04/10/linux-rsync/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/04/10/linux-rsync/" class="post-title-link" itemprop="url">Linux rsync</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-04-10 12:14:00" itemprop="dateCreated datePublished" datetime="2012-04-10T12:14:00+08:00">2012-04-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/Linux%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">Linux入门</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/Linux%E5%85%A5%E9%97%A8/%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93/" itemprop="url" rel="index"><span itemprop="name">数据传输</span></a>
                </span>
            </span>

          
            <span id="/2012/04/10/linux-rsync/" class="post-meta-item leancloud_visitors" data-flag-title="Linux rsync" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2012/04/10/linux-rsync/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/04/10/linux-rsync/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2012/04/10/linux-rsync/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2012/04/10/linux-rsync/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Linux-rsync-命令"><a href="#Linux-rsync-命令" class="headerlink" title="Linux rsync 命令"></a>Linux rsync 命令</h1><p><code>rsync</code>也是远程（或本地）复制和同步文件最常用的命令。</p>
<p>与<code>scp</code>类似。</p>
<p>官方定义为：</p>
<blockquote>
<p>rsync - a fast, versatile, remote (and local) file-copyint tool</p>
</blockquote>
<p>从定义看，比<code>scp</code>要强一些。</p>
<p>借助<code>rsync</code>命令，可以跨目录，跨磁盘和跨网络远程与本地数据进行复制和同步。比如最常用的就是在两台Linux主机之间进行数据的备份。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p>语法相对而言，比较简单，不过用法其实挺多的。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rsync [OPTION...] SRC... [DEST]</span><br></pre></td></tr></tbody></table></figure>

<p>常用的参数为：</p>
<ul>
<li><code>-v</code> : 详细模式输出</li>
<li><code>-r</code> : 递归拷贝数据，但是传输数据时不保留时间戳和权限</li>
<li><code>-a</code> : 归档模式, 归档模式总是递归拷贝，而且保留符号链接、权限、属主、属组时间戳</li>
<li><code>-z</code> : 压缩传输</li>
<li><code>-h</code> : human-readable</li>
<li><code>--progress</code>： 显示传输过程</li>
<li><code>--exclude=PATTERN</code> 指定排除传输的文件模式</li>
<li><code>--include=PATTERN</code> 指定需要传输的文件模式</li>
</ul>
<h2 id="无参数传输"><a href="#无参数传输" class="headerlink" title="无参数传输"></a>无参数传输</h2><p>默认情况下，传输一个文件不需要任何参数：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rsync user@192.168.100.123:~/dest_file <span class="built_in">dir</span>/</span><br></pre></td></tr></tbody></table></figure>

<p>命令执行后，会提示输入远程机器的密码，不过成功后不会显示任何信息，需要自行确认。</p>
<h2 id="常用传输"><a href="#常用传输" class="headerlink" title="常用传输"></a>常用传输</h2><p>所以默认情况下，会使用rv参数，不仅可以传输一个目录，也可以是文件：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -rv user@192.168.100.123:~/dest_file <span class="built_in">dir</span>/</span><br><span class="line">user@192.168.100.123<span class="string">'s password:</span></span><br><span class="line"><span class="string">receiving file list ... done</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">c</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="显示详细进度"><a href="#显示详细进度" class="headerlink" title="显示详细进度"></a>显示详细进度</h2><p>对于小文件而言，没有问题，但是如果文件比较大，比如有几个GB，那么此时<code>--progress</code>参数就会比较有帮助：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -rv --progress user@192.168.100.123:~/dest_file <span class="built_in">dir</span>/</span><br><span class="line">user@192.168.100.123<span class="string">'s password:</span></span><br><span class="line"><span class="string">receiving file list ... done</span></span><br><span class="line"><span class="string">30 files to consider</span></span><br><span class="line"><span class="string">a  100%   278.25MB/s  0:02:00   (xfer#1, to-check=28/30)</span></span><br><span class="line"><span class="string">b  100%   289.25MB/s  0:02:00   (xfer#1, to-check=27/30)</span></span><br><span class="line"><span class="string">c  100%   277.45MB/s  0:02:00   (xfer#1, to-check=26/30)</span></span><br></pre></td></tr></tbody></table></figure>

<p>会实时更新传输的进度。</p>
<p>此时对比scp，可以看到多了一些提示信息，比如会提示：</p>
<blockquote>
<p>receiving file list … done<br>30 files to consider</p>
</blockquote>
<p>另外，在实时更新的进度里面也有了一些多出来的信息。</p>
<h2 id="不传输一些文件"><a href="#不传输一些文件" class="headerlink" title="不传输一些文件"></a>不传输一些文件</h2><p>比如做软件开发，不希望传输一些编译过程中产生的<code>.o</code>文件，测试的<code>--exclude</code>参数就很完美，如下：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -rv --progress --exclude <span class="string">"*.o"</span> user@192.168.100.123:~/dest_file <span class="built_in">dir</span>/</span><br><span class="line">user@192.168.100.123<span class="string">'s password:</span></span><br><span class="line"><span class="string">receiving file list ... done</span></span><br><span class="line"><span class="string">25 files to consider</span></span><br><span class="line"><span class="string">a  100%   278.25MB/s  0:02:00   (xfer#1, to-check=28/30)</span></span><br><span class="line"><span class="string">b  100%   289.25MB/s  0:02:00   (xfer#1, to-check=27/30)</span></span><br><span class="line"><span class="string">c  100%   277.45MB/s  0:02:00   (xfer#1, to-check=26/30)</span></span><br></pre></td></tr></tbody></table></figure>

<p>此时就看到，本来该传输30组的数据，去掉了部分<code>.o</code>文件。</p>
<h2 id="rsync特性"><a href="#rsync特性" class="headerlink" title="rsync特性"></a>rsync特性</h2><p>高效地复制同步数据到对端，或者对端到本地<br>支持复制链接、设备、属主、属组、权限<br>比scp（Secure Copy）更快。rsync使用远程更新协议（ remote-update protocol ），这允许仅仅传输两组文件之间的差异。对于首次传输，它将文件或目录的全部内容从源复制到目标，但是从下次起，它仅将变化部分复制到目标。<br>Rsync消耗较少的带宽，因为它使用压缩和解压缩方法，同时发送和接收数据两端。HTTP压缩技术</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">--delete</span> 同步时，删除那些DST中有，而<span class="attribute">SRC</span>没有的文件</span><br><span class="line"><span class="attr">--max-size</span>：限定传输文件大小的上限</span><br><span class="line"><span class="attr">--dry-run</span>：显示那些文件将被传输，并不会实际传输</span><br><span class="line"><span class="attr">--bwlimit</span>：限制传输带宽</span><br><span class="line">-W：拷贝文件，不进行增量检测</span><br></pre></td></tr></tbody></table></figure>



<h1 id="使用范例："><a href="#使用范例：" class="headerlink" title="使用范例："></a>使用范例：</h1><h2 id="本地拷贝到远程"><a href="#本地拷贝到远程" class="headerlink" title="本地拷贝到远程"></a>本地拷贝到远程</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -avz localfile user@ip:/the/path/</span><br></pre></td></tr></tbody></table></figure>


<p>传输数据时显示传输过程<br>使用–progress参数</p>
<h2 id="使用–exclude和–include"><a href="#使用–exclude和–include" class="headerlink" title="使用–exclude和–include"></a>使用–exclude和–include</h2><p>传输dat开头的文件、目录，排除其他情况的文件、目录</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -avz --include <span class="string">'dat*'</span> --exclude <span class="string">'*'</span> /local/path/ user@ip:/the/path</span><br></pre></td></tr></tbody></table></figure>

<p>使用–delete<br>–delete用于同步时，删除那些DST中有，而SRC没有的文件</p>
<p>传输完毕后自动删除源文件、目录, 可以使用–remove-source-files选项完成此自动删除。</p>
<p>使用–dry-run<br>如果你对rsync不熟悉，贸然使用rsync可能会搞乱对端文件、目录。借助–dry-run可以让你知道会传输些什么东西，但实际上并没有传输任何东西。如果输出结果与你的预期吻合，可以去掉–dry-run，进行实际的传输工作。</p>
<p>同步整个文件<br>rsync由于采用远程更新协议（ remote-update protocol ），默认是同步变化的字节或块。使用-W可以取消这种机制，整个文件同步</p>
<h3 id="指定端口"><a href="#指定端口" class="headerlink" title="指定端口"></a>指定端口</h3><p>下个示例通过指定12345端口进行数据传输。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -e <span class="string">'ssh -p 12345'</span>  -avz localfile user@ip:/the/path/</span><br></pre></td></tr></tbody></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2012/03/27/linux-ubuntu-delete-kernels/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2012/03/27/linux-ubuntu-delete-kernels/" class="post-title-link" itemprop="url">Ubuntu 删除多余内核</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2012-03-27 22:14:00" itemprop="dateCreated datePublished" datetime="2012-03-27T22:14:00+08:00">2012-03-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/Ubuntu/" itemprop="url" rel="index"><span itemprop="name">Ubuntu</span></a>
                </span>
            </span>

          
            <span id="/2012/03/27/linux-ubuntu-delete-kernels/" class="post-meta-item leancloud_visitors" data-flag-title="Ubuntu 删除多余内核" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2012/03/27/linux-ubuntu-delete-kernels/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2012/03/27/linux-ubuntu-delete-kernels/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2012/03/27/linux-ubuntu-delete-kernels/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2012/03/27/linux-ubuntu-delete-kernels/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ubuntu删除多余内核"><a href="#ubuntu删除多余内核" class="headerlink" title="ubuntu删除多余内核"></a>ubuntu删除多余内核</h1><p>如果升级到了一个新的内核，并且还比较稳定，那么老的内核就可以清理了，放在电脑里也占位置。方法（命令行比较通用）如下：</p>
<p>1.查看系统内存在的内核版本列表：</p>
<figure class="highlight dsconfig"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">sudo</span> <span class="string">dpkg</span> –<span class="built_in">get-selections</span> |<span class="string">grep</span> <span class="string">linux</span></span><br></pre></td></tr></tbody></table></figure>

<p>结果:</p>
<figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">libselinux1</span>                              install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-firmware                              install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-generic                                 install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">33</span>                       install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">33</span>-generic                install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">33</span>-generic-pae        install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">34</span>                       install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">34</span>-generic                install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">34</span>-generic-pae        install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">35</span>                       install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">35</span>-generic                install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">35</span>-generic-pae        install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">37</span>                       install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">37</span>-generic                install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">37</span>-generic-pae        install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">38</span>                       install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">38</span>-generic                install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">38</span>-generic-pae        install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">40</span>                       install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">40</span>-generic                install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">40</span>-generic-pae        install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-generic                         install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-headers-generic-pae                 install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">2</span>.<span class="number">6</span>.<span class="number">32</span>-<span class="number">21</span>-generic                 deinstall</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">2</span>.<span class="number">6</span>.<span class="number">32</span>-<span class="number">40</span>-generic                 deinstall</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">2</span>.<span class="number">6</span>.<span class="number">32</span>-<span class="number">41</span>-generic                 deinstall</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">2</span>.<span class="number">6</span>.<span class="number">32</span>-<span class="number">42</span>-generic                 install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">33</span>-generic                   install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">34</span>-generic                   install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">35</span>-generic                   install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">37</span>-generic                   install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">38</span>-generic                   install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">40</span>-generic                   install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-image-generic                            install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-libc-dev                                 install</span><br><span class="line"></span><br><span class="line"><span class="attribute">linux</span>-sound-base                          install</span><br><span class="line"></span><br><span class="line"><span class="attribute">pptp</span>-linux                               install</span><br><span class="line"></span><br><span class="line"><span class="attribute">syslinux</span>                                   install</span><br><span class="line"></span><br><span class="line"><span class="attribute">syslinux</span>-common                                install</span><br><span class="line"></span><br><span class="line"><span class="attribute">syslinux</span>-legacy                              install</span><br><span class="line"></span><br><span class="line"><span class="attribute">util</span>-linux                                  install</span><br></pre></td></tr></tbody></table></figure>

<p>2.查看当前Ubuntu系统使用的内核版本</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -a</span><br></pre></td></tr></tbody></table></figure>

<p>结果：</p>
<figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Linux</span> linux <span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">40</span>-generic #<span class="number">64</span>-Ubuntu SMP Mon Mar <span class="number">25</span> <span class="number">21</span>:<span class="number">22</span>:<span class="number">26</span> UTC <span class="number">2013</span> i686 i686 i386 GNU/Linux</span><br></pre></td></tr></tbody></table></figure>

<p>3.删除多余内核：</p>
<figure class="highlight apache"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo</span> apt-get purge</span><br><span class="line"><span class="attribute">linux</span>-image-<span class="number">2</span>.<span class="number">6</span>.<span class="number">32</span>-<span class="number">21</span>-generic linux-image-<span class="number">2</span>.<span class="number">6</span>.<span class="number">32</span>-<span class="number">40</span>-generic linux-image-<span class="number">2</span>.<span class="number">6</span>.<span class="number">32</span>-<span class="number">41</span>-generic linux-image-<span class="number">2</span>.<span class="number">6</span>.<span class="number">32</span>-<span class="number">42</span>-generic linux-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">33</span>-generic linux-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">34</span>-generic linux-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">35</span>-generic linux-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">37</span>-generic linux-image-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">38</span>-generic</span><br><span class="line"><span class="attribute">linux</span>-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">33</span> linux-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">34</span> linux-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">35</span> linux-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">37</span> linux-headers-<span class="number">3</span>.<span class="number">2</span>.<span class="number">0</span>-<span class="number">38</span></span><br></pre></td></tr></tbody></table></figure>

<p>更新grub：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> update-grub</span><br></pre></td></tr></tbody></table></figure>

<p>再次查看一下内核列表，就发现旧版本已经不存在了！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/64/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/64/">64</a><span class="page-number current">65</span><a class="page-number" href="/page/66/">66</a><span class="space">&hellip;</span><a class="page-number" href="/page/100/">100</a><a class="extend next" rel="next" href="/page/66/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">郭大侠</p>
  <div class="site-description" itemprop="description">郭大侠的博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">998</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">181</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1450</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://macshuo.com/" title="http:&#x2F;&#x2F;macshuo.com&#x2F;" rel="noopener" target="_blank">MacTalk</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://huhuidong.wordpress.com/" title="https:&#x2F;&#x2F;huhuidong.wordpress.com&#x2F;" rel="noopener" target="_blank">小胡</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2007 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郭大侠</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"vIjrLnlboDVaaseO2yYcVSQF-gzGzoHsz","app_key":"NTHrGJp71GzEGvNUEUFumVcR","server_url":null,"security":true};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://shaoguangleo.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'vIjrLnlboDVaaseO2yYcVSQF-gzGzoHsz',
      appKey     : 'NTHrGJp71GzEGvNUEUFumVcR',
      placeholder: "路过，即是缘分...",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
