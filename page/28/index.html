<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"shaoguangleo.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="郭大侠的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="浩瀚宇宙 灿烂星空">
<meta property="og:url" content="http://shaoguangleo.github.io/page/28/index.html">
<meta property="og:site_name" content="浩瀚宇宙 灿烂星空">
<meta property="og:description" content="郭大侠的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="郭大侠">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://shaoguangleo.github.io/page/28/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>浩瀚宇宙 灿烂星空</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=a8cfacb0a536bd846d2fd545cedb4d61"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'a8cfacb0a536bd846d2fd545cedb4d61');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?a8cfacb0a536bd846d2fd545cedb4d61";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="浩瀚宇宙 灿烂星空" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">浩瀚宇宙 灿烂星空</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">工作和生活中的七七八八</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/01/23/python-reStructuredText/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/23/python-reStructuredText/" class="post-title-link" itemprop="url">python中文档SPHINX的使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-23 23:29:02" itemprop="dateCreated datePublished" datetime="2017-01-23T23:29:02+08:00">2017-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/Sphinx/" itemprop="url" rel="index"><span itemprop="name">Sphinx</span></a>
                </span>
            </span>

          
            <span id="/2017/01/23/python-reStructuredText/" class="post-meta-item leancloud_visitors" data-flag-title="python中文档SPHINX的使用" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/01/23/python-reStructuredText/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/23/python-reStructuredText/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/23/python-reStructuredText/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/23/python-reStructuredText/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="reStructuredText-简介"><a href="#reStructuredText-简介" class="headerlink" title="reStructuredText 简介"></a>reStructuredText 简介</h1><p> reStructuredText (reST) 为文档生成者提供足够的信息. reST 被认为是简单，实用的标记语言，因此学习它不会花太多时间.</p>
<p>See also</p>
<p>读物 <a href="http://docutils.sourceforge.net/rst.html">reStructuredText User Documentation</a>. 文档内 “ref” 链接指向reST的分类参考文献.</p>
<h2 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h2><p>段落 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id2">:duref:<code>ref </code></a>) 是reST 文件的基本模块. 段落是由空行分隔的一段文本. 和Python一样, 对齐也是reST的操作符, 因此同一段落的行都是左对齐的.</p>
<h2 id="内联标记"><a href="#内联标记" class="headerlink" title="内联标记"></a>内联标记</h2><p>标准的reST 内联标记相当简单:</p>
<ul>
<li>星号: <code>*text*</code> 是强调 (斜体),</li>
<li>双星号: <code>**text**</code> 重点强调 (加粗),</li>
<li>反引号: <code>text</code> 代码样式.</li>
</ul>
<p>星号及反引号在文本中容易与内联标记符号混淆，可使用反斜杠符号转义.</p>
<p>标记需注意的一些限制:</p>
<ul>
<li>不能相互嵌套,</li>
<li>内容前后不能由空白: 这样写<code>* text*</code> 是错误的,</li>
<li>如果内容需要特殊字符分隔. 使用反斜杠转义，如: <code>thisis\ *one*\ word</code>.</li>
</ul>
<p>这些限制在未来版本可能会被改善.</p>
<p>reST 也允许自定义 “文本解释角色”’, 这意味着可以以特定的方式解释文本. Sphinx以此方式提供语义标记及参考索引，操作符为 <code>:rolename:</code>content``.</p>
<p>标准reST 提供以下规则:</p>
<ul>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id5">:durole:<code>emphasis</code></a> – 写成 <code>*emphasis*</code></li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id7">:durole:<code>strong</code></a> – 写成 <code>**strong**</code></li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id9">:durole:<code>literal</code></a> – 写成 <code>literal</code></li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id11">:durole:<code>subscript</code></a> – 下标</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id13">:durole:<code>superscript</code></a> – 上标</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id15">:durole:<code>title-reference</code></a> – 书、期刊等材料的标题</li>
</ul>
<p>详情请查看 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/markup/inline.html#inline-markup">内联标记</a> .</p>
<h2 id="列表与引用"><a href="#列表与引用" class="headerlink" title="列表与引用"></a>列表与引用</h2><p>列表标记 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id18">:duref:<code>ref </code></a>) 的使用最自然: 仅在段落的开头放置一个星号和一个缩进. 编号的列表也可以;也可以使用符号 <code>#</code> 自动加序号:</p>
<figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> 这是一个项目符号列表.</span><br><span class="line"><span class="bullet">*</span> 它有两项，</span><br><span class="line">  第二项使用两行.</span><br><span class="line"></span><br><span class="line"><span class="bullet">1.</span> 这是个有序列表.</span><br><span class="line"><span class="bullet">2.</span> 也有两项.</span><br><span class="line"></span><br><span class="line"><span class="section">#. 是个有序列表.</span></span><br><span class="line"><span class="section">#. 也有两项.</span></span><br></pre></td></tr></tbody></table></figure>

<p>列表可以嵌套，但是需跟父列表使用空行分隔</p>
<figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> 这是</span><br><span class="line"><span class="bullet">*</span> 一个列表</span><br><span class="line"></span><br><span class="line"><span class="bullet">  *</span> 嵌套列表</span><br><span class="line"><span class="bullet">  *</span> 子项</span><br><span class="line"></span><br><span class="line"><span class="bullet">*</span> 父列表继续</span><br></pre></td></tr></tbody></table></figure>

<p>定义列表 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id20">:duref:<code>ref </code></a>)</p>
<figure class="highlight erlang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">术语 (term 文本开头行)</span><br><span class="line">   定义术语，必须缩进</span><br><span class="line"></span><br><span class="line">   可以有多段组成</span><br><span class="line"></span><br><span class="line">下一术语（term）</span><br><span class="line">   描述.</span><br></pre></td></tr></tbody></table></figure>

<p>一行仅能写一个术语.</p>
<p>引用段落 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id22">:duref:<code>ref </code></a>) 仅使用缩进（相对于周围段落）创建.</p>
<p>行模块 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id24">:duref:<code>ref </code></a>) 可以这样分隔</p>
<figure class="highlight 1c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">| 这些行</span></span><br><span class="line"><span class="string">| 在源文件里</span></span><br><span class="line"><span class="string">| 被分隔的一模一样.</span></span><br></pre></td></tr></tbody></table></figure>

<p>还有其他有用的模块:</p>
<ul>
<li>字段列表 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id26">:duref:<code>ref </code></a>)</li>
<li>选项列表(<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id28">:duref:<code>ref </code></a>)</li>
<li>字面引用模块 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id30">:duref:<code>ref </code></a>)</li>
<li>文档测试模块 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id32">:duref:<code>ref </code></a>)</li>
</ul>
<h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><p>字面代码块 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id35">:duref:<code>ref </code></a>) 在段落的后面使用标记 <code>::</code> 引出. 代码块必须缩进(同段落，需要与周围文本以空行分隔):</p>
<figure class="highlight elixir"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">这是一段正常文本. 下一段是代码文字::</span><br><span class="line"></span><br><span class="line">   它不需要特别处理，仅是</span><br><span class="line">   缩进就可以了.</span><br><span class="line"></span><br><span class="line">   它可以有多行.</span><br><span class="line"></span><br><span class="line">再是正常的文本段.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.. code-block:: c                                               </span><br><span class="line">    <span class="symbol">:linenos</span>:                                                   </span><br><span class="line">    <span class="symbol">:emphasize-lines</span>: <span class="number">3</span>,<span class="number">6</span>   <span class="comment"># 高亮显示3、6行                                    </span></span><br><span class="line">                                                                </span><br><span class="line">    void foo()                                                  </span><br><span class="line">    {                                                                                            </span><br><span class="line">        int i;                                                  </span><br><span class="line">                                                                </span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++)                                     </span><br><span class="line">            printf(<span class="string">"i: %d\n"</span>, a);                               </span><br><span class="line">    }       </span><br></pre></td></tr></tbody></table></figure>

<p>这个 <code>::</code> 标记很优雅:</p>
<ul>
<li>如果作为独立段落存在,则整段都不会出现在文档里.</li>
<li>如果前面有空白，则标记被移除.</li>
<li>如果前面是非空白，则标记被一个冒号取代.</li>
</ul>
<p>因此上面的例子第一段文字将变为”下一段是代码文字:”.</p>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><p>支持两种表格. 一种是 <em>网格表格</em> (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id38">:duref:<code>ref </code></a>), 可以自定义表格的边框. 如下:</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+------------------------+</span>------------<span class="code">+----------+</span>----------+</span><br><span class="line">| Header row, column 1   | Header 2   | Header 3 | Header 4 |</span><br><span class="line"><span class="section">| (header rows optional) |            |          |          |</span></span><br><span class="line"><span class="section">+========================+============+==========+==========+</span></span><br><span class="line"><span class="section">| body row 1, column 1   | column 2   | column 3 | column 4 |</span></span><br><span class="line"><span class="section">+------------------------+------------+----------+----------+</span></span><br><span class="line"><span class="section">| body row 2             | ...        | ...      |          |</span></span><br><span class="line"><span class="section">+------------------------+------------+----------+----------+</span></span><br></pre></td></tr></tbody></table></figure>

<p><em>简单表格</em> (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id40">:duref:<code>ref </code></a>) 书写简单, 但有一些限制: 需要有多行，且第一列元素不能分行显示，如下:</p>
<figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>  <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>  <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">A      B      A and B</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>  <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>  <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">False  False  False</span><br><span class="line">True   False  False</span><br><span class="line">False  True   False</span><br><span class="line">True   True   True</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>  <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span>  <span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><h3 id="外部链接"><a href="#外部链接" class="headerlink" title="外部链接"></a>外部链接</h3><p>使用 ``链接文本 <a href="http://example.com/">http://example.com/</a><code>_</code> 可以插入网页链接. 链接文本是网址，则不需要特别标记，分析器会自动发现文本里的链接或邮件地址.</p>
<p>可以把链接和标签分开 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id44">:duref:<code>ref </code></a>), 如下:</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">段落里包含 `a <span class="built_in">link</span>`_.</span><br><span class="line"></span><br><span class="line">.. _a <span class="built_in">link</span>: http://example.com/</span><br></pre></td></tr></tbody></table></figure>

<h3 id="内部链接"><a href="#内部链接" class="headerlink" title="内部链接"></a>内部链接</h3><p>内部链接是Sphinx特定的reST角色, 查看章节 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/markup/inline.html#ref-role">交叉索引的位置</a>.</p>
<h2 id="章节"><a href="#章节" class="headerlink" title="章节"></a>章节</h2><p>章节的标题 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id48">:duref:<code>ref </code></a>) 在双上划线符号之间（或为下划线）, 并且符号的长度不能小于文本的长度:</p>
<figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br><span class="line">This is a heading</span><br><span class="line"><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span><span class="operator">=</span></span><br></pre></td></tr></tbody></table></figure>

<p>通常没有专门的符号表示标题的等级，但是对于Python 文档，可以这样认为:</p>
<ul>
<li><code>#</code> 及上划线表示部分</li>
<li><code>*</code> 及上划线表示章节</li>
<li><code>=</code>, 小章节</li>
<li><code>-</code>, 子章节</li>
<li><code>^</code>, 子章节的子章节</li>
<li><code>"</code>, 段落</li>
</ul>
<p>当然也可以标记（查看 reST 文档), 定义章节的层次，但是需要注意输出格式(HTML, LaTeX)所支持的层次深度 .</p>
<h2 id="显式标记"><a href="#显式标记" class="headerlink" title="显式标记"></a>显式标记</h2><p>显式标记”Explicit markup” (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id51">:duref:<code>ref </code></a>) 用在那些需做特殊处理的reST结构中, 如尾注，突出段落，评论，通用指令.</p>
<p>显式标记以 <code>..</code> 开始，后跟空白符，与下面段落的缩进一样. (在显示标记与正常的段落间需有空行，这听起来有些复杂，但是写起来会非常直观.)</p>
<h2 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h2><p>指令 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id54">:duref:<code>ref </code></a>) 是显式标记最常用的模块. 也是reST 的扩展规则, 在 Sphinx 经常被用到.</p>
<p>文档工具支持以下指令:</p>
<ul>
<li><p>警告: </p>
<ul>
<li>, <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id58">:dudir:<code>caution</code></a>, 注意</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id60">:dudir:<code>danger</code></a>, 危险</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id62">:dudir:<code>error</code></a>, 错误</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id64">:dudir:<code>hint</code></a>,提示</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id66">:dudir:<code>important</code></a>,重要</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id68">:dudir:<code>note</code></a>,注解</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id70">:dudir:<code>tip</code></a>, 小技巧</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id72">:dudir:<code>warning</code></a> 警告</li>
<li>及通用标记 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id74">:dudir:<code>admonition</code></a>. (大多数模式仅支持 “note” 及 “warning” )</li>
</ul>
</li>
<li><p>图像:</p>
<ul>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id76">:dudir:<code>image</code></a> (详情可看下面的 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id129">图像</a> )</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id78">:dudir:<code>figure</code></a> (有标题及可选说明的图像)</li>
</ul>
</li>
<li><p>额外的主体元素:</p>
<ul>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id80">:dudir:<code>contents </code></a> (本地，仅是当前文件的内容表格)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id82">:dudir:<code>container</code></a> (自定义容器，用来生成HTML的 <code>&lt;div&gt;</code> )</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id84">:dudir:<code>rubric</code></a> (和文档章节无关的标题)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id86">:dudir:<code>topic</code></a>, <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id88">:dudir:<code>sidebar</code></a> (高亮显示的主体元素)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id90">:dudir:<code>parsed-literal</code></a> (支持内联标记的斜体模块)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id92">:dudir:<code>epigraph</code></a> (可选属性行的摘要模块)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id94">:dudir:<code>highlights</code></a>, <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id96">:dudir:<code>pull-quote</code></a> (有自己的类属性的摘要模块)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id98">:dudir:<code>compound</code></a> ( 复合段落)</li>
</ul>
</li>
<li><p>专用表格:</p>
<ul>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id100">:dudir:<code>table</code></a> (有标题的表格)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id102">:dudir:<code>csv-table</code></a> (CSV自动生成表格)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id104">:dudir:<code>list-table</code></a> (列表生成的表格)</li>
</ul>
</li>
<li><p>专用指令:</p>
<ul>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id106">:dudir:<code>raw</code></a> (包含原始格式的标记)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id108">:dudir:<code>include</code></a> (包含reStructuredText标记的文件) – 在Sphinx中,如果包含绝对文件路径，指令会以源目录地址做为参照</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id110">:dudir:<code>class</code></a> (将类属性指派给下一个元素) [<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id152">1]</a></li>
</ul>
</li>
<li><p>HTML 特性:</p>
<ul>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id113">:dudir:<code>meta</code></a> (生成HTML <code>&lt;meta&gt;</code> 标签)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id115">:dudir:<code>title</code></a> (覆盖文档标题)</li>
</ul>
</li>
<li><p>影响标记:</p>
<ul>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id117">:dudir:<code>default-role</code></a> (设置新的默认角色)</li>
<li><a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id119">:dudir:<code>role</code></a> (创建新的角色)</li>
</ul>
<p>如果仅有一个文件，最好使用 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id121">:confval:<code>default_role</code></a>.</p>
</li>
</ul>
<p>设置不使用指令 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id123">:dudir:<code>sectnum</code></a>, <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id125">:dudir:<code>header</code></a> 及 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id127">:dudir:<code>footer</code></a>.</p>
<p>Sphinx 新增指令可查阅 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/markup/index.html#sphinxmarkup">Sphinx标记的组成</a>.</p>
<p>指令有名字，参数，选项及内容组成. (记住这些，在下面一小节中自定义指令里会用到).来看一个例子:</p>
<figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.. function:: <span class="built_in">foo</span>(<span class="attribute">x</span>)</span><br><span class="line">              <span class="built_in">foo</span>(<span class="attribute">y</span>, z)</span><br><span class="line">   :module: some<span class="selector-class">.module</span><span class="selector-class">.name</span></span><br><span class="line"></span><br><span class="line">   返回用户输入的一行文本.</span><br></pre></td></tr></tbody></table></figure>

<p><code>function</code> 是指令名字. 在第一行和第二行给出了两个参数, 及一个选项 <code>module</code> (如你所见，选项在参数后给出，由冒号引出). 选项必须与指令有一样的缩进.</p>
<p>指令的内容在隔开一个空行后，与指令有一样缩进.</p>
<h2 id="图像"><a href="#图像" class="headerlink" title="图像"></a>图像</h2><p>reST 支持图像指令 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id130">:dudir:<code>ref </code></a>), 如下:</p>
<figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.. image:: gnu.<span class="built_in">png</span></span><br><span class="line">   (选项)</span><br></pre></td></tr></tbody></table></figure>

<p>这里给出的文件名( <code>gnu.png</code>) 必须是源文件的相对路径，如果是绝对路径则以源目录为根目录. 例如，在文件 <code>sketch/spam.rst</code> 引用图像 <code>images/spam.png</code> ，则使用 <code>../images/spam.png</code> 或者 <code>/images/spam.png</code>.</p>
<p>Sphinx 会自动将图像文件拷贝到输出目录的子目录里，( 输出HTML时目录为 <code>_static</code> )</p>
<p>图像的大小选项 (<code>width</code> 及 <code>height</code>) : 如果没有单位或单位为像素, 给定的尺寸信息仅在输出通道支持像素时才有用 ( 如输出LaTeX 没用). 其他单位在输出(如 <code>pt</code> )HTML、LaTeX 时被用到.</p>
<p>Sphinx 延伸了标准的文档化行为，只需在后面加星号:</p>
<figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.. image:: gnu.*</span><br></pre></td></tr></tbody></table></figure>

<p>上面这样写，Sphinx 会搜索所有名字匹配的图像，而不管图像类型. 每个生成器则会选择最合适的图像. 一般，在源文件目录里文件名 <code>gnu.*</code> 会含有两个文件 <code>gnu.pdf</code> 和 <code>gnu.png</code> , LaTeX 生成器会选择前者，而HTML 生成器则匹配后者.</p>
<p><em>Changed in version 0.4:</em> 添加对文件名以星号结束的支持.</p>
<p><em>Changed in version 0.6:</em> 图像路径可以是绝对路径.</p>
<h2 id="尾注"><a href="#尾注" class="headerlink" title="尾注"></a>尾注</h2><p>尾注 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id133">:duref:<code>ref </code></a>), 使用 <code>[#name]_</code> 标记尾注的位置, 尾注的内容则在文档底部红色标题”Footnotes”的后面 , 如下:</p>
<figure class="highlight jboss-cli"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum [<span class="comment">#f1]_ dolor sit amet ... [#f2]_</span></span><br><span class="line"></span><br><span class="line"><span class="string">..</span> rubric:: Footnotes</span><br><span class="line"></span><br><span class="line"><span class="string">..</span> [<span class="comment">#f1] 第一条尾注的文本.</span></span><br><span class="line"><span class="string">..</span> [<span class="comment">#f2] 第二条尾注的文本.</span></span><br></pre></td></tr></tbody></table></figure>

<p>你也可以使用数字尾注 (<code>[1]_</code>) 或使用自动排序的(<code>[#]_</code>).</p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>支持标准的reST 引用 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id136">:duref:<code>ref </code></a>) , 且新增了”global”特性, 所有参考文献不受所在文件的限制. 如:</p>
<figure class="highlight prolog"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Lorem</span> ipsum [<span class="symbol">Ref</span>]<span class="symbol">_</span> dolor sit amet.</span><br><span class="line"></span><br><span class="line">.. [<span class="symbol">Ref</span>] 参考文献, 书,<span class="symbol">URL</span> 等.</span><br></pre></td></tr></tbody></table></figure>

<p>引用的使用同尾注很相近，但是它们没有数字标签或以 <code>#</code> 开始.</p>
<h2 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h2><p>reST 支持替换 “substitutions” (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id139">:duref:<code>ref </code></a>), 有一小段文本或标记被关联到 <code>|name|</code>. 定义与尾注一样需有明确的标记块，如下:</p>
<figure class="highlight xquery"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.. <span class="built_in">|name</span>|<span class="built_in"> replace</span>:: replacement *<span class="type">text</span>*</span><br></pre></td></tr></tbody></table></figure>

<p>或者:</p>
<figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.. |caution| image:: warning.png</span><br><span class="line">             :alt: Warning!</span><br></pre></td></tr></tbody></table></figure>

<p>详情查看 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id141">:duref:<code>reST reference for substitutions </code></a> .</p>
<p>如果想在所有文档中使用这些替换, 需把它们放在 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id143">:confval:<code>rst_prolog</code></a> 或一个单独文件里， 然后在使用它们的文档文件里包含这个文件，包含指令 <code>include</code> . (请给出包含文件的扩展名，已区别于其他的源文件，避免Sphinx将其作为独立的文档文件.)</p>
<p>Sphinx 定义了一些默认的替换, 请查看 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/markup/inline.html#default-substitutions">替换</a>.</p>
<h2 id="评论"><a href="#评论" class="headerlink" title="评论"></a>评论</h2><p>有明确标记块但又不是有效的结构标记的标记 (像上面的尾注）都被视为评论 (<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id146">:duref:<code>ref </code></a>). 例如:</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">.. </span>这是一个评论.</span><br></pre></td></tr></tbody></table></figure>

<p>可以通过缩进产生多行评论:</p>
<figure class="highlight erlang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">..</span><br><span class="line">   这整个缩进块都是</span><br><span class="line">   一个评论.</span><br><span class="line"></span><br><span class="line">   仍是一个评论.</span><br></pre></td></tr></tbody></table></figure>

<h2 id="源编码"><a href="#源编码" class="headerlink" title="源编码"></a>源编码</h2><p>在reST使用Unicode字符可以容易的包含特殊字符如破折号，版权标志. Sphinx 默认源文件使用UTF-8 编码; 你可以通过 <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id149">:confval:<code>source_encoding</code></a> 的配置值改变编码.</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>具体使用中可能会遇到一些问题:</p>
<ul>
<li><strong>内联标记的分离</strong> 如上面所讲，内联标记需与周围的文本使用空格分隔, 内联标记内部则使用反斜线转义空格. 查看详情: <a href="http://docutils.sf.net/docs/ref/rst/restructuredtext.html#inline-markup">the reference</a> .</li>
<li><strong>内联标记不能嵌套</strong> 像这样写 <code>*see :func:</code>foo<code>*</code> 是不允许的.</li>
</ul>
<p>Footnotes</p>
<table>
<thead>
<tr>
<th>[<a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id112">1]</a></th>
<th>当默认主域里包含指令 <code>class</code> , 这个指令将被隐藏 因此, Sphinx使用 <code>rst-class</code>.</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><strong>Be sure to say yes to autodoc</strong></p>
<p>More information can refer <a href="https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id2">https://zh-sphinx-doc.readthedocs.io/en/latest/rest.html#id2</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/01/23/python-sphinx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/23/python-sphinx/" class="post-title-link" itemprop="url">python中文档SPHINX的使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-23 23:29:02" itemprop="dateCreated datePublished" datetime="2017-01-23T23:29:02+08:00">2017-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/Sphinx/" itemprop="url" rel="index"><span itemprop="name">Sphinx</span></a>
                </span>
            </span>

          
            <span id="/2017/01/23/python-sphinx/" class="post-meta-item leancloud_visitors" data-flag-title="python中文档SPHINX的使用" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/01/23/python-sphinx/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/23/python-sphinx/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/23/python-sphinx/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/23/python-sphinx/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Python中文档Sphinx的使用"><a href="#Python中文档Sphinx的使用" class="headerlink" title="Python中文档Sphinx的使用"></a>Python中文档Sphinx的使用</h1><h2 id="安装软件包"><a href="#安装软件包" class="headerlink" title="安装软件包"></a>安装软件包</h2><figure class="highlight cmake"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip <span class="keyword">install</span> Sphinx</span><br></pre></td></tr></tbody></table></figure>

<h2 id="生成模板"><a href="#生成模板" class="headerlink" title="生成模板"></a>生成模板</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 大部分默认即可</span></span><br><span class="line">$ sphinx-quickstart</span><br></pre></td></tr></tbody></table></figure>

<p>此时可以看到生成的文件为：</p>
<figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">➜  docs git:(master) ✗ <span class="keyword">ls</span> </span><br><span class="line"></span><br><span class="line">_build    _static   Makefile                                         </span><br><span class="line">_templates   <span class="keyword">conf</span>.<span class="keyword">py</span>  <span class="built_in">index</span>.rst</span><br></pre></td></tr></tbody></table></figure>

<p>此时查看<code>index.rst</code>文件</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">.. </span>toctree::</span><br><span class="line"><span class="code">   :maxdepth: 2</span></span><br><span class="line"><span class="code">   :caption: Contents:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">Indices and tables</span></span><br><span class="line"><span class="section">==================</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>:ref:`genindex`</span><br><span class="line"><span class="bullet">* </span>:ref:`modindex`</span><br><span class="line"><span class="bullet">* </span>:ref:`search`</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>





<h2 id="输出文件"><a href="#输出文件" class="headerlink" title="输出文件"></a>输出文件</h2><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 生成html文件</span></span><br><span class="line">$ make html</span><br><span class="line"><span class="comment"># 生成pdf文件</span></span><br><span class="line">$ make latexpdf</span><br></pre></td></tr></tbody></table></figure>

<h2 id="新增文件"><a href="#新增文件" class="headerlink" title="新增文件"></a>新增文件</h2><p>此时新增一个文档和图片</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> hello.rst</span><br><span class="line"><span class="built_in">cp</span> test.png _static/test.png</span><br></pre></td></tr></tbody></table></figure>

<p>更新<code>index.rst</code>文件，注意缩进</p>
<figure class="highlight asciidoc"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">.. </span>toctree::</span><br><span class="line"><span class="code">   :maxdepth: 2</span></span><br><span class="line"><span class="code">   :caption: Contents:</span></span><br><span class="line"></span><br><span class="line"><span class="code">   hello.rst</span></span><br><span class="line"><span class="code">   </span></span><br><span class="line"><span class="bullet">.. </span>image:: _static/test.png</span><br><span class="line"></span><br><span class="line"><span class="section">Indices and tables</span></span><br><span class="line"><span class="section">==================</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>:ref:`genindex`</span><br><span class="line"><span class="bullet">* </span>:ref:`modindex`</span><br><span class="line"><span class="bullet">* </span>:ref:`search`</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="更新模板"><a href="#更新模板" class="headerlink" title="更新模板"></a>更新模板</h2><p>可以通过修改<code>_static/default.css</code>和<code>_templates/layout.html</code>来修改和定制网站的外观。</p>
<h2 id="多语种支持"><a href="#多语种支持" class="headerlink" title="多语种支持"></a>多语种支持</h2><p>安装软件</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$pip3</span> install sphinx-intl</span><br></pre></td></tr></tbody></table></figure>

<p>增加下列信息到conf.py，</p>
<figure class="highlight ini"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">locale_dirs</span> = [<span class="string">'locale/'</span>]</span><br><span class="line"><span class="attr">gettext_compact</span> = <span class="literal">False</span></span><br></pre></td></tr></tbody></table></figure>

<p>生成pot文件</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make gettext</span><br></pre></td></tr></tbody></table></figure>

<p>生成po文件</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sphinx-intl update -p _build/gettext -l en</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>此时就能看到在文件locale/en/LC_MESSAGES中的信息</p>
</blockquote>
<p>构建翻译的文档</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ make -e SPHINXOPTS=<span class="string">"-D language='en'"</span> html</span><br></pre></td></tr></tbody></table></figure>



<p><strong>Be sure to say yes to autodoc</strong></p>
<p>More information can refer [<a href="http://www.matplotlib.org/sampledoc]">http://www.matplotlib.org/sampledoc]</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/01/23/python-virtualenv/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/23/python-virtualenv/" class="post-title-link" itemprop="url">python 虚拟环境virtualenv</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-23 23:29:02" itemprop="dateCreated datePublished" datetime="2017-01-23T23:29:02+08:00">2017-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span id="/2017/01/23/python-virtualenv/" class="post-meta-item leancloud_visitors" data-flag-title="python 虚拟环境virtualenv" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/01/23/python-virtualenv/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/23/python-virtualenv/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/23/python-virtualenv/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/23/python-virtualenv/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python-虚拟环境virtualenv"><a href="#python-虚拟环境virtualenv" class="headerlink" title="python 虚拟环境virtualenv"></a>python 虚拟环境virtualenv</h1><p>在开发Python应用程序的时候，经常会因为各个应用程序使用的环境或包不同，而导致应用程序无法运行，亦或者因为没有管理员权限无法安装相应的包。</p>
<p>此时就需要使用Python的强大虚拟机工具virtualenv了，为每个应用创建一套自己的Python运行环境。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>首先，我们用pip安装virtualenv：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install virtualenv</span><br></pre></td></tr></tbody></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="第一步，创建目录："><a href="#第一步，创建目录：" class="headerlink" title="第一步，创建目录："></a>第一步，创建目录：</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> myproject</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> myproject/</span></span><br></pre></td></tr></tbody></table></figure>


<h3 id="第二步，创建一个独立的Python运行环境，命名为venv："><a href="#第二步，创建一个独立的Python运行环境，命名为venv：" class="headerlink" title="第二步，创建一个独立的Python运行环境，命名为venv："></a>第二步，创建一个独立的Python运行环境，命名为venv：</h3><figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ virtualenv --<span class="keyword">no</span>-site-packages venv</span><br><span class="line"></span><br><span class="line">Using base prefix <span class="string">'/usr/local/.../Python.framework/Versions/3.4'</span></span><br><span class="line"></span><br><span class="line">New <span class="keyword">python</span> <span class="built_in">executable</span> in venv/bin/<span class="keyword">python3</span>.<span class="number">4</span></span><br><span class="line"></span><br><span class="line">Also creating <span class="built_in">executable</span> in venv/bin/<span class="keyword">python</span></span><br><span class="line"></span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>命令virtualenv就可以创建一个独立的Python运行环境，我们还加上了参数–no-site-packages，这样，已经安装到系统Python环境中的所有第三方包都不会复制过来，这样，我们就得到了一个不带任何第三方包的“干净”的Python运行环境。</p>
<p>新建的Python环境被放到当前目录下的venv目录。有了venv这个Python环境，可以用source进入该环境：</p>
<h3 id="第三部，调用虚拟环境"><a href="#第三部，调用虚拟环境" class="headerlink" title="第三部，调用虚拟环境"></a>第三部，调用虚拟环境</h3><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> venv/bin/activate</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">(venv)$</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"></span></span><br></pre></td></tr></tbody></table></figure>

<p>注意到命令提示符变了，有个(venv)前缀，表示当前环境是一个名为venv的Python环境。</p>
<h3 id="第四步，安装各种包"><a href="#第四步，安装各种包" class="headerlink" title="第四步，安装各种包"></a>第四步，安装各种包</h3><p>下面正常安装各种第三方包，并运行python命令：</p>
<figure class="highlight erlang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(venv)<span class="string">$ </span>pip install jinja2</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">Successfully installed jinja2-<span class="number">2.7</span>.<span class="number">3</span> markupsafe-<span class="number">0.23</span></span><br><span class="line"></span><br><span class="line">(venv)<span class="string">$ </span>python myapp.py</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>在venv环境下，用pip安装的包都被安装到venv这个环境下，系统Python环境不受任何影响。也就是说，venv环境是专门针对myproject这个应用创建的。</p>
<h3 id="第五步，退出虚拟环境"><a href="#第五步，退出虚拟环境" class="headerlink" title="第五步，退出虚拟环境"></a>第五步，退出虚拟环境</h3><p>退出当前的venv环境，使用deactivate命令：</p>
<figure class="highlight gams"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(venv)<span class="symbol">$</span> deactivate</span><br><span class="line"></span><br><span class="line"><span class="symbol">$</span></span><br></pre></td></tr></tbody></table></figure>
<p>此时就回到了正常的环境，现在pip或python均是在系统Python环境下执行。</p>
<h1 id="指定python版本"><a href="#指定python版本" class="headerlink" title="指定python版本"></a>指定python版本</h1><p>如果存在多个python解释器，可以选择指定一个Python解释器（比如<code>python2.7</code>），没有指定则由系统默认的解释器来搭建，比如下面的命令为使用python2.7来搭建。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ virtualenv -p /usr/bin/python2.7 my_project_env</span><br></pre></td></tr></tbody></table></figure>

<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432712108300322c61f256c74803b43bfd65c6f8d0d0000">https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432712108300322c61f256c74803b43bfd65c6f8d0d0000</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/01/23/python-vitualenv/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/23/python-vitualenv/" class="post-title-link" itemprop="url">python 虚拟环境virtualenv</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-23 23:29:02" itemprop="dateCreated datePublished" datetime="2017-01-23T23:29:02+08:00">2017-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span id="/2017/01/23/python-vitualenv/" class="post-meta-item leancloud_visitors" data-flag-title="python 虚拟环境virtualenv" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/01/23/python-vitualenv/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/23/python-vitualenv/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/23/python-vitualenv/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/23/python-vitualenv/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>在开发Python应用程序的时候，经常会因为各个应用程序使用的环境或包不同，而导致应用程序无法运行，亦或者因为没有管理员权限无法安装相应的包。</p>
<p>此时就需要使用Python的强大虚拟机工具virtualenv了，为每个应用创建一套自己的Python运行环境。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>首先，我们用pip安装virtualenv：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip3 install virtualenv</span><br></pre></td></tr></tbody></table></figure>



<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="第一步，创建目录："><a href="#第一步，创建目录：" class="headerlink" title="第一步，创建目录："></a>第一步，创建目录：</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">mkdir</span> myproject</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cd</span> myproject/</span></span><br></pre></td></tr></tbody></table></figure>





<h2 id="第二步，创建一个独立的Python运行环境，命名为venv："><a href="#第二步，创建一个独立的Python运行环境，命名为venv：" class="headerlink" title="第二步，创建一个独立的Python运行环境，命名为venv："></a>第二步，创建一个独立的Python运行环境，命名为venv：</h2><figure class="highlight vim"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ virtualenv --<span class="keyword">no</span>-site-packages venv</span><br><span class="line"></span><br><span class="line">Using base prefix <span class="string">'/usr/local/.../Python.framework/Versions/3.4'</span></span><br><span class="line"></span><br><span class="line">New <span class="keyword">python</span> <span class="built_in">executable</span> in venv/bin/<span class="keyword">python3</span>.<span class="number">4</span></span><br><span class="line"></span><br><span class="line">Also creating <span class="built_in">executable</span> in venv/bin/<span class="keyword">python</span></span><br><span class="line"></span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>




<p>命令virtualenv就可以创建一个独立的Python运行环境，我们还加上了参数–no-site-packages，这样，已经安装到系统Python环境中的所有第三方包都不会复制过来，这样，我们就得到了一个不带任何第三方包的“干净”的Python运行环境。</p>
<p>新建的Python环境被放到当前目录下的venv目录。有了venv这个Python环境，可以用source进入该环境：</p>
<h2 id="第三部，调用虚拟环境"><a href="#第三部，调用虚拟环境" class="headerlink" title="第三部，调用虚拟环境"></a>第三部，调用虚拟环境</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">source</span> venv/bin/activate</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">(venv)$</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"></span></span><br></pre></td></tr></tbody></table></figure>


<p>注意到命令提示符变了，有个(venv)前缀，表示当前环境是一个名为venv的Python环境。</p>
<h2 id="第四步，安装各种包"><a href="#第四步，安装各种包" class="headerlink" title="第四步，安装各种包"></a>第四步，安装各种包</h2><p>下面正常安装各种第三方包，并运行python命令：</p>
<figure class="highlight erlang"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(venv)<span class="string">$ </span>pip install jinja2</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">Successfully installed jinja2-<span class="number">2.7</span>.<span class="number">3</span> markupsafe-<span class="number">0.23</span></span><br><span class="line"></span><br><span class="line">(venv)<span class="string">$ </span>python myapp.py</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>在venv环境下，用pip安装的包都被安装到venv这个环境下，系统Python环境不受任何影响。也就是说，venv环境是专门针对myproject这个应用创建的。</p>
<h2 id="第五步，退出虚拟环境"><a href="#第五步，退出虚拟环境" class="headerlink" title="第五步，退出虚拟环境"></a>第五步，退出虚拟环境</h2><p>退出当前的venv环境，使用deactivate命令：</p>
<figure class="highlight crystal"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(venv)<span class="variable">$ </span>deactivate</span><br><span class="line"></span><br><span class="line"><span class="variable">$</span></span><br><span class="line"><span class="variable"></span></span><br></pre></td></tr></tbody></table></figure>


<p>此时就回到了正常的环境，现在pip或python均是在系统Python环境下执行。</p>
<h1 id="指定python版本"><a href="#指定python版本" class="headerlink" title="指定python版本"></a>指定python版本</h1><p>如果存在多个python解释器，可以选择指定一个Python解释器（比如<code>python2.7</code>），没有指定则由系统默认的解释器来搭建，比如下面的命令为使用python2.7来搭建。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ virtualenv -p /usr/bin/python2.7 my_project_env</span><br></pre></td></tr></tbody></table></figure>



<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432712108300322c61f256c74803b43bfd65c6f8d0d0000">https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/001432712108300322c61f256c74803b43bfd65c6f8d0d0000</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/01/23/python-virtualenvwrapper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/23/python-virtualenvwrapper/" class="post-title-link" itemprop="url">python 虚拟环境管理工具virtualenvwrapper</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-23 23:29:02" itemprop="dateCreated datePublished" datetime="2017-01-23T23:29:02+08:00">2017-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span id="/2017/01/23/python-virtualenvwrapper/" class="post-meta-item leancloud_visitors" data-flag-title="python 虚拟环境管理工具virtualenvwrapper" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/01/23/python-virtualenvwrapper/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/23/python-virtualenvwrapper/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/23/python-virtualenvwrapper/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/23/python-virtualenvwrapper/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python-虚拟环境管理工具virtualenvwrapper"><a href="#python-虚拟环境管理工具virtualenvwrapper" class="headerlink" title="python 虚拟环境管理工具virtualenvwrapper"></a>python 虚拟环境管理工具virtualenvwrapper</h1><p>你可以在系统的任意地方创建虚拟环境，当下次需要这个某个环境的时候很难找，virtualenv不便于对环境的集中管理，virtualenvwrapper很好的解决了这个问题</p>
<p>首先需要安装：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip install virtualenv</span><br><span class="line">$ pip install virtualenvwrapper</span><br></pre></td></tr></tbody></table></figure>

<p>接下来创建一个目录，用来存放我们的虚拟环境，比如</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> ~/virtualenv/</span><br></pre></td></tr></tbody></table></figure>

<p>然后配置环境变量：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> WORKON_HOME=~/Pyenv</span><br><span class="line">$ VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3</span><br><span class="line">$ <span class="built_in">source</span> /usr/local/bin/virtualenvwrapper.sh</span><br></pre></td></tr></tbody></table></figure>

<p>这些内容可以写进bashrc文件中。</p>
<h2 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h2><p>利用 virtualenvwrapper，我们可以使用下面的命令轻松创建一个虚拟环境。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv spide</span><br><span class="line"></span><br><span class="line">$ mkvirtualenv --python=/usr/local/python3.7/bin/python py3 <span class="comment">#指定解释器为3.7</span></span><br><span class="line"></span><br><span class="line">$ mkvirtualenv -p python3.7 pynew <span class="comment">#指定版本比较喜欢用这个</span></span><br></pre></td></tr></tbody></table></figure>

<p>然后就可以使用包管理命令了：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ lsvirtualenv -b <span class="comment">#查看虚拟环境</span></span><br><span class="line"></span><br><span class="line">$ workon <span class="comment">#切换或者进入虚拟环境</span></span><br><span class="line">$ workon virtualenv-name <span class="comment"># 进入虚拟环境virtualenv-name</span></span><br><span class="line"></span><br><span class="line">$ lssitepackages <span class="comment">#查看当前环境中安装的那些包（启动虚拟环境后）</span></span><br><span class="line"></span><br><span class="line">$ deactivate <span class="comment">#退出虚拟环境</span></span><br><span class="line"></span><br><span class="line">$ rmvirtualenv virtualname <span class="comment">#虚拟环境名 删除虚拟环境</span></span><br></pre></td></tr></tbody></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/01/23/python-vitualenvwrapper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/23/python-vitualenvwrapper/" class="post-title-link" itemprop="url">python 虚拟环境管理工具virtualenvwrapper</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-23 23:29:02" itemprop="dateCreated datePublished" datetime="2017-01-23T23:29:02+08:00">2017-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                </span>
            </span>

          
            <span id="/2017/01/23/python-vitualenvwrapper/" class="post-meta-item leancloud_visitors" data-flag-title="python 虚拟环境管理工具virtualenvwrapper" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/01/23/python-vitualenvwrapper/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/23/python-vitualenvwrapper/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/23/python-vitualenvwrapper/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/23/python-vitualenvwrapper/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python-虚拟环境管理工具virtualenvwrapper"><a href="#python-虚拟环境管理工具virtualenvwrapper" class="headerlink" title="python 虚拟环境管理工具virtualenvwrapper"></a>python 虚拟环境管理工具virtualenvwrapper</h1><p>首先需要安装：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip install virtualenv</span><br><span class="line">$ pip install virtualenvwrapper</span><br></pre></td></tr></tbody></table></figure>

<p>接下来创建一个目录，用来存放我们的虚拟环境，比如</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> ~/virtualenv/</span><br></pre></td></tr></tbody></table></figure>

<p>然后配置环境变量：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> WORKON_HOME=~/Pyenv</span><br><span class="line">$ VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3</span><br><span class="line">$ <span class="built_in">source</span> /usr/local/bin/virtualenvwrapper.sh</span><br></pre></td></tr></tbody></table></figure>

<p>这些内容可以写进bashrc文件中。</p>
<h2 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h2><p>利用 virtualenvwrapper，我们可以使用下面的命令轻松创建一个虚拟环境。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkvirtualenv spide</span><br></pre></td></tr></tbody></table></figure>

<p>然后就可以使用包管理命令了：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ lsvirtualenv -b <span class="comment">#查看虚拟环境</span></span><br><span class="line"></span><br><span class="line">$ workon <span class="comment">#切换或者进入虚拟环境</span></span><br><span class="line">$ workon virtualenv-name <span class="comment"># 进入虚拟环境virtualenv-name</span></span><br><span class="line"></span><br><span class="line">$ lssitepackages <span class="comment">#查看当前环境中安装的那些包（启动虚拟环境后）</span></span><br><span class="line"></span><br><span class="line">$ deactivate <span class="comment">#退出虚拟环境</span></span><br><span class="line"></span><br><span class="line">$ rmvirtualenv <span class="comment">#虚拟环境名 删除虚拟环境</span></span><br></pre></td></tr></tbody></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/01/23/flex_manual_format_of_input_file/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/23/flex_manual_format_of_input_file/" class="post-title-link" itemprop="url">输入文件的格式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-23 22:22:00" itemprop="dateCreated datePublished" datetime="2017-01-23T22:22:00+08:00">2017-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flex/" itemprop="url" rel="index"><span itemprop="name">Flex</span></a>
                </span>
            </span>

          
            <span id="/2017/01/23/flex_manual_format_of_input_file/" class="post-meta-item leancloud_visitors" data-flag-title="输入文件的格式" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/01/23/flex_manual_format_of_input_file/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/23/flex_manual_format_of_input_file/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/23/flex_manual_format_of_input_file/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/23/flex_manual_format_of_input_file/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Flex输入文件的格式"><a href="#Flex输入文件的格式" class="headerlink" title="Flex输入文件的格式"></a>Flex输入文件的格式</h1><p>flex的输入文件包含三个部分，使用%%来分隔，格式如下：</p>
<figure class="highlight dos"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">定义段</span><br><span class="line"><span class="variable">%%</span></span><br><span class="line"><span class="variable"></span>规则段</span><br><span class="line"><span class="variable">%%</span></span><br><span class="line"><span class="variable"></span>用户代码</span><br></pre></td></tr></tbody></table></figure>

<h2 id="定义段的格式"><a href="#定义段的格式" class="headerlink" title="定义段的格式"></a>定义段的格式</h2><p>定义段的格式如下：</p>
<figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name <span class="keyword">definition</span></span><br></pre></td></tr></tbody></table></figure>

<p> <code>name</code> 的定义跟<code>C</code>语言类似，由开头为字母或者下划线组成的。<code>definition</code>为从第一个为非空格的字符一直到行尾。定义可以后续使用<code>{name}</code>来代替，会自动展开为<code>(definition)</code>。例如</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DIGIT    <span class="selector-attr">[0-9]</span></span><br><span class="line">ID       <span class="selector-attr">[a-z]</span><span class="selector-attr">[a-z0-9]</span>*</span><br></pre></td></tr></tbody></table></figure>

<p><code>DIGIT</code>为匹配一个数字的正则表达式，<code>ID</code>为一个第一个为字符，后面跟着零个或者多个的数字字符。</p>
<figure class="highlight dust"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="template-variable">{DIGIT}</span><span class="language-xml">+"."</span><span class="template-variable">{DIGIT}</span><span class="language-xml">*</span></span><br></pre></td></tr></tbody></table></figure>

<p>可以展开为：</p>
<figure class="highlight lisp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">([<span class="number">0</span><span class="number">-9</span>])+<span class="string">"."</span>([<span class="number">0</span><span class="number">-9</span>])*</span><br></pre></td></tr></tbody></table></figure>

<p>可以认为是浮点数的表达式。</p>
<p>在符号<code>%{</code>和 <code>%}</code>之间的部分都会被原版拷贝到输出，不过需要注意的是<code>%{</code>和<code>%}</code>字符必须 <strong>顶格写</strong> 。</p>
<p>另外一个比较有用的为<code>%top</code>，使用方法与<code>%{</code> … <code>%}</code> 使用类似。</p>
<p>这个字段的作用为，内部含的内容全部出现在生成文件的最开始，这对于定义一些宏或者写一些提示信息是比较有用的。</p>
<p>比如可以写些如下的内容：</p>
<figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">%top{</span><br><span class="line">  /*</span><br><span class="line"><span class="bullet">   *</span> Author       :       Guo Shaoguang</span><br><span class="line"><span class="bullet">   *</span> Email        :       sgguo@shao.ac.cn</span><br><span class="line"><span class="bullet">   *</span> Date         :       201010</span><br><span class="line"><span class="bullet">   *</span> Version      :       v1.0</span><br><span class="line"><span class="bullet">   *</span> Name         :       heal the world</span><br><span class="line"><span class="bullet">   *</span></span><br><span class="line">   * Copyright (c) 2010-2016, SHAO</span><br><span class="line"><span class="bullet">   *</span> All rights reserved.</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><code>%top</code>字段可以写多个，顺序就按照书写的顺序。</p>
<h2 id="规则段的格式"><a href="#规则段的格式" class="headerlink" title="规则段的格式"></a>规则段的格式</h2><p>规则段的格式为：</p>
<figure class="highlight coq"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pattern</span> action</span><br></pre></td></tr></tbody></table></figure>

<p>需要注意的是<code>pattern</code>必须顶格写。</p>
<h2 id="用户代码的格式"><a href="#用户代码的格式" class="headerlink" title="用户代码的格式"></a>用户代码的格式</h2><p>用户代码被原版照搬到<code>lex.yy.c</code>文件中，可以省略不写。</p>
<h2 id="如何写注释"><a href="#如何写注释" class="headerlink" title="如何写注释"></a>如何写注释</h2><p>注释的写法与C语言类似，唯一需要注意的是，最好在<code>/*</code>的前面加上几个空格，并且都是在单独一行里面。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/01/23/flex_manual_regular_expressions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/23/flex_manual_regular_expressions/" class="post-title-link" itemprop="url">Flex expressions</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-23 22:14:00" itemprop="dateCreated datePublished" datetime="2017-01-23T22:14:00+08:00">2017-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flex/" itemprop="url" rel="index"><span itemprop="name">Flex</span></a>
                </span>
            </span>

          
            <span id="/2017/01/23/flex_manual_regular_expressions/" class="post-meta-item leancloud_visitors" data-flag-title="Flex expressions" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/01/23/flex_manual_regular_expressions/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/23/flex_manual_regular_expressions/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/23/flex_manual_regular_expressions/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/23/flex_manual_regular_expressions/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>The patterns at the heart of every flex scanner use a rich regular expression language.<br>A regular expression is a pattern description using a metalanguage, a language that you<br>use to describe what you want the pattern to match. Flex’s regular expression language<br>is essentially POSIX-extended regular expressions (which is not surprising considering<br>their shared Unix heritage). The metalanguage uses standard text characters, some of<br>which represent themselves and others of which represent patterns. All characters other<br>than the ones listed below, including all letters and digits, match themselves.<br>The characters with special meaning in regular expressions are:</p>
<ul>
<li>. Matches any single character except the newline character ( \n ).</li>
<li>[] A character class that matches any character within the brackets. If the first char- acter is a circumflex ( ^ ), it changes the meaning to match any character except the ones within the brackets. A dash inside the square brackets indicates a character range; for example, [0-9] means the same thing as [0123456789] and [a-z] means any lowercase letter. A - or ] as the first character after the [ is interpreted literally to let you include dashes and square brackets in character classes. POSIX intro- duced other special square bracket constructs that are useful when handling non- English alphabets, described later in this chapter. Other metacharacters do not have any special meaning within square brackets except that C escape sequences starting with \ are recognized. Character ranges are interpreted relative to the character coding in use, so the range [A-z] with ASCII character coding would match all uppercase and lowercase letters, as well as six punctuation characters whose codes fall between the code for Z and the code for a . In practice, useful ranges are ranges of digits, of uppercase letters, or of lowercase letters.</li>
<li>[a-z]{-}[jv] A differenced character class, with the characters in the first class omitting the characters in the second class (only in recent versions of flex).</li>
<li>^ Matches the beginning of a line as the first character of a regular expression. Also used for negation within square brackets.</li>
<li>$ Matches the end of a line as the last character of a regular expression.</li>
<li>{} If the braces contain one or two numbers, indicate the minimum and maximum number of times the previous pattern can match. For example, A{1,3} matches one to three occurrences of the letter A, and 0{5} matches 00000. If the braces contain a name, they refer to a named pattern by that name.</li>
<li>\ Used to escape metacharacters and as part of the usual C escape sequences; for example, \n is a newline character, while * is a literal asterisk.</li>
<li><ul>
<li>Matches zero or more copies of the preceding expression. For example, [ \t]* is a common pattern to match optional spaces and tabs, that is, whitespace, which matches “ ”, “ <tab><tab>”, or an empty string.</tab></tab></li>
</ul>
</li>
<li><ul>
<li>Matches one or more occurrences of the preceding regular expression. For example, [0-9]+ matches strings of digits such as 1 , 111 , or 123456 but not an empty string.</li>
</ul>
</li>
<li>? Matches zero or one occurrence of the preceding regular expression. For example, -?[0-9]+ matches a signed number including an optional leading minus sign.</li>
<li>| The alternation operator; matches either the preceding regular expression or the following regular expression. For example, faith|hope|charity matches any of the three virtues.</li>
<li>“…” Anything within the quotation marks is treated literally. Metacharacters other than C escape sequences lose their meaning. As a matter of style, it’s good practice to quote any punctuation characters intended to be matched literally.</li>
<li>() Groups a series of regular expressions together into a new regular expression. For example, (01) matches the character sequence 01, and a(bc|de) matches abc or ade. Parentheses are useful when building up complex patterns with *, +, ?, and |.</li>
<li>/ Trailing context, which means to match the regular expression preceding the slash but only if followed by the regular expression after the slash. For example, 0/1 matches 0 in the string 01 but would not match anything in the string 0 or 02 . The material matched by the pattern following the slash is not “consumed” and remains to be turned into subsequent tokens. Only one slash is permitted per pattern. The repetition operators affect the smallest preceding expression, so abc+ matches ab followed by one or more c’s. Use parentheses freely to be sure your expressions match what you want, such as (abc)+ to match one or more repetitions of abc.</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/01/23/flex_manual_handle_ambiguous_patterns/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/23/flex_manual_handle_ambiguous_patterns/" class="post-title-link" itemprop="url">Flex handles ambiguous patterns</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-23 22:13:00" itemprop="dateCreated datePublished" datetime="2017-01-23T22:13:00+08:00">2017-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flex/" itemprop="url" rel="index"><span itemprop="name">Flex</span></a>
                </span>
            </span>

          
            <span id="/2017/01/23/flex_manual_handle_ambiguous_patterns/" class="post-meta-item leancloud_visitors" data-flag-title="Flex handles ambiguous patterns" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/01/23/flex_manual_handle_ambiguous_patterns/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/23/flex_manual_handle_ambiguous_patterns/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/23/flex_manual_handle_ambiguous_patterns/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/23/flex_manual_handle_ambiguous_patterns/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Most flex programs are quite ambiguous, with multiple patterns that can match the same input. Flex resolves the ambiguity with two simple rules:</p>
<ul>
<li>Match the longest possible string every time the scanner matches input.</li>
<li>In the case of a tie, use the pattern that appears first in the program.</li>
</ul>
<p>These turn out to do the right thing in the vast majority of cases. Consider this snippet<br>from a scanner for C source code:</p>
<figure class="highlight kotlin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"+"</span></span><br><span class="line"><span class="string">"="</span></span><br><span class="line"><span class="string">"+="</span> { <span class="keyword">return</span> ADD; }</span><br><span class="line">{ <span class="keyword">return</span> ASSIGN; }</span><br><span class="line">{ <span class="keyword">return</span> ASSIGNADD; }</span><br><span class="line"><span class="string">"if"</span></span><br><span class="line"><span class="string">"else"</span></span><br><span class="line">[a-zA-Z_][a-zA-Z0-9_]* { <span class="keyword">return</span> KEYWORDIF; }</span><br><span class="line">{ <span class="keyword">return</span> KEYWORDELSE; }</span><br><span class="line">{ <span class="keyword">return</span> IDENTIFIER; }</span><br></pre></td></tr></tbody></table></figure>

<p>For the first three patterns, the string <code>+=</code> is matched as one token, since <code>+=</code> is longer than<br><code>+</code> . For the last three patterns, so long as the patterns for keywords precede the pattern<br>that matches an identifier, the scanner will match keywords correctly.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://shaoguangleo.github.io/2017/01/23/flex_manual_simple_examples/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="郭大侠">
      <meta itemprop="description" content="郭大侠的博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="浩瀚宇宙 灿烂星空">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/23/flex_manual_simple_examples/" class="post-title-link" itemprop="url">Flex 的一些简单例子</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-01-23 22:13:00" itemprop="dateCreated datePublished" datetime="2017-01-23T22:13:00+08:00">2017-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-06-19 21:19:18" itemprop="dateModified" datetime="2025-06-19T21:19:18+08:00">2025-06-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flex/" itemprop="url" rel="index"><span itemprop="name">Flex</span></a>
                </span>
            </span>

          
            <span id="/2017/01/23/flex_manual_simple_examples/" class="post-meta-item leancloud_visitors" data-flag-title="Flex 的一些简单例子" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/2017/01/23/flex_manual_simple_examples/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/01/23/flex_manual_simple_examples/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/01/23/flex_manual_simple_examples/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/01/23/flex_manual_simple_examples/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>来看看NB闪闪的flex的使用。</p>
<p>接下来简单的一句话的含义为，在遇到字符 username的时自动替换为 用户名的登录名：</p>
<figure class="highlight perl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">%%</span></span><br><span class="line">username    <span class="keyword">printf</span>( <span class="string">"<span class="variable">%s</span>"</span>, <span class="keyword">getlogin</span>() );</span><br></pre></td></tr></tbody></table></figure>

<p>默认情况下，任何不匹配的信息都会拷贝输出到终端。</p>
<p>上面的就是一个规则，其中 <code>username' 是模式， </code>printf’ 为动作。`%%’ 标记规则的开始。</p>
<p>下面说一个简单的例子<code>example1.l</code>：</p>
<figure class="highlight perl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">        <span class="keyword">int</span> num_lines = <span class="number">0</span>, num_chars = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">%%</span></span><br><span class="line">\n      ++num_lines; ++num_chars;</span><br><span class="line">.       ++num_chars;</span><br><span class="line"></span><br><span class="line"><span class="variable">%%</span></span><br><span class="line">main()</span><br><span class="line">        {</span><br><span class="line">        yylex();</span><br><span class="line">        <span class="keyword">printf</span>( <span class="string">"# of lines = <span class="variable">%d</span>, # of chars = <span class="variable">%d</span>\n"</span>,</span><br><span class="line">                num_lines, num_chars );</span><br><span class="line">        }</span><br></pre></td></tr></tbody></table></figure>

<p>这个程序将统计字符数和行数。程序将只输出最后的统计信息。</p>
<p>第一行定义了两个全局变量num_lines 和 num_chars，这两个变量可以被后面的yylex() 和  main() 函数来访问。</p>
<p>接下来有2个规则，匹配成 (`\n’) ，将增加 line 和 character 计数；两外一个就是匹配任何字符的将增加字符计数。</p>
<p>再来一个比较复杂的例子<code>example2.l</code></p>
<figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* scanner for a toy Pascal-like language */</span></span><br><span class="line"></span><br><span class="line">%{</span><br><span class="line"><span class="comment">/* need this for the call to atof() below */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;math.h&gt;</span></span></span><br><span class="line">%}</span><br><span class="line"></span><br><span class="line">DIGIT    [<span class="number">0</span><span class="number">-9</span>]</span><br><span class="line">ID       [a-z][a-z0<span class="number">-9</span>]*</span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line"></span><br><span class="line">{DIGIT}+    {</span><br><span class="line">            <span class="built_in">printf</span>( <span class="string">"An integer: %s (%d)\n"</span>, yytext,</span><br><span class="line">                    <span class="built_in">atoi</span>( yytext ) );</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">{DIGIT}+<span class="string">"."</span>{DIGIT}*        {</span><br><span class="line">            <span class="built_in">printf</span>( <span class="string">"A float: %s (%g)\n"</span>, yytext,</span><br><span class="line">                    <span class="built_in">atof</span>( yytext ) );</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>|then|begin|end|procedure|function        {</span><br><span class="line">            <span class="built_in">printf</span>( <span class="string">"A keyword: %s\n"</span>, yytext );</span><br><span class="line">            }</span><br><span class="line"></span><br><span class="line">{ID}        <span class="built_in">printf</span>( <span class="string">"An identifier: %s\n"</span>, yytext );</span><br><span class="line"></span><br><span class="line"><span class="string">"+"</span>|<span class="string">"-"</span>|<span class="string">"*"</span>|<span class="string">"/"</span>   <span class="built_in">printf</span>( <span class="string">"An operator: %s\n"</span>, yytext );</span><br><span class="line"></span><br><span class="line"><span class="string">"{"</span>[\^{}}\n]*<span class="string">"}"</span>     <span class="comment">/* eat up one-line comments */</span></span><br><span class="line"></span><br><span class="line">[ \t\n]+          <span class="comment">/* eat up whitespace */</span></span><br><span class="line"></span><br><span class="line">.           <span class="built_in">printf</span>( <span class="string">"Unrecognized character: %s\n"</span>, yytext );</span><br><span class="line"></span><br><span class="line">%%</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">( <span class="type">int</span> argc, <span class="type">char</span> **argv )</span></span></span><br><span class="line"><span class="function">    </span>{</span><br><span class="line">    ++argv, --argc;  <span class="comment">/* skip over program name */</span></span><br><span class="line">    <span class="keyword">if</span> ( argc &gt; <span class="number">0</span> )</span><br><span class="line">            yyin = <span class="built_in">fopen</span>( argv[<span class="number">0</span>], <span class="string">"r"</span> );</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">            yyin = stdin;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">yylex</span>();</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p>这个实例是解析类似Pascal语言的开始。程序解析了不同类型的标记并显示出来。</p>
<p>下一节介绍这个例子的含义。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/27/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/27/">27</a><span class="page-number current">28</span><a class="page-number" href="/page/29/">29</a><span class="space">&hellip;</span><a class="page-number" href="/page/100/">100</a><a class="extend next" rel="next" href="/page/29/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">郭大侠</p>
  <div class="site-description" itemprop="description">郭大侠的博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">998</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">181</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1450</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      友情链接
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://macshuo.com/" title="http:&#x2F;&#x2F;macshuo.com&#x2F;" rel="noopener" target="_blank">MacTalk</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://huhuidong.wordpress.com/" title="https:&#x2F;&#x2F;huhuidong.wordpress.com&#x2F;" rel="noopener" target="_blank">小胡</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2007 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郭大侠</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        






<script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"vIjrLnlboDVaaseO2yYcVSQF-gzGzoHsz","app_key":"NTHrGJp71GzEGvNUEUFumVcR","server_url":null,"security":true};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://shaoguangleo.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'vIjrLnlboDVaaseO2yYcVSQF-gzGzoHsz',
      appKey     : 'NTHrGJp71GzEGvNUEUFumVcR',
      placeholder: "路过，即是缘分...",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
